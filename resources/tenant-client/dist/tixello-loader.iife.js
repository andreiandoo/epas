var __defProp=Object.defineProperty,__defNormalProp=(e,t,n)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__publicField=(e,t,n)=>__defNormalProp(e,"symbol"!=typeof t?t+"":t,n);!function(){"use strict";class e{constructor(){__publicField(this,"events",new Map)}on(e,t){this.events.has(e)||this.events.set(e,new Set),this.events.get(e).add(t)}off(e,t){const n=this.events.get(e);n&&n.delete(t)}emit(e,t){const n=this.events.get(e);n&&n.forEach(e=>e(t))}once(e,t){const n=s=>{t(s),this.off(e,n)};this.on(e,n)}}class t{constructor(e){__publicField(this,"enabledModules"),__publicField(this,"loadedModules",new Map),this.enabledModules=e}async loadAll(){const e=this.enabledModules.map(e=>this.loadModule(e));await Promise.all(e)}async loadModule(e){try{let t;switch(e){case"events":const{EventsModule:e}=await Promise.resolve().then(()=>E);t=new e;break;case"cart":const{CartModule:n}=await Promise.resolve().then(()=>M);t=new n;break;case"checkout":const{CheckoutModule:s}=await Promise.resolve().then(()=>L);t=new s;break;case"seating":const{SeatingModule:i}=await Promise.resolve().then(()=>S);t=new i;break;default:return}await t.init(),this.loadedModules.set(e,t)}catch(t){}}getModule(e){return this.loadedModules.get(e)}isLoaded(e){return this.loadedModules.has(e)}}const n={};class s{static registerTemplate(e,t){n[e]=t}static init(e){var t;this.config=e;const s=(null==(t=e.site)?void 0:t.template)||"default";this.currentTemplate=n[s]||n.default,this.currentTemplate||(this.currentTemplate=n.default)}static get(){if(!this.currentTemplate)throw new Error("TemplateManager not initialized");return this.currentTemplate}static getConfig(){if(!this.config)throw new Error("TemplateManager not initialized");return this.config}static renderHeader(){return this.get().renderHeader(this.getConfig())}static renderFooter(){return this.get().renderFooter(this.getConfig())}static getAvailableTemplates(){return Object.keys(n)}}__publicField(s,"currentTemplate",null),__publicField(s,"config",null);const i={name:"default",headerClass:"bg-white shadow-sm border-b",footerClass:"bg-gray-50 border-t",containerClass:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",heroClass:"text-center py-16 bg-gradient-to-br from-gray-50 to-gray-100",heroTitleClass:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",heroSubtitleClass:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",cardClass:"bg-white rounded-lg shadow-md overflow-hidden",cardHoverClass:"hover:shadow-lg transition",primaryButtonClass:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-primary hover:bg-primary-dark transition",secondaryButtonClass:"inline-flex items-center px-6 py-3 border border-gray-300 text-base font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition",headingClass:"text-2xl font-bold text-gray-900",subheadingClass:"text-lg text-gray-600",renderHeader:e=>{var t,n,s;const i=null==(t=e.theme)?void 0:t.logo,a=(null==(n=e.site)?void 0:n.title)||"Tixello",r=(null==(s=e.menus)?void 0:s.header)||[];return`\n            <header class="bg-white shadow-sm border-b sticky top-0 z-50">\n                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                    <div class="flex justify-between items-center h-16">\n                        <a href="/" class="flex items-center">\n                            ${i?`<img src="${i}" alt="${a}" class="h-8 w-auto">`:`<span class="text-xl font-bold text-primary">${a}</span>`}\n                        </a>\n                        <nav class="hidden md:flex items-center space-x-6">\n                            <a href="/events" class="text-gray-600 hover:text-primary transition">Evenimente</a>\n                            <a href="/blog" class="text-gray-600 hover:text-primary transition">Blog</a>\n                            ${r.map(e=>`<a href="${e.url}" class="text-gray-600 hover:text-primary transition">${e.title}</a>`).join("")}\n                            <a href="/cart" class="relative text-primary hover:text-gray-900 transition">\n                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 512 512" stroke-width="30">\n                                    <path d="M336.333 416.667v-32.134M336.333 320.267v-32.134M336.333 223.867v-32.134M336.333 127.467V95.333M497 191.733c-35.467 0-64.267 28.799-64.267 64.267s28.8 64.267 64.267 64.267v37.435c0 38.214-20.75 58.965-58.965 58.965H73.965C35.75 416.667 15 395.917 15 357.702v-37.435c35.467 0 64.267-28.799 64.267-64.267S50.467 191.733 15 191.733v-37.435c0-38.214 20.75-58.965 58.965-58.965h364.07c38.215 0 58.965 20.75 58.965 58.965v37.435z" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"/>\n                                </svg>\n                                <span id="cart-badge" class="absolute -top-2 -right-2 bg-primary text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center hidden">0</span>\n                            </a>\n                            <a href="/login" id="account-link" class="btn-primary px-4 py-2 rounded-lg text-sm">Contul meu</a>\n                        </nav>\n                        \x3c!-- Mobile: Cart + Menu buttons --\x3e\n                        <div class="md:hidden flex items-center gap-2">\n                            <a href="/cart" class="relative p-2 text-primary">\n                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 512 512" stroke-width="30">\n                                    <path d="M336.333 416.667v-32.134M336.333 320.267v-32.134M336.333 223.867v-32.134M336.333 127.467V95.333M497 191.733c-35.467 0-64.267 28.799-64.267 64.267s28.8 64.267 64.267 64.267v37.435c0 38.214-20.75 58.965-58.965 58.965H73.965C35.75 416.667 15 395.917 15 357.702v-37.435c35.467 0 64.267-28.799 64.267-64.267S50.467 191.733 15 191.733v-37.435c0-38.214 20.75-58.965 58.965-58.965h364.07c38.215 0 58.965 20.75 58.965 58.965v37.435z" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"/>\n                                </svg>\n                                <span id="cart-badge-mobile" class="absolute -top-1 -right-1 bg-primary text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center hidden">0</span>\n                            </a>\n                            <button class="p-2" id="mobile-menu-btn" aria-label="Open menu">\n                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>\n                                </svg>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </header>\n\n            \x3c!-- Mobile Menu Drawer --\x3e\n            <div id="mobile-menu-overlay" class="fixed inset-0 bg-black/50 z-[60] hidden opacity-0 transition-opacity duration-300"></div>\n            <div id="mobile-menu-drawer" class="fixed top-0 right-0 h-full w-72 bg-white shadow-xl z-[70] transform translate-x-full transition-transform duration-300 ease-out">\n                <div class="flex items-center justify-between p-4 border-b">\n                    <span class="font-semibold text-gray-900">Meniu</span>\n                    <button id="mobile-menu-close" class="p-2 hover:bg-gray-100 rounded-lg" aria-label="Close menu">\n                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>\n                        </svg>\n                    </button>\n                </div>\n                <nav class="p-4 flex flex-col space-y-1">\n                    <a href="/events" class="px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition">Evenimente</a>\n                    <a href="/blog" class="px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition">Blog</a>\n                    ${r.map(e=>`<a href="${e.url}" class="px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition">${e.title}</a>`).join("")}\n                    <div class="border-t my-2"></div>\n                    <a href="/account" class="px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition">Contul meu</a>\n                    <a href="/cart" class="px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition flex items-center justify-between">\n                        <span>Coș</span>\n                        <span id="cart-badge-menu" class="bg-primary text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center hidden">0</span>\n                    </a>\n                </nav>\n            </div>\n        `},renderFooter:e=>{var t,n,s,i,a,r,o;const l=(null==(t=e.site)?void 0:t.title)||"Tixello",d=(new Date).getFullYear(),c=e.social||{},m=((null==(n=e.menus)?void 0:n.footer)||[]).map(e=>`<li><a href="${e.url}" class="text-gray-600 hover:text-primary">${e.title}</a></li>`).join(""),u=[];c.facebook&&u.push(`<a href="${c.facebook}" target="_blank" class="text-gray-400 hover:text-primary" aria-label="Facebook"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg></a>`),c.instagram&&u.push(`<a href="${c.instagram}" target="_blank" class="text-gray-400 hover:text-primary" aria-label="Instagram"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg></a>`),c.twitter&&u.push(`<a href="${c.twitter}" target="_blank" class="text-gray-400 hover:text-primary" aria-label="Twitter"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a>`),c.youtube&&u.push(`<a href="${c.youtube}" target="_blank" class="text-gray-400 hover:text-primary" aria-label="YouTube"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg></a>`),c.tiktok&&u.push(`<a href="${c.tiktok}" target="_blank" class="text-gray-400 hover:text-primary" aria-label="TikTok"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/></svg></a>`),c.linkedin&&u.push(`<a href="${c.linkedin}" target="_blank" class="text-gray-400 hover:text-primary" aria-label="LinkedIn"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg></a>`);const p=u.length>0?`<div class="flex space-x-4 mt-4">${u.join("")}</div>`:"";return`\n            <footer class="bg-gray-50 border-t mt-16">\n                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">\n                    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">\n                        <div class="col-span-1 md:col-span-2">\n                            <h3 class="text-lg font-bold text-gray-900 mb-4">${l}</h3>\n                            <p class="text-gray-600 text-sm mb-4">${(null==(s=e.site)?void 0:s.description)||""}</p>\n                            ${p}\n                        </div>\n                        <div>\n                            <h4 class="font-semibold text-gray-900 mb-4">Linkuri rapide</h4>\n                            <ul class="space-y-2 text-sm">\n                                <li><a href="/events" class="text-gray-600 hover:text-primary">Evenimente</a></li>\n                                <li><a href="/past-events" class="text-gray-600 hover:text-primary">Evenimente trecute</a></li>\n                                <li><a href="/blog" class="text-gray-600 hover:text-primary">Blog</a></li>\n                                <li><a href="/account" class="text-gray-600 hover:text-primary">Contul meu</a></li>\n                            </ul>\n                        </div>\n                        <div>\n                            <h4 class="font-semibold text-gray-900 mb-4">Legal</h4>\n                            <ul class="space-y-2 text-sm">\n                                <li><a href="/terms" class="text-gray-600 hover:text-primary">Termeni și condiții</a></li>\n                                <li><a href="/privacy" class="text-gray-600 hover:text-primary">Politica de confidențialitate</a></li>\n                                ${m}\n                            </ul>\n                        </div>\n                    </div>\n                    <div class="border-t mt-8 pt-8 flex gap-4 items-center justify-between text-sm text-gray-700">\n                        <p>&copy; ${d} ${l}. Toate drepturile rezervate.</p>\n                        <div class="mt-3 flex items-center gap-2 text-gray-700 text-[0.875rem] font-bold">\n                            <span>Powered by</span>\n                            <a href="${(null==(i=e.platform)?void 0:i.url)||"https://tixello.com"}" target="_blank" rel="noopener noreferrer" class="inline-flex items-center">\n                                ${(null==(a=e.platform)?void 0:a.logo_light)?`<img src="${e.platform.logo_light}" alt="${(null==(r=e.platform)?void 0:r.name)||"Tixello"}" class="h-3 w-auto">`:`<span class="text-primary font-semibold hover:underline">${(null==(o=e.platform)?void 0:o.name)||"Tixello"}</span>`}\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </footer>\n        `}};s.registerTemplate("default",i);const a={name:"modern",headerClass:"bg-gray-900 text-white",footerClass:"bg-gray-900 text-white",containerClass:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",heroClass:"text-center py-20 bg-gradient-to-br from-primary to-secondary text-white",heroTitleClass:"text-5xl md:text-6xl font-extrabold mb-6",heroSubtitleClass:"text-xl opacity-90 mb-10 max-w-2xl mx-auto",cardClass:"bg-white rounded-xl shadow-lg overflow-hidden",cardHoverClass:"hover:shadow-2xl hover:-translate-y-1 transition-all duration-300",primaryButtonClass:"inline-flex items-center px-8 py-4 border border-transparent text-base font-bold rounded-full text-white bg-primary hover:bg-primary-dark transition shadow-lg hover:shadow-xl",secondaryButtonClass:"inline-flex items-center px-8 py-4 border-2 border-white text-base font-bold rounded-full text-white hover:bg-white hover:text-gray-900 transition",headingClass:"text-3xl font-extrabold text-gray-900",subheadingClass:"text-lg text-gray-500",renderHeader:e=>{var t,n;const s=null==(t=e.theme)?void 0:t.logo,i=(null==(n=e.site)?void 0:n.title)||"Tixello";return`\n            <header class="bg-gray-900 text-white sticky top-0 z-50">\n                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                    <div class="flex justify-between items-center h-20">\n                        <a href="/" class="flex items-center">\n                            ${s?`<img src="${s}" alt="${i}" class="h-10 w-auto">`:`<span class="text-2xl font-extrabold">${i}</span>`}\n                        </a>\n                        <nav class="hidden md:flex items-center space-x-8">\n                            <a href="/events" class="text-gray-300 hover:text-white transition font-medium">Evenimente</a>\n                            <a href="/blog" class="text-gray-300 hover:text-white transition font-medium">Blog</a>\n                            <a href="/cart" class="text-gray-300 hover:text-white transition">\n                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"/>\n                                </svg>\n                            </a>\n                            <a href="/login" class="btn-primary px-6 py-2.5 rounded-full text-sm font-bold">Contul meu</a>\n                        </nav>\n                        <button class="md:hidden p-2 text-white" id="mobile-menu-btn">\n                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>\n                            </svg>\n                        </button>\n                    </div>\n                </div>\n            </header>\n        `},renderFooter:e=>{var t,n,s,i,a,r,o;const l=(null==(t=e.site)?void 0:t.title)||"Tixello",d=(new Date).getFullYear(),c=e.social||{},m=[];c.facebook&&m.push(`<a href="${c.facebook}" target="_blank" class="text-gray-400 hover:text-white transition" aria-label="Facebook"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg></a>`),c.instagram&&m.push(`<a href="${c.instagram}" target="_blank" class="text-gray-400 hover:text-white transition" aria-label="Instagram"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg></a>`),c.twitter&&m.push(`<a href="${c.twitter}" target="_blank" class="text-gray-400 hover:text-white transition" aria-label="Twitter"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a>`),c.youtube&&m.push(`<a href="${c.youtube}" target="_blank" class="text-gray-400 hover:text-white transition" aria-label="YouTube"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg></a>`),c.tiktok&&m.push(`<a href="${c.tiktok}" target="_blank" class="text-gray-400 hover:text-white transition" aria-label="TikTok"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/></svg></a>`),c.linkedin&&m.push(`<a href="${c.linkedin}" target="_blank" class="text-gray-400 hover:text-white transition" aria-label="LinkedIn"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg></a>`);const u=m.length>0?`<div class="flex space-x-4 mt-6">${m.join("")}</div>`:"";return`\n            <footer class="bg-gray-900 text-white mt-20">\n                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">\n                    <div class="grid grid-cols-1 md:grid-cols-4 gap-12">\n                        <div class="col-span-1 md:col-span-2">\n                            <h3 class="text-2xl font-extrabold mb-4">${l}</h3>\n                            <p class="text-gray-400 mb-6">${(null==(n=e.site)?void 0:n.description)||""}</p>\n                            ${(null==(s=e.site)?void 0:s.tagline)?`<p class="text-primary font-medium">${e.site.tagline}</p>`:""}\n                            ${u}\n                        </div>\n                        <div>\n                            <h4 class="font-bold text-lg mb-6">Navigare</h4>\n                            <ul class="space-y-3">\n                                <li><a href="/events" class="text-gray-400 hover:text-white transition">Evenimente</a></li>\n                                <li><a href="/past-events" class="text-gray-400 hover:text-white transition">Evenimente trecute</a></li>\n                                <li><a href="/blog" class="text-gray-400 hover:text-white transition">Blog</a></li>\n                                <li><a href="/account" class="text-gray-400 hover:text-white transition">Contul meu</a></li>\n                            </ul>\n                        </div>\n                        <div>\n                            <h4 class="font-bold text-lg mb-6">Legal</h4>\n                            <ul class="space-y-3">\n                                <li><a href="/terms" class="text-gray-400 hover:text-white transition">Termeni</a></li>\n                                <li><a href="/privacy" class="text-gray-400 hover:text-white transition">Confidențialitate</a></li>\n                            </ul>\n                        </div>\n                    </div>\n                    <div class="border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center text-sm text-gray-500">\n                        <p>&copy; ${d} ${l}</p>\n                        <div class="mt-4 md:mt-0 flex items-center gap-2">\n                            <span>Powered by</span>\n                            <a href="${(null==(i=e.platform)?void 0:i.url)||"https://tixello.com"}" target="_blank" rel="noopener noreferrer" class="inline-flex items-center">\n                                ${(null==(a=e.platform)?void 0:a.logo_dark)?`<img src="${e.platform.logo_dark}" alt="${(null==(r=e.platform)?void 0:r.name)||"Tixello"}" class="h-5 w-auto">`:`<span class="text-primary font-semibold hover:underline">${(null==(o=e.platform)?void 0:o.name)||"Tixello"}</span>`}\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </footer>\n        `}};s.registerTemplate("modern",a);class r{constructor(n){__publicField(this,"config"),__publicField(this,"apiClient"),__publicField(this,"authManager"),__publicField(this,"router"),__publicField(this,"eventBus"),__publicField(this,"moduleLoader"),__publicField(this,"mountPoint",null),this.config=n.config,this.apiClient=n.apiClient,this.authManager=n.authManager,this.router=n.router,this.eventBus=new e,this.moduleLoader=new t(this.config.modules)}async mount(e){this.mountPoint=e,await this.moduleLoader.loadAll(),this.setMetaTags(),this.render(),this.router.init(),await this.authManager.checkAuth(),this.eventBus.emit("app:ready")}setMetaTags(){var e,t,n,s;const i=(null==(e=this.config.site)?void 0:e.title)||"Tixello",a=null==(t=this.config.site)?void 0:t.tagline;document.title=a?`${i} - ${a}`:i;const r=(null==(n=this.config.site)?void 0:n.description)||`Events and tickets by ${i}`;let o=document.querySelector('meta[name="description"]');o?o.setAttribute("content",r):(o=document.createElement("meta"),o.setAttribute("name","description"),o.setAttribute("content",r),document.head.appendChild(o)),this.setMetaTag("og:title",i),this.setMetaTag("og:description",r),this.setMetaTag("og:type","website"),(null==(s=this.config.theme)?void 0:s.logo)&&this.setMetaTag("og:image",this.config.theme.logo)}setMetaTag(e,t){let n=document.querySelector(`meta[property="${e}"]`);n?n.setAttribute("content",t):(n=document.createElement("meta"),n.setAttribute("property",e),n.setAttribute("content",t),document.head.appendChild(n))}render(){if(!this.mountPoint)return;const e=s.renderHeader(),t=s.renderFooter();this.mountPoint.innerHTML=`\n            <div class="min-h-screen flex flex-col bg-gray-50">\n                ${e}\n                <main class="flex-1" id="tixello-content"></main>\n                ${t}\n            </div>\n        `,this.injectStyles(),this.setupMobileMenu()}setupMobileMenu(){const e=document.getElementById("mobile-menu-btn"),t=document.getElementById("mobile-menu-close"),n=document.getElementById("mobile-menu-overlay"),s=document.getElementById("mobile-menu-drawer");if(!e||!s||!n)return;const i=()=>{n.classList.add("opacity-0"),s.classList.add("translate-x-full"),setTimeout(()=>{n.classList.add("hidden")},300),document.body.style.overflow=""};e.addEventListener("click",()=>{n.classList.remove("hidden"),requestAnimationFrame(()=>{n.classList.remove("opacity-0"),s.classList.remove("translate-x-full")}),document.body.style.overflow="hidden"}),t&&t.addEventListener("click",i),n.addEventListener("click",i),s.querySelectorAll("a").forEach(e=>{e.addEventListener("click",i)})}injectStyles(){const e=document.createElement("script");e.src="https://cdn.tailwindcss.com",document.head.appendChild(e);const t=document.createElement("style");t.textContent=this.getBaseStyles(),document.head.appendChild(t)}getBaseStyles(){return`\n            body {\n                font-family: ${this.config.theme.fontFamily}, system-ui, sans-serif;\n            }\n            .animate-pulse {\n                animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n            }\n            @keyframes pulse {\n                0%, 100% { opacity: 1; }\n                50% { opacity: .5; }\n            }\n        `}getConfig(){return this.config}getApiClient(){return this.apiClient}getAuthManager(){return this.authManager}getRouter(){return this.router}on(e,t){this.eventBus.on(e,t)}off(e,t){this.eventBus.off(e,t)}emit(e,t){this.eventBus.emit(e,t)}navigate(e){this.router.navigate(e)}}class o{static async init(e){try{const t=await this.decrypt(e),n=JSON.parse(t);this.config={...n,site:n.site||{title:"",description:"",tagline:"",language:"en",template:"default"},social:n.social||{facebook:null,instagram:null,twitter:null,youtube:null,tiktok:null,linkedin:null},menus:n.menus||{header:[],footer:[]},platform:n.platform||{name:"Tixello",url:"https://tixello.com",logo_light:null,logo_dark:null}};try{const e=`${this.config.apiEndpoint}/config?hostname=${encodeURIComponent(this.config.domain)}`,t=await fetch(e);if(t.ok){const e=await t.json();e.theme&&(this.config.theme={...this.config.theme,...e.theme}),e.modules&&(this.config.modules=e.modules),e.site&&(this.config.site={...this.config.site,...e.site}),e.social&&(this.config.social={...this.config.social,...e.social}),e.menus&&(this.config.menus=e.menus),e.platform&&(this.config.platform={...this.config.platform,...e.platform})}}catch{}return this.applyTheme(this.config.theme),this.config}catch(t){throw new Error("Failed to initialize configuration")}}static async initFromAttributes(e){this.config={tenantId:e.tenantId,domainId:e.domainId,domain:e.domain,apiEndpoint:e.apiEndpoint,modules:["core","events","auth","cart","checkout"],theme:{primaryColor:"#3B82F6",secondaryColor:"#1E40AF",logo:null,favicon:null,fontFamily:"Inter"},site:{title:"",description:"",tagline:"",language:"en",template:"default"},social:{facebook:null,instagram:null,twitter:null,youtube:null,tiktok:null,linkedin:null},menus:{header:[],footer:[]},platform:{name:"Tixello",url:"https://tixello.com",logo_light:null,logo_dark:null},version:"1.2.0",packageHash:""};try{const t=await fetch(`${e.apiEndpoint}/config?tenant=${e.tenantId}&domain=${e.domainId}`);if(t.ok){const e=await t.json();e.theme&&(this.config.theme={...this.config.theme,...e.theme}),e.modules&&(this.config.modules=e.modules),e.site&&(this.config.site={...this.config.site,...e.site}),e.social&&(this.config.social={...this.config.social,...e.social}),e.menus&&(this.config.menus=e.menus),e.platform&&(this.config.platform={...this.config.platform,...e.platform})}}catch{}return this.applyTheme(this.config.theme),this.config}static async initFromHostname(e){this.config={tenantId:0,domainId:0,domain:e.hostname,apiEndpoint:e.apiEndpoint,modules:["core","events","auth","cart","checkout"],theme:{primaryColor:"#3B82F6",secondaryColor:"#1E40AF",logo:null,favicon:null,fontFamily:"Inter"},site:{title:"",description:"",tagline:"",language:"en",template:"default"},social:{facebook:null,instagram:null,twitter:null,youtube:null,tiktok:null,linkedin:null},menus:{header:[],footer:[]},platform:{name:"Tixello",url:"https://tixello.com",logo_light:null,logo_dark:null},version:"1.1.0",packageHash:""};try{const t=await fetch(`${e.apiEndpoint}/config?hostname=${encodeURIComponent(e.hostname)}`);if(!t.ok)throw new Error("Failed to load tenant configuration");{const e=await t.json();e.theme&&(this.config.theme={...this.config.theme,...e.theme}),e.modules&&(this.config.modules=e.modules),e.site&&(this.config.site={...this.config.site,...e.site}),e.social&&(this.config.social={...this.config.social,...e.social}),e.menus&&(this.config.menus=e.menus),e.platform&&(this.config.platform={...this.config.platform,...e.platform}),e.tenant&&(this.config.tenantId=e.tenant.id)}}catch(t){throw new Error("Failed to initialize configuration from hostname")}return this.applyTheme(this.config.theme),this.config}static async decrypt(e){try{return atob(e)}catch{return e}}static applyTheme(e){const t=document.documentElement;t.style.setProperty("--tixello-primary",e.primaryColor),t.style.setProperty("--tixello-secondary",e.secondaryColor),t.style.setProperty("--tixello-font",e.fontFamily);const n=this.darkenColor(e.primaryColor,15),s=this.darkenColor(e.secondaryColor,15);if(t.style.setProperty("--tixello-primary-dark",n),t.style.setProperty("--tixello-secondary-dark",s),e.colors&&(t.style.setProperty("--theme-primary",e.colors.primary),t.style.setProperty("--theme-primary-hover",e.colors.primaryHover),t.style.setProperty("--theme-secondary",e.colors.secondary),t.style.setProperty("--theme-secondary-hover",e.colors.secondaryHover),t.style.setProperty("--theme-accent",e.colors.accent),t.style.setProperty("--theme-background",e.colors.background),t.style.setProperty("--theme-surface",e.colors.surface),t.style.setProperty("--theme-text",e.colors.text),t.style.setProperty("--theme-text-muted",e.colors.textMuted),t.style.setProperty("--theme-border",e.colors.border),t.style.setProperty("--theme-success",e.colors.success),t.style.setProperty("--theme-warning",e.colors.warning),t.style.setProperty("--theme-error",e.colors.error)),e.typography&&(t.style.setProperty("--theme-font-family",e.typography.fontFamily),t.style.setProperty("--theme-heading-font",e.typography.headingFont),t.style.setProperty("--theme-font-size-base",e.typography.baseFontSize),t.style.setProperty("--theme-heading-weight",e.typography.headingWeight),t.style.setProperty("--theme-body-weight",e.typography.bodyWeight),t.style.setProperty("--theme-line-height",e.typography.lineHeight)),e.spacing&&(t.style.setProperty("--theme-container-width",e.spacing.containerWidth),t.style.setProperty("--theme-section-padding",e.spacing.sectionPadding),t.style.setProperty("--theme-card-padding",e.spacing.cardPadding),t.style.setProperty("--theme-grid-gap",e.spacing.gridGap)),e.borders&&(t.style.setProperty("--theme-border-radius",e.borders.radius),t.style.setProperty("--theme-border-radius-lg",e.borders.radiusLg),t.style.setProperty("--theme-border-width",e.borders.width)),e.shadows&&(t.style.setProperty("--theme-shadow-card",e.shadows.card),t.style.setProperty("--theme-shadow-card-hover",e.shadows.cardHover),t.style.setProperty("--theme-shadow-button",e.shadows.button),t.style.setProperty("--theme-shadow-dropdown",e.shadows.dropdown)),e.header&&(t.style.setProperty("--theme-header-bg",e.header.background),t.style.setProperty("--theme-header-text",e.header.textColor),t.style.setProperty("--theme-header-height",e.header.height),t.style.setProperty("--theme-logo-max-height",e.header.logoMaxHeight)),e.buttons&&(t.style.setProperty("--theme-btn-primary-bg",e.buttons.primaryBg),t.style.setProperty("--theme-btn-primary-text",e.buttons.primaryText),t.style.setProperty("--theme-btn-primary-hover",e.buttons.primaryHoverBg),t.style.setProperty("--theme-btn-secondary-bg",e.buttons.secondaryBg),t.style.setProperty("--theme-btn-secondary-text",e.buttons.secondaryText),t.style.setProperty("--theme-btn-secondary-hover",e.buttons.secondaryHoverBg),t.style.setProperty("--theme-btn-radius",e.buttons.borderRadius),t.style.setProperty("--theme-btn-padding-x",e.buttons.paddingX),t.style.setProperty("--theme-btn-padding-y",e.buttons.paddingY)),this.injectThemeStyles(e),e.favicon){const t=document.querySelector('link[rel="icon"]');if(t)t.href=e.favicon;else{const t=document.createElement("link");t.rel="icon",t.href=e.favicon,document.head.appendChild(t)}}}static darkenColor(e,t){const n=e.replace("#",""),s=parseInt(n.substring(0,2),16),i=parseInt(n.substring(2,4),16),a=parseInt(n.substring(4,6),16),r=e=>Math.max(0,Math.floor(e*(1-t/100)));return`#${r(s).toString(16).padStart(2,"0")}${r(i).toString(16).padStart(2,"0")}${r(a).toString(16).padStart(2,"0")}`}static injectThemeStyles(e){const t=document.getElementById("tixello-theme-styles");t&&t.remove();const n=document.createElement("style");n.id="tixello-theme-styles",n.textContent="\n            /* Primary color utilities */\n            .bg-primary { background-color: var(--tixello-primary) !important; }\n            .bg-primary-dark { background-color: var(--tixello-primary-dark) !important; }\n            .text-primary { color: var(--tixello-primary) !important; }\n            .border-primary { border-color: var(--tixello-primary) !important; }\n\n            /* Secondary color utilities */\n            .bg-secondary { background-color: var(--tixello-secondary) !important; }\n            .bg-secondary-dark { background-color: var(--tixello-secondary-dark) !important; }\n            .text-secondary { color: var(--tixello-secondary) !important; }\n            .border-secondary { border-color: var(--tixello-secondary) !important; }\n\n            /* Gradient utilities */\n            .from-primary { --tw-gradient-from: var(--tixello-primary); }\n            .to-secondary { --tw-gradient-to: var(--tixello-secondary); }\n\n            /* Button styles */\n            .btn-primary {\n                background-color: var(--tixello-primary);\n                color: white;\n                transition: background-color 0.2s;\n            }\n            .btn-primary:hover {\n                background-color: var(--tixello-primary-dark);\n            }\n\n            .btn-secondary {\n                background-color: var(--tixello-secondary);\n                color: white;\n                transition: background-color 0.2s;\n            }\n            .btn-secondary:hover {\n                background-color: var(--tixello-secondary-dark);\n            }\n\n            /* Hover utilities */\n            .hover\\:text-primary:hover { color: var(--tixello-primary) !important; }\n            .hover\\:bg-primary:hover { background-color: var(--tixello-primary) !important; }\n            .hover\\:bg-primary-dark:hover { background-color: var(--tixello-primary-dark) !important; }\n\n            /* Font family */\n            body {\n                font-family: var(--tixello-font), system-ui, sans-serif;\n            }\n\n            /* Ring color for focus states */\n            .focus\\:ring-primary:focus {\n                --tw-ring-color: var(--tixello-primary);\n            }\n\n            /* Tixello component styles */\n            .tixello-card {\n                background: white;\n                border-radius: 0.75rem;\n                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n                overflow: hidden;\n                transition: box-shadow 0.2s, transform 0.2s;\n            }\n            .tixello-card:hover {\n                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n            }\n            .tixello-btn {\n                display: inline-flex;\n                align-items: center;\n                justify-content: center;\n                padding: 0.75rem 1.5rem;\n                background: var(--tixello-primary);\n                color: white;\n                font-weight: 600;\n                border-radius: 0.5rem;\n                border: none;\n                cursor: pointer;\n                transition: background-color 0.2s;\n            }\n            .tixello-btn:hover {\n                background: var(--tixello-primary-dark);\n            }\n            .tixello-btn:disabled {\n                background: #d1d5db;\n                cursor: not-allowed;\n            }\n\n            /* Mobile-responsive adjustments */\n            @media (max-width: 767px) {\n                /* Reduce container padding */\n                .max-w-7xl {\n                    padding-left: 1rem !important;\n                    padding-right: 1rem !important;\n                }\n\n                /* Smaller hero section */\n                .text-4xl {\n                    font-size: 1.75rem !important;\n                }\n                .text-5xl {\n                    font-size: 2rem !important;\n                }\n                .text-2xl {\n                    font-size: 1.25rem !important;\n                }\n                .text-xl {\n                    font-size: 1rem !important;\n                }\n\n                /* Reduce section padding */\n                .py-16 {\n                    padding-top: 2rem !important;\n                    padding-bottom: 2rem !important;\n                }\n                .py-12 {\n                    padding-top: 1.5rem !important;\n                    padding-bottom: 1.5rem !important;\n                }\n                .mt-16 {\n                    margin-top: 2rem !important;\n                }\n\n                /* Smaller buttons on mobile */\n                .tixello-btn {\n                    padding: 0.625rem 1.25rem;\n                    font-size: 0.875rem;\n                }\n\n                /* Event card adjustments */\n                .event-card img {\n                    height: 160px !important;\n                }\n                .event-card h3 {\n                    font-size: 1.1rem !important;\n                }\n\n                /* Reduce grid gap */\n                .events-grid {\n                    gap: 1rem !important;\n                }\n\n                /* Footer adjustments */\n                footer .grid {\n                    gap: 1.5rem !important;\n                }\n            }\n\n            /* Small mobile devices */\n            @media (max-width: 374px) {\n                .text-4xl, .text-5xl {\n                    font-size: 1.5rem !important;\n                }\n                .tixello-btn {\n                    padding: 0.5rem 1rem;\n                    font-size: 0.8125rem;\n                }\n            }\n        ",document.head.appendChild(n)}static get(){if(!this.config)throw new Error("Configuration not initialized");return this.config}static getApiEndpoint(){return this.get().apiEndpoint}static hasModule(e){return this.get().modules.includes(e)}static updateTheme(e){this.config&&(this.config.theme=this.deepMerge(this.config.theme,e),this.applyTheme(this.config.theme))}static deepMerge(e,t){const n={...e};for(const s in t)t[s]&&"object"==typeof t[s]&&!Array.isArray(t[s])?n[s]=this.deepMerge(e[s]||{},t[s]):n[s]=t[s];return n}static getTheme(){return this.get().theme}}__publicField(o,"config",null);class l{constructor(e){__publicField(this,"config"),__publicField(this,"accessToken",null),this.config=e}setAccessToken(e){this.accessToken=e}async request(e,t={}){const{method:n="GET",body:s,headers:i={},withAuth:a=!0}=t,r=`${this.config.apiEndpoint}${e}`,o=Date.now(),l=this.generateNonce(),d={"Content-Type":"application/json","X-Tenant-ID":String(this.config.tenantId),"X-Domain-ID":String(this.config.domainId),"X-Package-Hash":this.config.packageHash,"X-Timestamp":String(o),"X-Nonce":l,...i};a&&this.accessToken&&(d.Authorization=`Bearer ${this.accessToken}`);const c=await this.signRequest(n,e,s,o,l);d["X-Signature"]=c;try{const e=await fetch(r,{method:n,headers:d,body:s?JSON.stringify(s):void 0,credentials:"include"}),t=await e.json();return e.ok?{success:!0,data:t.data||t}:{success:!1,message:t.message||"Request failed",errors:t.errors}}catch(m){return{success:!1,message:m instanceof Error?m.message:"Network error"}}}generateNonce(){return Array.from(crypto.getRandomValues(new Uint8Array(16))).map(e=>e.toString(16).padStart(2,"0")).join("")}async signRequest(e,t,n,s,i){const a=[e,t,n?JSON.stringify(n):"",s,i,this.config.packageHash].join("|"),r=(new TextEncoder).encode(a),o=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(o)).map(e=>e.toString(16).padStart(2,"0")).join("")}async get(e,t){return this.request(e,{...t,method:"GET"})}async post(e,t,n){return this.request(e,{...n,method:"POST",body:t})}async put(e,t,n){return this.request(e,{...n,method:"PUT",body:t})}async delete(e,t){return this.request(e,{...t,method:"DELETE"})}}class d{static init(e){var t;this.config=e,this.currentLanguage=(null==(t=e.site)?void 0:t.language)||"en",this.registerDefaultRenderers()}static setLanguage(e){this.currentLanguage=e}static registerRenderer(e,t){this.renderers.set(e,t)}static renderBlock(e){const t=this.renderers.get(e.type);if(!t)return`\x3c!-- Unknown block type: ${e.type} --\x3e`;try{return t(e,this.config)}catch(n){return`\x3c!-- Error rendering block: ${e.type} --\x3e`}}static renderLayout(e){return(null==e?void 0:e.blocks)&&Array.isArray(e.blocks)?e.blocks.map(e=>this.renderBlock(e)).join("\n"):""}static getContent(e,t,n=""){var s,i;const a=null==(s=e.content)?void 0:s[this.currentLanguage];if(a&&void 0!==a[t])return a[t];const r=null==(i=e.content)?void 0:i.en;return r&&void 0!==r[t]?r[t]:n}static getContentArray(e,t,n=[]){var s,i;const a=null==(s=e.content)?void 0:s[this.currentLanguage];if(a&&Array.isArray(a[t]))return a[t];const r=null==(i=e.content)?void 0:i.en;return r&&Array.isArray(r[t])?r[t]:n}static registerDefaultRenderers(){this.registerRenderer("hero",e=>{const t=this.getContent(e,"title","Welcome"),n=this.getContent(e,"subtitle",""),s=this.getContent(e,"buttonText","Get Started"),i=e.settings.buttonLink||"/events",a=e.settings.backgroundImage||"",r=e.settings.overlayOpacity??50,o=e.settings.height||"large",l=e.settings.alignment||"center";return`\n                <section class="relative ${{small:"min-h-[300px]",medium:"min-h-[450px]",large:"min-h-[600px]",full:"min-h-screen"}[o]||"min-h-[450px]"} flex items-center justify-center" style="${a?`background-image: url('${a}'); background-size: cover; background-position: center;`:"background: linear-gradient(135deg, var(--tixello-primary), var(--tixello-secondary));"}">\n                    <div class="absolute inset-0 bg-black" style="opacity: ${r/100}"></div>\n                    <div class="relative z-10 max-w-4xl mx-auto px-4 flex flex-col ${{left:"text-left items-start",center:"text-center items-center",right:"text-right items-end"}[l]||"text-center items-center"}">\n                        <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-4">${this.escapeHtml(t)}</h1>\n                        ${n?`<p class="text-xl md:text-2xl text-white/90 mb-8 max-w-2xl">${this.escapeHtml(n)}</p>`:""}\n                        ${s?`\n                            <a href="${i}" class="inline-flex items-center px-8 py-4 bg-white text-gray-900 font-semibold rounded-lg hover:bg-gray-100 transition">\n                                ${this.escapeHtml(s)}\n                                <svg class="ml-2 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>\n                                </svg>\n                            </a>\n                        `:""}\n                    </div>\n                </section>\n            `}),this.registerRenderer("event-grid",e=>{const t=this.getContent(e,"title","Upcoming Events"),n=this.getContent(e,"subtitle",""),s=e.settings.columns||3,i=e.settings.limit||6,a=e.settings.showFilters??!0,r=e.settings.source||"upcoming";return`\n                <section class="py-16 bg-gray-50">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        <div class="text-center mb-12">\n                            <h2 class="text-3xl font-bold text-gray-900 mb-4">${this.escapeHtml(t)}</h2>\n                            ${n?`<p class="text-lg text-gray-600 max-w-2xl mx-auto">${this.escapeHtml(n)}</p>`:""}\n                        </div>\n                        ${a?'\n                            <div class="flex flex-wrap gap-4 justify-center mb-8">\n                                <button class="px-4 py-2 bg-primary text-white rounded-full text-sm font-medium">All Events</button>\n                                <button class="px-4 py-2 bg-white text-gray-700 rounded-full text-sm font-medium hover:bg-gray-100">Concerts</button>\n                                <button class="px-4 py-2 bg-white text-gray-700 rounded-full text-sm font-medium hover:bg-gray-100">Theater</button>\n                                <button class="px-4 py-2 bg-white text-gray-700 rounded-full text-sm font-medium hover:bg-gray-100">Sports</button>\n                            </div>\n                        ':""}\n                        <div id="event-grid-${e.id}" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-${s} gap-6" data-source="${r}" data-limit="${i}">\n                            <div class="animate-pulse bg-gray-200 rounded-lg h-64"></div>\n                            <div class="animate-pulse bg-gray-200 rounded-lg h-64"></div>\n                            <div class="animate-pulse bg-gray-200 rounded-lg h-64"></div>\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("featured-event",e=>{const t=this.getContent(e,"title","Featured Event"),n=e.settings.eventId,s="vertical"===(e.settings.layout||"horizontal")?"flex-col":"flex-col lg:flex-row";return`\n                <section class="py-16">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        <h2 class="text-3xl font-bold text-gray-900 mb-8">${this.escapeHtml(t)}</h2>\n                        <div id="featured-event-${e.id}" class="flex ${s} gap-8 bg-white rounded-2xl shadow-lg overflow-hidden" data-event-id="${n||""}">\n                            <div class="animate-pulse bg-gray-200 h-64 lg:h-auto lg:w-1/2"></div>\n                            <div class="p-8 flex-1 space-y-4">\n                                <div class="animate-pulse bg-gray-200 h-8 w-3/4 rounded"></div>\n                                <div class="animate-pulse bg-gray-200 h-4 w-1/2 rounded"></div>\n                                <div class="animate-pulse bg-gray-200 h-20 rounded"></div>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("category-nav",e=>{const t=this.getContent(e,"title","Browse by Category"),n=e.settings.style||"cards",s=e.settings.showCount??!0;return`\n                <section class="py-16">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        <h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">${this.escapeHtml(t)}</h2>\n                        <div id="category-nav-${e.id}" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4" data-style="${n}" data-show-count="${s}">\n                            ${[1,2,3,4,5,6].map(()=>'\n                                <div class="animate-pulse bg-gray-200 rounded-lg h-32"></div>\n                            ').join("")}\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("text-content",e=>{const t=this.getContent(e,"title",""),n=this.getContent(e,"content",""),s=e.settings.alignment||"left";return`\n                <section class="py-16">\n                    <div class="${{narrow:"max-w-2xl",medium:"max-w-4xl",wide:"max-w-6xl",full:"max-w-7xl"}[e.settings.maxWidth||"full"]||"max-w-7xl"} ${{left:"text-left",center:"text-center mx-auto",right:"text-right ml-auto"}[s]||"text-left"} px-4 sm:px-6 lg:px-8">\n                        ${t?`<h2 class="text-3xl font-bold text-gray-900 mb-6">${this.escapeHtml(t)}</h2>`:""}\n                        <div class="prose prose-lg max-w-none">\n                            ${n}\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("text-image",e=>{const t=this.getContent(e,"title",""),n=this.getContent(e,"content",""),s=e.settings.imageUrl||"",i=e.settings.imagePosition||"right",a=this.getContent(e,"imageAlt","");return`\n                <section class="py-16">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        <div class="flex flex-col ${"left"===i?"lg:flex-row-reverse":"lg:flex-row"} gap-12 items-center">\n                            <div class="flex-1">\n                                ${t?`<h2 class="text-3xl font-bold text-gray-900 mb-6">${this.escapeHtml(t)}</h2>`:""}\n                                <div class="prose prose-lg">\n                                    ${n}\n                                </div>\n                            </div>\n                            <div class="flex-1">\n                                ${s?`\n                                    <img src="${s}" alt="${this.escapeHtml(a)}" class="rounded-2xl shadow-lg w-full">\n                                `:'\n                                    <div class="bg-gray-200 rounded-2xl aspect-video flex items-center justify-center">\n                                        <span class="text-gray-400">Image placeholder</span>\n                                    </div>\n                                '}\n                            </div>\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("cta-banner",e=>{const t=this.getContent(e,"title","Ready to get started?"),n=this.getContent(e,"subtitle",""),s=this.getContent(e,"buttonText","Get Started"),i=e.settings.buttonLink||"/events",a=e.settings.backgroundColor||"primary";e.settings.style;return`\n                <section class="py-16">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        <div class="${"primary"===a?"bg-primary":"secondary"===a?"bg-secondary":"bg-gradient-to-r from-primary to-secondary"} rounded-2xl p-12 text-center text-white">\n                            <h2 class="text-3xl md:text-4xl font-bold mb-4">${this.escapeHtml(t)}</h2>\n                            ${n?`<p class="text-xl text-white/90 mb-8 max-w-2xl mx-auto">${this.escapeHtml(n)}</p>`:""}\n                            <a href="${i}" class="inline-flex items-center px-8 py-4 bg-white text-gray-900 font-semibold rounded-lg hover:bg-gray-100 transition">\n                                ${this.escapeHtml(s)}\n                            </a>\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("newsletter",e=>{const t=this.getContent(e,"title","Stay Updated"),n=this.getContent(e,"subtitle","Subscribe to our newsletter"),s=this.getContent(e,"buttonText","Subscribe"),i=this.getContent(e,"placeholderText","Enter your email");return e.settings.style,`\n                <section class="py-16 bg-gray-50">\n                    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 text-center">\n                        <h2 class="text-3xl font-bold text-gray-900 mb-4">${this.escapeHtml(t)}</h2>\n                        <p class="text-lg text-gray-600 mb-8">${this.escapeHtml(n)}</p>\n                        <form class="flex flex-col sm:flex-row gap-4 justify-center" id="newsletter-form-${e.id}">\n                            <input type="email" placeholder="${this.escapeHtml(i)}"\n                                class="flex-1 max-w-md px-6 py-4 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary focus:border-transparent" required>\n                            <button type="submit" class="px-8 py-4 bg-primary text-white font-semibold rounded-lg hover:bg-primary-dark transition">\n                                ${this.escapeHtml(s)}\n                            </button>\n                        </form>\n                    </div>\n                </section>\n            `}),this.registerRenderer("testimonials",e=>{const t=this.getContent(e,"title","What People Say"),n=e.settings.testimonials||[];e.settings.style;const s=e.settings.columns||3,i=n.length>0?n.map(e=>{var t;return`\n                    <div class="bg-white p-6 rounded-xl shadow-md">\n                        <div class="flex items-center mb-4">\n                            ${e.avatar?`<img src="${e.avatar}" alt="${this.escapeHtml(e.name)}" class="w-12 h-12 rounded-full mr-4">`:`\n                                <div class="w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center font-bold mr-4">\n                                    ${(null==(t=e.name)?void 0:t.charAt(0))||"?"}\n                                </div>\n                            `}\n                            <div>\n                                <div class="font-semibold text-gray-900">${this.escapeHtml(e.name||"Anonymous")}</div>\n                                ${e.role?`<div class="text-sm text-gray-500">${this.escapeHtml(e.role)}</div>`:""}\n                            </div>\n                        </div>\n                        <p class="text-gray-600 italic">"${this.escapeHtml(e.quote||"")}"</p>\n                    </div>\n                `}).join(""):'<p class="text-gray-500 col-span-full text-center">No testimonials configured</p>';return`\n                <section class="py-16 bg-gray-50">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        <h2 class="text-3xl font-bold text-gray-900 mb-12 text-center">${this.escapeHtml(t)}</h2>\n                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-${s} gap-6">\n                            ${i}\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("partners",e=>{const t=this.getContent(e,"title","Our Partners"),n=e.settings.partners||[];e.settings.style;const s=e.settings.grayscale??!0,i=n.length>0?n.map(e=>`\n                    <a href="${e.url||"#"}" target="_blank" rel="noopener" class="flex items-center justify-center p-4 ${s?"grayscale hover:grayscale-0":""} transition">\n                        ${e.logo?`<img src="${e.logo}" alt="${this.escapeHtml(e.name||"")}" class="max-h-12">`:`\n                            <span class="text-gray-500">${this.escapeHtml(e.name||"Partner")}</span>\n                        `}\n                    </a>\n                `).join(""):'<p class="text-gray-500 col-span-full text-center">No partners configured</p>';return`\n                <section class="py-16">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        ${t?`<h2 class="text-2xl font-bold text-gray-900 mb-8 text-center">${this.escapeHtml(t)}</h2>`:""}\n                        <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-8 items-center">\n                            ${i}\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("spacer",e=>{const t=e.settings.height||"medium",n=e.settings.showDivider??!1;return`\n                <div class="relative" style="height: ${{small:"32px",medium:"64px",large:"96px",xlarge:"128px"}[t]||"64px"}">\n                    ${n?'\n                        <div class="absolute inset-x-0 top-1/2 transform -translate-y-1/2">\n                            <div class="max-w-7xl mx-auto px-4">\n                                <div class="border-t border-gray-200"></div>\n                            </div>\n                        </div>\n                    ':""}\n                </div>\n            `}),this.registerRenderer("divider",e=>{const t=e.settings.style||"solid",n=e.settings.width||"full",s=e.settings.color||"gray-200";return`\n                <div class="py-8">\n                    <div class="${{small:"max-w-xs",medium:"max-w-md",large:"max-w-2xl",full:"max-w-7xl"}[n]||"max-w-7xl"} mx-auto px-4">\n                        <div class="border-t ${{solid:"border-solid",dashed:"border-dashed",dotted:"border-dotted"}[t]||"border-solid"} border-${s}"></div>\n                    </div>\n                </div>\n            `}),this.registerRenderer("custom-html",e=>{const t=this.getContent(e,"html",""),n=e.settings.containerClass||"",s=e.settings.fullWidth??!1;return t?s?`<div class="${n}">${t}</div>`:`<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 ${n}">${t}</div>`:"\x3c!-- Empty custom HTML block --\x3e"}),this.registerRenderer("countdown",e=>{const t=this.getContent(e,"title",""),n=this.getContent(e,"subtitle",""),s=this.getContent(e,"expiredMessage","Event has started!"),i=e.settings.style||"flip",a=e.settings.targetDate||"",r=e.settings.showLabels??!0,o=e.settings.alignment||"center",l={flip:"countdown-flip",simple:"countdown-simple",circles:"countdown-circles"}[i]||"countdown-simple";return`\n                <section class="py-16">\n                    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 ${{left:"text-left",center:"text-center",right:"text-right"}[o]||"text-center"}">\n                        ${t?`<h2 class="text-3xl font-bold text-gray-900 mb-4">${this.escapeHtml(t)}</h2>`:""}\n                        ${n?`<p class="text-lg text-gray-600 mb-8">${this.escapeHtml(n)}</p>`:""}\n                        <div id="countdown-${e.id}" class="countdown ${l} flex justify-center gap-4"\n                             data-target="${a}" data-expired-message="${this.escapeHtml(s)}">\n                            <div class="countdown-item">\n                                <span class="countdown-value text-4xl md:text-6xl font-bold text-primary" data-days>00</span>\n                                ${r?'<span class="countdown-label text-sm text-gray-500">Days</span>':""}\n                            </div>\n                            <div class="countdown-item">\n                                <span class="countdown-value text-4xl md:text-6xl font-bold text-primary" data-hours>00</span>\n                                ${r?'<span class="countdown-label text-sm text-gray-500">Hours</span>':""}\n                            </div>\n                            <div class="countdown-item">\n                                <span class="countdown-value text-4xl md:text-6xl font-bold text-primary" data-minutes>00</span>\n                                ${r?'<span class="countdown-label text-sm text-gray-500">Minutes</span>':""}\n                            </div>\n                            <div class="countdown-item">\n                                <span class="countdown-value text-4xl md:text-6xl font-bold text-primary" data-seconds>00</span>\n                                ${r?'<span class="countdown-label text-sm text-gray-500">Seconds</span>':""}\n                            </div>\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("event-list",e=>{const t=this.getContent(e,"title","Upcoming Events"),n=this.getContent(e,"emptyMessage","No events found"),s=e.settings.style||"default",i=e.settings.limit||5,a=e.settings.source||"upcoming",r=e.settings.showDate??!0,o=e.settings.showVenue??!0,l=e.settings.showPrice??!0;return`\n                <section class="py-16">\n                    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">\n                        ${t?`<h2 class="text-3xl font-bold text-gray-900 mb-8">${this.escapeHtml(t)}</h2>`:""}\n                        <div id="event-list-${e.id}" class="event-list event-list-${s} space-y-4"\n                             data-source="${a}" data-limit="${i}"\n                             data-show-date="${r}" data-show-venue="${o}" data-show-price="${l}"\n                             data-empty-message="${this.escapeHtml(n)}">\n                            ${[1,2,3].map(()=>'\n                                <div class="animate-pulse flex gap-4 p-4 bg-white rounded-lg shadow">\n                                    <div class="w-24 h-24 bg-gray-200 rounded"></div>\n                                    <div class="flex-1 space-y-2">\n                                        <div class="h-4 bg-gray-200 rounded w-3/4"></div>\n                                        <div class="h-3 bg-gray-200 rounded w-1/2"></div>\n                                    </div>\n                                </div>\n                            ').join("")}\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("image",e=>{const t=this.getContent(e,"caption",""),n=this.getContent(e,"altText",""),s=e.settings.imageUrl||"",i=e.settings.size||"medium",a=e.settings.alignment||"center",r=e.settings.borderRadius||"md",o=e.settings.shadow??!0,l=e.settings.lightbox??!0,d=e.settings.linkUrl||"",c={small:"max-w-md",medium:"max-w-2xl",large:"max-w-4xl",full:"max-w-7xl"}[i]||"max-w-2xl",m={left:"",center:"mx-auto",right:"ml-auto"}[a]||"mx-auto",u={none:"rounded-none",sm:"rounded",md:"rounded-lg",lg:"rounded-2xl"}[r]||"rounded-lg",p=s?`<img src="${s}" alt="${this.escapeHtml(n)}" class="w-full ${u} ${o?"shadow-lg":""}">`:`<div class="aspect-video bg-gray-200 ${u} flex items-center justify-center">\n                       <span class="text-gray-400">No image</span>\n                   </div>`;return`\n                <section class="py-8">\n                    <figure class="${c} ${m} px-4 sm:px-6 lg:px-8">\n                        ${d?`<a href="${d}" ${l?'data-lightbox="true"':""}>${p}</a>`:l?`<a href="${s}" data-lightbox="true">${p}</a>`:p}\n                        ${t?`<figcaption class="mt-4 text-center text-sm text-gray-600">${this.escapeHtml(t)}</figcaption>`:""}\n                    </figure>\n                </section>\n            `}),this.registerRenderer("video",e=>{const t=this.getContent(e,"title",""),n=this.getContent(e,"caption",""),s=e.settings.videoUrl||"",i=e.settings.provider||"youtube",a=e.settings.aspectRatio||"16:9",r=e.settings.autoplay??!1,o=e.settings.loop??!1,l=e.settings.muted??!1,d=e.settings.controls??!0,c={"16:9":"aspect-video","4:3":"aspect-[4/3]","1:1":"aspect-square","21:9":"aspect-[21/9]"}[a]||"aspect-video";let m="";if(s)if("youtube"===i){const e=this.extractYouTubeId(s),t=new URLSearchParams;r&&t.set("autoplay","1"),o&&t.set("loop","1"),l&&t.set("mute","1"),d||t.set("controls","0"),m=`<iframe src="https://www.youtube.com/embed/${e}?${t.toString()}"\n                                         class="w-full h-full rounded-lg" frameborder="0"\n                                         allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"\n                                         allowfullscreen></iframe>`}else if("vimeo"===i){const e=this.extractVimeoId(s),t=new URLSearchParams;r&&t.set("autoplay","1"),o&&t.set("loop","1"),l&&t.set("muted","1"),m=`<iframe src="https://player.vimeo.com/video/${e}?${t.toString()}"\n                                         class="w-full h-full rounded-lg" frameborder="0"\n                                         allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>`}else m=`<video src="${s}" class="w-full h-full rounded-lg"\n                                        ${d?"controls":""} ${r?"autoplay":""}\n                                        ${o?"loop":""} ${l?"muted":""}></video>`;else m='<div class="w-full h-full bg-gray-200 rounded-lg flex items-center justify-center">\n                                 <span class="text-gray-400">No video configured</span>\n                             </div>';return`\n                <section class="py-8">\n                    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">\n                        ${t?`<h2 class="text-2xl font-bold text-gray-900 mb-4">${this.escapeHtml(t)}</h2>`:""}\n                        <div class="${c}">\n                            ${m}\n                        </div>\n                        ${n?`<p class="mt-4 text-center text-sm text-gray-600">${this.escapeHtml(n)}</p>`:""}\n                    </div>\n                </section>\n            `}),this.registerRenderer("button",e=>{const t=this.getContent(e,"text","Click Here"),n=e.settings.url||"#",s=e.settings.style||"primary",i=e.settings.size||"md",a=e.settings.alignment||"center",r=e.settings.fullWidth??!1,o=e.settings.openInNewTab??!1,l=e.settings.icon||"",d=e.settings.iconPosition||"left",c=l?`<span class="button-icon">${l}</span>`:"";return`\n                <section class="py-4">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 ${{left:"text-left",center:"text-center",right:"text-right"}[a]||"text-center"}">\n                        <a href="${n}" ${o?'target="_blank" rel="noopener"':""}\n                           class="inline-flex items-center gap-2 ${{primary:"bg-primary text-white hover:bg-primary-dark",secondary:"bg-secondary text-white hover:bg-secondary-dark",outline:"border-2 border-primary text-primary hover:bg-primary hover:text-white",ghost:"text-primary hover:bg-primary/10"}[s]||"bg-primary text-white hover:bg-primary-dark"} ${{sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"}[i]||"px-6 py-3 text-base"} ${r?"w-full justify-center":""} font-semibold rounded-lg transition">\n                            ${"right"===d?`${this.escapeHtml(t)} ${c}`:`${c} ${this.escapeHtml(t)}`}\n                        </a>\n                    </div>\n                </section>\n            `}),this.registerRenderer("stats-counter",e=>{const t=this.getContent(e,"title",""),n=this.getContentArray(e,"stats"),s=e.settings.columns||4,i=e.settings.style||"simple",a=e.settings.animate??!0,r=Array.isArray(n)&&n.length>0?n.map(e=>`\n                    <div class="stat-item text-center p-6 ${"cards"===i?"bg-white rounded-xl shadow-md":""}">\n                        ${e.icon?`<div class="text-4xl mb-2">${e.icon}</div>`:""}\n                        <div class="stat-value text-4xl md:text-5xl font-bold text-primary mb-2"\n                             ${a?`data-count-to="${e.value}"`:""}>\n                            ${e.prefix||""}${a?"0":e.value}${e.suffix||""}\n                        </div>\n                        <div class="stat-label text-gray-600">${this.escapeHtml(e.label||"")}</div>\n                    </div>\n                `).join(""):'<p class="col-span-full text-center text-gray-500">No statistics configured</p>';return`\n                <section class="py-16 ${"bordered"===i?"border-y border-gray-200":""}">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        ${t?`<h2 class="text-3xl font-bold text-gray-900 mb-12 text-center">${this.escapeHtml(t)}</h2>`:""}\n                        <div id="stats-${e.id}" class="grid grid-cols-2 md:grid-cols-${s} gap-8" data-animate="${a}">\n                            ${r}\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("accordion",e=>{const t=this.getContent(e,"title",""),n=this.getContentArray(e,"items"),s=e.settings.style||"simple",i=e.settings.allowMultiple??!1,a=e.settings.defaultOpen??0,r=Array.isArray(n)&&n.length>0?n.map((e,t)=>`\n                    <div class="accordion-item ${"bordered"===s?"border border-gray-200 rounded-lg mb-2":"border-b border-gray-200"}"\n                         x-data="{ open: ${t===a?"true":"false"} }">\n                        <button @click="open = !open"\n                                class="accordion-header w-full flex items-center justify-between p-4 text-left font-medium text-gray-900 hover:bg-gray-50 transition">\n                            <span>${this.escapeHtml(e.question||e.title||"")}</span>\n                            <svg class="w-5 h-5 transform transition-transform" :class="{ 'rotate-180': open }" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>\n                            </svg>\n                        </button>\n                        <div x-show="open" x-collapse class="accordion-content">\n                            <div class="p-4 text-gray-600 prose prose-sm max-w-none">\n                                ${e.answer||e.content||""}\n                            </div>\n                        </div>\n                    </div>\n                `).join(""):'<p class="text-center text-gray-500">No items configured</p>';return`\n                <section class="py-16">\n                    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">\n                        ${t?`<h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">${this.escapeHtml(t)}</h2>`:""}\n                        <div class="accordion" x-data="{ allowMultiple: ${i} }">\n                            ${r}\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("alert-banner",e=>{const t=this.getContent(e,"message",""),n=this.getContent(e,"linkText",""),s=e.settings.linkUrl||"",i=e.settings.type||"info",a=e.settings.dismissible??!0,r=e.settings.position||"inline",o=e.settings.icon??!0,l={info:{bg:"bg-blue-50",text:"text-blue-800",icon:"ℹ️"},success:{bg:"bg-green-50",text:"text-green-800",icon:"✓"},warning:{bg:"bg-yellow-50",text:"text-yellow-800",icon:"⚠️"},error:{bg:"bg-red-50",text:"text-red-800",icon:"✕"},promo:{bg:"bg-primary/10",text:"text-primary",icon:"🎉"}},d=l[i]||l.info,c="sticky"===r?"sticky top-0 z-50":"";return`\n                <div class="alert-banner ${d.bg} ${c}" x-data="{ show: true }" x-show="show">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3">\n                        <div class="flex items-center justify-center gap-4">\n                            ${o?`<span class="flex-shrink-0">${d.icon}</span>`:""}\n                            <p class="${d.text} text-sm font-medium">\n                                ${this.escapeHtml(t)}\n                                ${n&&s?`<a href="${s}" class="underline ml-2">${this.escapeHtml(n)}</a>`:""}\n                            </p>\n                            ${a?`\n                                <button @click="show = false" class="flex-shrink-0 ${d.text} hover:opacity-70">\n                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">\n                                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>\n                                    </svg>\n                                </button>\n                            `:""}\n                        </div>\n                    </div>\n                </div>\n            `}),this.registerRenderer("slider",e=>{const t=this.getContentArray(e,"slides"),n=e.settings.height||"medium",s=e.settings.autoplay??!0,i=e.settings.autoplaySpeed||5e3,a=e.settings.showArrows??!0,r=e.settings.showDots??!0,o=e.settings.effect||"slide",l={small:"h-[300px]",medium:"h-[400px]",large:"h-[500px]",full:"h-screen"}[n]||"h-[400px]",d=Array.isArray(t)&&t.length>0?t.map((e,t)=>`\n                    <div class="slide ${0===t?"active":""} absolute inset-0 transition-opacity duration-500" data-index="${t}">\n                        <div class="absolute inset-0 bg-cover bg-center" style="background-image: url('${e.image||""}')">\n                            <div class="absolute inset-0 bg-black" style="opacity: ${e.overlayOpacity||.5}"></div>\n                        </div>\n                        <div class="relative h-full flex items-center justify-${e.contentPosition||"center"}">\n                            <div class="text-center text-white px-4 max-w-4xl mx-auto">\n                                ${e.title?`<h2 class="text-4xl md:text-5xl font-bold mb-4">${this.escapeHtml(e.title)}</h2>`:""}\n                                ${e.subtitle?`<p class="text-xl md:text-2xl mb-8 text-white/90">${this.escapeHtml(e.subtitle)}</p>`:""}\n                                ${e.buttonText?`\n                                    <a href="${e.buttonUrl||"#"}" class="inline-block px-8 py-4 bg-white text-gray-900 font-semibold rounded-lg hover:bg-gray-100 transition">\n                                        ${this.escapeHtml(e.buttonText)}\n                                    </a>\n                                `:""}\n                            </div>\n                        </div>\n                    </div>\n                `).join(""):'<div class="absolute inset-0 bg-gray-200 flex items-center justify-center"><span class="text-gray-500">No slides configured</span></div>';return`\n                <section class="slider relative ${l} overflow-hidden"\n                         id="slider-${e.id}"\n                         data-autoplay="${s}"\n                         data-speed="${i}"\n                         data-effect="${o}">\n                    <div class="slides-container relative h-full">\n                        ${d}\n                    </div>\n                    ${a&&Array.isArray(t)&&t.length>1?'\n                        <button class="slider-prev absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/80 rounded-full flex items-center justify-center hover:bg-white transition z-10">\n                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>\n                            </svg>\n                        </button>\n                        <button class="slider-next absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/80 rounded-full flex items-center justify-center hover:bg-white transition z-10">\n                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>\n                            </svg>\n                        </button>\n                    ':""}\n                    ${r&&Array.isArray(t)&&t.length>1?`\n                        <div class="slider-dots absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 z-10">\n                            ${t.map((e,t)=>`\n                                <button class="w-3 h-3 rounded-full ${0===t?"bg-white":"bg-white/50"} hover:bg-white transition" data-slide="${t}"></button>\n                            `).join("")}\n                        </div>\n                    `:""}\n                </section>\n            `}),this.registerRenderer("image-gallery",e=>{const t=this.getContent(e,"title",""),n=this.getContentArray(e,"images"),s=e.settings.columns||4,i=e.settings.style||"grid",a=e.settings.gap||"md",r=e.settings.borderRadius||"md",o=e.settings.lightbox??!0,l=e.settings.showCaptions??!0,d={none:"gap-0",sm:"gap-2",md:"gap-4",lg:"gap-6"}[a]||"gap-4",c={none:"rounded-none",sm:"rounded",md:"rounded-lg",lg:"rounded-xl"}[r]||"rounded-lg",m=Array.isArray(n)&&n.length>0?n.map((e,t)=>`\n                    <a href="${e.src||""}" ${o?'data-lightbox="gallery"':""}\n                       class="gallery-item group relative overflow-hidden ${c} ${"featured"===i&&0===t?"col-span-2 row-span-2":""}">\n                        <img src="${e.src||""}" alt="${this.escapeHtml(e.alt||"")}"\n                             class="w-full h-full object-cover aspect-square group-hover:scale-105 transition duration-300">\n                        ${l&&e.caption?`\n                            <div class="absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/70 to-transparent p-4 opacity-0 group-hover:opacity-100 transition">\n                                <p class="text-white text-sm">${this.escapeHtml(e.caption)}</p>\n                            </div>\n                        `:""}\n                    </a>\n                `).join(""):'<p class="col-span-full text-center text-gray-500">No images configured</p>';return`\n                <section class="py-16">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        ${t?`<h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">${this.escapeHtml(t)}</h2>`:""}\n                        <div class="grid grid-cols-2 md:grid-cols-${s} ${d}" id="gallery-${e.id}">\n                            ${m}\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("social-links",e=>{const t=this.getContent(e,"title",""),n=e.settings.style||"rounded",s=e.settings.size||"md",i=e.settings.alignment||"center",a=e.settings.colorScheme||"brand",r=e.settings.showLabels??!1,o=e.settings.openInNewTab??!0,l={sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12"},d={left:"justify-start",center:"justify-center",right:"justify-end"}[i]||"justify-center",c=[{key:"facebook",name:"Facebook",icon:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z",color:"#1877F2"},{key:"instagram",name:"Instagram",icon:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z",color:"#E4405F"},{key:"twitter",name:"X",icon:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z",color:"#000000"},{key:"youtube",name:"YouTube",icon:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z",color:"#FF0000"},{key:"tiktok",name:"TikTok",icon:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z",color:"#000000"},{key:"linkedin",name:"LinkedIn",icon:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z",color:"#0A66C2"},{key:"spotify",name:"Spotify",icon:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z",color:"#1DB954"}].filter(t=>{const n=this.getContent(e,t.key,"");return n&&""!==n.trim()}).map(t=>{const i=this.getContent(e,t.key,""),d="brand"===a?t.color:"primary"===a?"var(--tixello-primary)":"dark"===a?"#1f2937":"#f3f4f6";return`\n                        <a href="${i}" ${o?'target="_blank" rel="noopener"':""}\n                           class="social-link ${l[s]||l.md} ${"rounded"===n?"rounded-full":"square"===n?"rounded-lg":""} flex items-center justify-center hover:opacity-80 transition"\n                           style="${"rounded"===n||"square"===n?`background-color: ${d}; color: ${"light"===a?"#1f2937":"#ffffff"};`:`color: ${d};`}" title="${t.name}">\n                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">\n                                <path d="${t.icon}"/>\n                            </svg>\n                            ${r?`<span class="ml-2">${t.name}</span>`:""}\n                        </a>\n                    `}).join("");return`\n                <section class="py-8">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        ${t?`<h2 class="text-2xl font-bold text-gray-900 mb-6 text-center">${this.escapeHtml(t)}</h2>`:""}\n                        <div class="flex flex-wrap gap-4 ${d}">\n                            ${c||'<p class="text-gray-500">No social links configured</p>'}\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("map",e=>{const t=this.getContent(e,"title",""),n=this.getContent(e,"address",""),s=this.getContentArray(e,"markers"),i=e.settings.provider||"openstreetmap",a=e.settings.latitude||44.4268,r=e.settings.longitude||26.1025,o=e.settings.zoom||14,l=e.settings.height||"md",d=e.settings.showMarker??!0,c=e.settings.borderRadius||"md",m={sm:"250px",md:"400px",lg:"500px",xl:"600px"}[l]||"400px",u={none:"rounded-none",sm:"rounded",md:"rounded-lg",lg:"rounded-xl"}[c]||"rounded-lg";let p="";return p="openstreetmap"===i?`\n                    <iframe\n                        src="https://www.openstreetmap.org/export/embed.html?bbox=${r-.01},${a-.01},${r+.01},${a+.01}&layer=mapnik${d?`&marker=${a},${r}`:""}"\n                        class="w-full ${u}" style="height: ${m}; border: 0;"\n                        allowfullscreen loading="lazy">\n                    </iframe>\n                `:`\n                    <div id="map-${e.id}" class="w-full ${u}" style="height: ${m};"\n                         data-provider="${i}" data-lat="${a}" data-lng="${r}"\n                         data-zoom="${o}" data-show-marker="${d}"\n                         data-markers='${JSON.stringify(s)}'>\n                        <div class="w-full h-full bg-gray-200 flex items-center justify-center">\n                            <span class="text-gray-500">Map loading...</span>\n                        </div>\n                    </div>\n                `,`\n                <section class="py-8">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        ${t?`<h2 class="text-2xl font-bold text-gray-900 mb-4">${this.escapeHtml(t)}</h2>`:""}\n                        ${n?`<p class="text-gray-600 mb-4">${this.escapeHtml(n)}</p>`:""}\n                        ${p}\n                    </div>\n                </section>\n            `}),this.registerRenderer("tabs",e=>{const t=this.getContentArray(e,"tabs");e.settings.style;const n=e.settings.alignment||"left",s=e.settings.vertical??!1;return`\n                <section class="py-8">\n                    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8" x-data="{ activeTab: 0 }">\n                        <div class="flex ${{left:"justify-start",center:"justify-center",right:"justify-end",full:""}[n]||"justify-start"} ${s?"flex-col sm:flex-row gap-4":"border-b border-gray-200 gap-4"}">\n                            ${Array.isArray(t)&&t.length>0?t.map((e,t)=>`\n                    <button @click="activeTab = ${t}"\n                            :class="{ 'border-primary text-primary': activeTab === ${t}, 'border-transparent text-gray-500 hover:text-gray-700': activeTab !== ${t} }"\n                            class="px-4 py-2 border-b-2 font-medium text-sm transition ${"full"===n?"flex-1":""}">\n                        ${this.escapeHtml(e.title||"")}\n                    </button>\n                `).join(""):""}\n                        </div>\n                        <div class="mt-6">\n                            ${Array.isArray(t)&&t.length>0?t.map((e,t)=>`\n                    <div x-show="activeTab === ${t}" x-transition class="prose prose-lg max-w-none">\n                        ${e.content||""}\n                    </div>\n                `).join(""):'<p class="text-gray-500">No tabs configured</p>'}\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("card",e=>{const t=this.getContent(e,"title",""),n=this.getContent(e,"subtitle",""),s=this.getContentArray(e,"cards"),i=e.settings.columns||3,a=e.settings.style||"shadow",r=e.settings.showImage??!0,o={default:"bg-white",bordered:"bg-white border border-gray-200",shadow:"bg-white shadow-md",minimal:"bg-transparent"}[a]||"bg-white shadow-md",l=Array.isArray(s)&&s.length>0?s.map(e=>`\n                    <div class="${o} rounded-xl overflow-hidden group">\n                        ${r&&e.image?`\n                            <div class="aspect-video overflow-hidden">\n                                <img src="${e.image}" alt="${this.escapeHtml(e.title||"")}" class="w-full h-full object-cover group-hover:scale-105 transition duration-300">\n                            </div>\n                        `:""}\n                        <div class="p-6">\n                            <h3 class="text-lg font-semibold text-gray-900 mb-2">${this.escapeHtml(e.title||"")}</h3>\n                            <p class="text-gray-600 mb-4">${this.escapeHtml(e.description||"")}</p>\n                            ${e.link?`\n                                <a href="${e.link}" class="text-primary font-medium hover:underline">\n                                    ${this.escapeHtml(e.linkText||"Learn More")} →\n                                </a>\n                            `:""}\n                        </div>\n                    </div>\n                `).join(""):'<p class="col-span-full text-center text-gray-500">No cards configured</p>';return`\n                <section class="py-16">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        ${t||n?`\n                            <div class="text-center mb-12">\n                                ${t?`<h2 class="text-3xl font-bold text-gray-900 mb-4">${this.escapeHtml(t)}</h2>`:""}\n                                ${n?`<p class="text-lg text-gray-600 max-w-2xl mx-auto">${this.escapeHtml(n)}</p>`:""}\n                            </div>\n                        `:""}\n                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-${i} gap-6">\n                            ${l}\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("heading",e=>{const t=this.getContent(e,"heading",""),n=this.getContent(e,"subheading",""),s=e.settings.level||"h2",i=e.settings.alignment||"left",a=e.settings.size||"md",r=e.settings.showDivider??!1;return`\n                <section class="py-8">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 ${{left:"text-left",center:"text-center",right:"text-right"}[i]||"text-left"}">\n                        <${s} class="${{sm:"text-xl md:text-2xl",md:"text-2xl md:text-3xl",lg:"text-3xl md:text-4xl",xl:"text-4xl md:text-5xl"}[a]||"text-2xl md:text-3xl"} font-bold text-gray-900">${this.escapeHtml(t)}</${s}>\n                        ${n?`<p class="mt-2 text-lg text-gray-600">${this.escapeHtml(n)}</p>`:""}\n                        ${r?`<div class="mt-4 w-20 h-1 bg-primary ${"center"===i?"mx-auto":"right"===i?"ml-auto":""}"></div>`:""}\n                    </div>\n                </section>\n            `}),this.registerRenderer("quote",e=>{const t=this.getContent(e,"quote",""),n=this.getContent(e,"author",""),s=this.getContent(e,"authorTitle",""),i=e.settings.style||"bordered",a=e.settings.showQuoteMarks??!0;return`\n                <section class="py-8">\n                    <blockquote class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 ${{default:"",bordered:"border-l-4 border-primary pl-6",centered:"text-center",card:"bg-gray-50 p-8 rounded-xl",large:"text-xl md:text-2xl"}[i]||"border-l-4 border-primary pl-6"}">\n                        ${a?'<span class="text-4xl text-primary leading-none">"</span>':""}\n                        <p class="text-lg md:text-xl text-gray-700 italic mb-4">${this.escapeHtml(t)}</p>\n                        ${n?`\n                            <footer class="flex items-center gap-3 ${"centered"===i?"justify-center":""}">\n                                <cite class="not-italic">\n                                    <span class="font-semibold text-gray-900">${this.escapeHtml(n)}</span>\n                                    ${s?`<span class="text-gray-500"> — ${this.escapeHtml(s)}</span>`:""}\n                                </cite>\n                            </footer>\n                        `:""}\n                    </blockquote>\n                </section>\n            `}),this.registerRenderer("table",e=>{const t=this.getContent(e,"title",""),n=this.getContent(e,"caption",""),s=this.getContentArray(e,"headers"),i=this.getContentArray(e,"rows"),a=e.settings.style||"striped",r=e.settings.showHeader??!0,o={default:"",striped:"[&>tbody>tr:nth-child(odd)]:bg-gray-50",bordered:"border border-gray-200 [&_td]:border [&_th]:border",minimal:""}[a]||"",l=r&&Array.isArray(s)&&s.length>0?`<thead class="bg-gray-100"><tr>${s.map(e=>`<th class="px-4 py-3 text-left text-sm font-semibold text-gray-900">${this.escapeHtml("string"==typeof e?e:e.header||"")}</th>`).join("")}</tr></thead>`:"",d=Array.isArray(i)&&i.length>0?i.map(e=>`\n                    <tr class="hover:bg-gray-50 transition">\n                        ${Array.isArray(e.cells)?e.cells.map(e=>`\n                            <td class="px-4 py-3 text-sm text-gray-600">${this.escapeHtml("string"==typeof e?e:e.cell||"")}</td>\n                        `).join(""):""}\n                    </tr>\n                `).join(""):'<tr><td class="px-4 py-3 text-center text-gray-500" colspan="100">No data</td></tr>';return`\n                <section class="py-8">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        ${t?`<h2 class="text-2xl font-bold text-gray-900 mb-4">${this.escapeHtml(t)}</h2>`:""}\n                        <div class="overflow-x-auto">\n                            <table class="w-full ${o}">\n                                ${l}\n                                <tbody class="divide-y divide-gray-200">\n                                    ${d}\n                                </tbody>\n                            </table>\n                        </div>\n                        ${n?`<p class="mt-2 text-sm text-gray-500">${this.escapeHtml(n)}</p>`:""}\n                    </div>\n                </section>\n            `}),this.registerRenderer("list",e=>{const t=this.getContent(e,"title",""),n=this.getContentArray(e,"items"),s=e.settings.listType||"bullet",i=e.settings.columns||1,a={bullet:"•",numbered:"",check:"✓",icon:"",none:""},r=Array.isArray(n)&&n.length>0?n.map((e,t)=>`\n                    <li class="flex gap-3">\n                        ${"none"!==s&&"numbered"!==s?`<span class="text-primary flex-shrink-0">${a[s]||"•"}</span>`:""}\n                        ${"numbered"===s?`<span class="text-primary font-medium flex-shrink-0">${t+1}.</span>`:""}\n                        <div>\n                            <span class="text-gray-900">${this.escapeHtml(e.text||"")}</span>\n                            ${e.subtext?`<span class="block text-sm text-gray-500">${this.escapeHtml(e.subtext)}</span>`:""}\n                        </div>\n                    </li>\n                `).join(""):'<li class="text-gray-500">No items configured</li>';return`\n                <section class="py-8">\n                    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">\n                        ${t?`<h2 class="text-2xl font-bold text-gray-900 mb-4">${this.escapeHtml(t)}</h2>`:""}\n                        <ul class="grid grid-cols-1 ${i>1?`md:grid-cols-${i}`:""} gap-3">\n                            ${r}\n                        </ul>\n                    </div>\n                </section>\n            `}),this.registerRenderer("icon-box",e=>{const t=this.getContent(e,"title",""),n=this.getContent(e,"subtitle",""),s=this.getContentArray(e,"boxes"),i=e.settings.columns||3,a=e.settings.style||"default",r=e.settings.iconPosition||"top",o={default:"",bordered:"border border-gray-200 rounded-xl",filled:"bg-gray-50 rounded-xl",minimal:""}[a]||"",l=Array.isArray(s)&&s.length>0?s.map(e=>`\n                    <div class="p-6 ${o} ${"top"===r?"text-center":"flex gap-4"}">\n                        <div class="${"top"===r?"w-16 h-16 mx-auto mb-4":"w-12 h-12 flex-shrink-0"} bg-primary/10 rounded-full flex items-center justify-center text-primary text-2xl">\n                            ${e.icon?`<span>${e.icon.replace("heroicon-o-","")}</span>`:"★"}\n                        </div>\n                        <div>\n                            <h3 class="text-lg font-semibold text-gray-900 mb-2">${this.escapeHtml(e.title||"")}</h3>\n                            <p class="text-gray-600">${this.escapeHtml(e.description||"")}</p>\n                        </div>\n                    </div>\n                `).join(""):'<p class="col-span-full text-center text-gray-500">No items configured</p>';return`\n                <section class="py-16">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        ${t||n?`\n                            <div class="text-center mb-12">\n                                ${t?`<h2 class="text-3xl font-bold text-gray-900 mb-4">${this.escapeHtml(t)}</h2>`:""}\n                                ${n?`<p class="text-lg text-gray-600">${this.escapeHtml(n)}</p>`:""}\n                            </div>\n                        `:""}\n                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-${i} gap-6">\n                            ${l}\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("logo",e=>{const t=this.getContent(e,"logo",""),n=this.getContent(e,"altText","Logo"),s=this.getContent(e,"link",""),i=e.settings.size||"md",a=e.settings.alignment||"left",r=e.settings.linkToHome??!0,o={xs:"h-6",sm:"h-8",md:"h-12",lg:"h-16",xl:"h-24"}[i]||"h-12",l={left:"justify-start",center:"justify-center",right:"justify-end"}[a]||"justify-start",d=s||(r?"/":""),c=t?`<img src="${t}" alt="${this.escapeHtml(n)}" class="${o} w-auto">`:'<span class="text-2xl font-bold text-primary">Logo</span>';return`\n                <div class="flex ${l} py-4">\n                    ${d?`<a href="${d}">${c}</a>`:c}\n                </div>\n            `}),this.registerRenderer("pricing",e=>{const t=this.getContent(e,"title",""),n=this.getContent(e,"subtitle",""),s=this.getContentArray(e,"plans"),i=e.settings.columns||3,a=Array.isArray(s)&&s.length>0?s.map(e=>`\n                    <div class="relative bg-white rounded-2xl shadow-lg overflow-hidden ${e.featured?"ring-2 ring-primary":""}">\n                        ${e.featured&&e.badge?`\n                            <div class="absolute top-0 right-0 bg-primary text-white px-4 py-1 text-sm font-medium rounded-bl-lg">\n                                ${this.escapeHtml(e.badge)}\n                            </div>\n                        `:""}\n                        <div class="p-8">\n                            <h3 class="text-xl font-bold text-gray-900 mb-2">${this.escapeHtml(e.name||"")}</h3>\n                            <p class="text-gray-600 mb-4">${this.escapeHtml(e.description||"")}</p>\n                            <div class="mb-6">\n                                <span class="text-4xl font-bold text-gray-900">${this.escapeHtml(e.price||"")}</span>\n                                <span class="text-gray-500">${this.escapeHtml(e.period||"")}</span>\n                            </div>\n                            <ul class="space-y-3 mb-8">\n                                ${Array.isArray(e.features)?e.features.map(e=>`\n                                    <li class="flex items-center gap-2">\n                                        <svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>\n                                        </svg>\n                                        <span class="text-gray-600">${this.escapeHtml("string"==typeof e?e:e.feature||"")}</span>\n                                    </li>\n                                `).join(""):""}\n                            </ul>\n                            <a href="${e.buttonLink||"#"}" class="block w-full text-center px-6 py-3 ${e.featured?"bg-primary text-white":"bg-gray-100 text-gray-900 hover:bg-gray-200"} font-semibold rounded-lg transition">\n                                ${this.escapeHtml(e.buttonText||"Get Started")}\n                            </a>\n                        </div>\n                    </div>\n                `).join(""):'<p class="col-span-full text-center text-gray-500">No pricing plans configured</p>';return`\n                <section class="py-16 bg-gray-50">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        ${t||n?`\n                            <div class="text-center mb-12">\n                                ${t?`<h2 class="text-3xl font-bold text-gray-900 mb-4">${this.escapeHtml(t)}</h2>`:""}\n                                ${n?`<p class="text-lg text-gray-600">${this.escapeHtml(n)}</p>`:""}\n                            </div>\n                        `:""}\n                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-${i} gap-8">\n                            ${a}\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("team",e=>{const t=this.getContent(e,"title",""),n=this.getContent(e,"subtitle",""),s=this.getContentArray(e,"members"),i=e.settings.columns||4,a=e.settings.showBio??!0,r=e.settings.showSocial??!0,o=Array.isArray(s)&&s.length>0?s.map(e=>`\n                    <div class="text-center">\n                        <div class="w-32 h-32 mx-auto mb-4 rounded-full overflow-hidden bg-gray-200">\n                            ${e.photo?`<img src="${e.photo}" alt="${this.escapeHtml(e.name||"")}" class="w-full h-full object-cover">`:`\n                                <div class="w-full h-full flex items-center justify-center text-4xl font-bold text-gray-400">\n                                    ${(e.name||"T").charAt(0)}\n                                </div>\n                            `}\n                        </div>\n                        <h3 class="text-lg font-semibold text-gray-900">${this.escapeHtml(e.name||"")}</h3>\n                        <p class="text-primary text-sm mb-2">${this.escapeHtml(e.role||"")}</p>\n                        ${a&&e.bio?`<p class="text-gray-600 text-sm">${this.escapeHtml(e.bio)}</p>`:""}\n                        ${r&&(e.linkedin||e.twitter)?`\n                            <div class="flex justify-center gap-2 mt-3">\n                                ${e.linkedin?`<a href="${e.linkedin}" target="_blank" class="text-gray-400 hover:text-primary">LinkedIn</a>`:""}\n                                ${e.twitter?`<a href="${e.twitter}" target="_blank" class="text-gray-400 hover:text-primary">Twitter</a>`:""}\n                            </div>\n                        `:""}\n                    </div>\n                `).join(""):'<p class="col-span-full text-center text-gray-500">No team members configured</p>';return`\n                <section class="py-16">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        ${t||n?`\n                            <div class="text-center mb-12">\n                                ${t?`<h2 class="text-3xl font-bold text-gray-900 mb-4">${this.escapeHtml(t)}</h2>`:""}\n                                ${n?`<p class="text-lg text-gray-600">${this.escapeHtml(n)}</p>`:""}\n                            </div>\n                        `:""}\n                        <div class="grid grid-cols-2 md:grid-cols-${i} gap-8">\n                            ${o}\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("contact-info",e=>{const t=this.getContent(e,"title",""),n=this.getContent(e,"description",""),s=this.getContentArray(e,"contacts"),i=e.settings.layout||"vertical",a=e.settings.showIcons??!0,r={phone:"📞",email:"✉️",address:"📍",hours:"🕐",website:"🌐",custom:"•"},o=Array.isArray(s)&&s.length>0?s.map(e=>{const t=a?r[e.type]||r.custom:"";let n=e.link||"";return n||"phone"!==e.type||(n=`tel:${e.value}`),n||"email"!==e.type||(n=`mailto:${e.value}`),`\n                        <div class="flex items-start gap-3">\n                            ${t?`<span class="text-xl">${t}</span>`:""}\n                            <div>\n                                ${e.label?`<span class="text-sm text-gray-500 block">${this.escapeHtml(e.label)}</span>`:""}\n                                ${n?`<a href="${n}" class="text-gray-900 hover:text-primary">${this.escapeHtml(e.value||"")}</a>`:`<span class="text-gray-900">${this.escapeHtml(e.value||"")}</span>`}\n                            </div>\n                        </div>\n                    `}).join(""):'<p class="text-gray-500">No contact information configured</p>',l="horizontal"===i?"flex flex-wrap gap-8":"grid"===i?"grid grid-cols-1 md:grid-cols-2 gap-4":"space-y-4";return`\n                <section class="py-8">\n                    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">\n                        ${t?`<h2 class="text-2xl font-bold text-gray-900 mb-4">${this.escapeHtml(t)}</h2>`:""}\n                        ${n?`<p class="text-gray-600 mb-6">${this.escapeHtml(n)}</p>`:""}\n                        <div class="${l}">\n                            ${o}\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("form",e=>{const t=this.getContent(e,"title",""),n=this.getContent(e,"description",""),s=this.getContentArray(e,"fields"),i=this.getContent(e,"submitText","Submit"),a=this.getContent(e,"successMessage","Thank you!");e.settings.layout;const r=Array.isArray(s)&&s.length>0?s.map(e=>{const t="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",n="half"===e.width?"md:col-span-1":"md:col-span-2";let s="";switch(e.type){case"textarea":s=`<textarea name="${e.name}" placeholder="${this.escapeHtml(e.placeholder||"")}" ${e.required?"required":""} rows="4" class="${t}"></textarea>`;break;case"select":const n=(e.options||"").split(",").map(e=>`<option value="${e.trim()}">${e.trim()}</option>`).join("");s=`<select name="${e.name}" ${e.required?"required":""} class="${t}"><option value="">Select...</option>${n}</select>`;break;case"checkbox":s=`<label class="flex items-center gap-2"><input type="checkbox" name="${e.name}" ${e.required?"required":""} class="w-4 h-4 text-primary rounded"> ${this.escapeHtml(e.label||"")}</label>`;break;default:s=`<input type="${e.type||"text"}" name="${e.name}" placeholder="${this.escapeHtml(e.placeholder||"")}" ${e.required?"required":""} class="${t}">`}return`\n                        <div class="${n}">\n                            ${"checkbox"!==e.type?`<label class="block text-sm font-medium text-gray-700 mb-2">${this.escapeHtml(e.label||"")}${e.required?" *":""}</label>`:""}\n                            ${s}\n                        </div>\n                    `}).join(""):"";return`\n                <section class="py-8">\n                    <div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8">\n                        ${t?`<h2 class="text-2xl font-bold text-gray-900 mb-4">${this.escapeHtml(t)}</h2>`:""}\n                        ${n?`<p class="text-gray-600 mb-6">${this.escapeHtml(n)}</p>`:""}\n                        <form id="form-${e.id}" class="grid grid-cols-1 md:grid-cols-2 gap-4" data-success="${this.escapeHtml(a)}">\n                            ${r}\n                            <div class="md:col-span-2">\n                                <button type="submit" class="px-8 py-3 bg-primary text-white font-semibold rounded-lg hover:bg-primary-dark transition">\n                                    ${this.escapeHtml(i)}\n                                </button>\n                            </div>\n                        </form>\n                    </div>\n                </section>\n            `}),this.registerRenderer("audio",e=>{const t=this.getContent(e,"title",""),n=this.getContent(e,"artist",""),s=this.getContent(e,"audioUrl","")||e.settings.audioFile||"",i=this.getContent(e,"coverImage",""),a=e.settings.autoplay??!1,r=e.settings.loop??!1,o=e.settings.showDownload??!1;return`\n                <section class="py-8">\n                    <div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8">\n                        <div class="bg-white rounded-xl shadow-md p-6 flex gap-4 items-center">\n                            ${i?`<img src="${i}" alt="${this.escapeHtml(t)}" class="w-20 h-20 rounded-lg object-cover">`:'\n                                <div class="w-20 h-20 rounded-lg bg-gradient-to-br from-primary to-secondary flex items-center justify-center">\n                                    <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/></svg>\n                                </div>\n                            '}\n                            <div class="flex-1">\n                                ${t?`<h3 class="font-semibold text-gray-900">${this.escapeHtml(t)}</h3>`:""}\n                                ${n?`<p class="text-sm text-gray-500">${this.escapeHtml(n)}</p>`:""}\n                                ${s?`\n                                    <audio controls ${a?"autoplay":""} ${r?"loop":""} class="w-full mt-2">\n                                        <source src="${s}" type="audio/mpeg">\n                                    </audio>\n                                `:'<p class="text-gray-400 text-sm mt-2">No audio file</p>'}\n                            </div>\n                            ${o&&s?`<a href="${s}" download class="text-primary hover:underline">Download</a>`:""}\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("embed",e=>{var t,n;const s=this.getContent(e,"title",""),i=this.getContent(e,"url",""),a=this.getContent(e,"caption",""),r=e.settings.type||"url",o=e.settings.aspectRatio||"16:9",l=e.settings.maxWidth||800,d={"16:9":"aspect-video","4:3":"aspect-[4/3]","1:1":"aspect-square","9:16":"aspect-[9/16]",auto:""}[o]||"aspect-video";let c="";if(i)if("youtube"===r){c=`<iframe src="https://www.youtube.com/embed/${(null==(t=i.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/))?void 0:t[1])||""}" class="w-full h-full" frameborder="0" allowfullscreen></iframe>`}else if("vimeo"===r){c=`<iframe src="https://player.vimeo.com/video/${(null==(n=i.match(/(?:vimeo\.com\/)(\d+)/))?void 0:n[1])||""}" class="w-full h-full" frameborder="0" allowfullscreen></iframe>`}else c=`<iframe src="${i}" class="w-full h-full" frameborder="0"></iframe>`;else c='<div class="w-full h-full bg-gray-200 flex items-center justify-center"><span class="text-gray-400">No embed URL</span></div>';return`\n                <section class="py-8">\n                    <div class="mx-auto px-4 sm:px-6 lg:px-8" style="max-width: ${l}px">\n                        ${s?`<h2 class="text-xl font-bold text-gray-900 mb-4">${this.escapeHtml(s)}</h2>`:""}\n                        <div class="${d} rounded-lg overflow-hidden">\n                            ${c}\n                        </div>\n                        ${a?`<p class="mt-2 text-sm text-gray-500 text-center">${this.escapeHtml(a)}</p>`:""}\n                    </div>\n                </section>\n            `}),this.registerRenderer("file-download",e=>{const t=this.getContent(e,"title",""),n=this.getContentArray(e,"files");e.settings.style;const s=e.settings.showFileSize??!0,i=e.settings.showFileType??!0,a={pdf:"📄",doc:"📝",xls:"📊",zip:"📦",image:"🖼️",other:"📁"},r=Array.isArray(n)&&n.length>0?n.map(e=>`\n                    <a href="${e.file||e.externalUrl||"#"}" target="_blank" class="flex items-center gap-4 p-4 bg-white rounded-lg shadow hover:shadow-md transition group">\n                        ${i?`<span class="text-2xl">${a[e.fileType]||a.other}</span>`:""}\n                        <div class="flex-1 min-w-0">\n                            <span class="font-medium text-gray-900 group-hover:text-primary truncate block">${this.escapeHtml(e.name||"File")}</span>\n                            ${e.description?`<span class="text-sm text-gray-500 truncate block">${this.escapeHtml(e.description)}</span>`:""}\n                        </div>\n                        ${s&&e.fileSize?`<span class="text-sm text-gray-400">${this.escapeHtml(e.fileSize)}</span>`:""}\n                        <svg class="w-5 h-5 text-gray-400 group-hover:text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>\n                        </svg>\n                    </a>\n                `).join(""):'<p class="text-gray-500 text-center">No files configured</p>';return`\n                <section class="py-8">\n                    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">\n                        ${t?`<h2 class="text-2xl font-bold text-gray-900 mb-6">${this.escapeHtml(t)}</h2>`:""}\n                        <div class="space-y-3">\n                            ${r}\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("breadcrumb",e=>{const t=this.getContentArray(e,"items"),n=e.settings.separator||"chevron",s=e.settings.showHomeIcon??!0,i={chevron:'<svg class="w-4 h-4 mx-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>',slash:'<span class="mx-2 text-gray-400">/</span>',arrow:'<span class="mx-2 text-gray-400">→</span>',dot:'<span class="mx-2 text-gray-400">•</span>'},a=i[n]||i.chevron;return`\n                <nav class="py-4">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        <ol class="flex items-center text-sm">\n                            ${Array.isArray(t)&&t.length>0?t.map((e,n)=>{const i=n===t.length-1||e.isCurrentPage,r=0===n&&s?'<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"/></svg>':this.escapeHtml(e.label||"");return`\n                        ${n>0?a:""}\n                        ${i||!e.url?`<span class="text-gray-500">${r}</span>`:`<a href="${e.url}" class="text-primary hover:underline">${r}</a>`}\n                    `}).join(""):""}\n                        </ol>\n                    </div>\n                </nav>\n            `}),this.registerRenderer("timeline",e=>{const t=this.getContent(e,"title",""),n=this.getContent(e,"subtitle",""),s=this.getContentArray(e,"items");e.settings.style;const i={completed:"bg-green-500",current:"bg-primary",upcoming:"bg-gray-300"},a=Array.isArray(s)&&s.length>0?s.map((e,t)=>`\n                    <div class="relative pl-8 pb-8 ${t===s.length-1?"":"border-l-2 border-gray-200 ml-3"}">\n                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full ${i[e.status]||i.completed} flex items-center justify-center">\n                            <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20">\n                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>\n                            </svg>\n                        </div>\n                        <div class="ml-6">\n                            <span class="text-sm font-medium text-primary">${this.escapeHtml(e.date||"")}</span>\n                            <h3 class="text-lg font-semibold text-gray-900 mt-1">${this.escapeHtml(e.title||"")}</h3>\n                            ${e.description?`<div class="mt-2 text-gray-600 prose prose-sm">${e.description}</div>`:""}\n                        </div>\n                    </div>\n                `).join(""):'<p class="text-gray-500 text-center">No timeline items configured</p>';return`\n                <section class="py-16">\n                    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">\n                        ${t||n?`\n                            <div class="text-center mb-12">\n                                ${t?`<h2 class="text-3xl font-bold text-gray-900 mb-4">${this.escapeHtml(t)}</h2>`:""}\n                                ${n?`<p class="text-lg text-gray-600">${this.escapeHtml(n)}</p>`:""}\n                            </div>\n                        `:""}\n                        <div class="relative">\n                            ${a}\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("reviews",e=>{const t=this.getContent(e,"title",""),n=this.getContent(e,"subtitle",""),s=this.getContentArray(e,"reviews");e.settings.layout;const i=e.settings.columns||2,a=e.settings.showRating??!0,r=e.settings.showVerifiedBadge??!0,o=Array.isArray(s)&&s.length>0?s.map(e=>{return`\n                    <div class="bg-white rounded-xl shadow-md p-6">\n                        <div class="flex items-center gap-4 mb-4">\n                            ${e.avatar?`<img src="${e.avatar}" class="w-12 h-12 rounded-full">`:`\n                                <div class="w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center font-bold">\n                                    ${(e.author||"A").charAt(0)}\n                                </div>\n                            `}\n                            <div>\n                                <div class="font-semibold text-gray-900">${this.escapeHtml(e.author||"")}</div>\n                                ${r&&e.verified?'<span class="text-xs text-green-600">✓ Verified</span>':""}\n                            </div>\n                        </div>\n                        ${a?`<div class="text-yellow-400 mb-2">${t=e.rating||5,"★".repeat(t)+"☆".repeat(5-t)}</div>`:""}\n                        ${e.title?`<h4 class="font-medium text-gray-900 mb-2">${this.escapeHtml(e.title)}</h4>`:""}\n                        <p class="text-gray-600">${this.escapeHtml(e.content||"")}</p>\n                        ${e.date?`<p class="text-sm text-gray-400 mt-3">${this.escapeHtml(e.date)}</p>`:""}\n                    </div>\n                `;var t}).join(""):'<p class="col-span-full text-center text-gray-500">No reviews configured</p>';return`\n                <section class="py-16 bg-gray-50">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        ${t||n?`\n                            <div class="text-center mb-12">\n                                ${t?`<h2 class="text-3xl font-bold text-gray-900 mb-4">${this.escapeHtml(t)}</h2>`:""}\n                                ${n?`<p class="text-lg text-gray-600">${this.escapeHtml(n)}</p>`:""}\n                            </div>\n                        `:""}\n                        <div class="grid grid-cols-1 md:grid-cols-${i} gap-6">\n                            ${o}\n                        </div>\n                    </div>\n                </section>\n            `}),this.registerRenderer("header",e=>{const t=this.getContent(e,"logo",""),n=this.getContent(e,"logoAlt","Logo"),s=this.getContentArray(e,"navigation"),i=this.getContent(e,"ctaText",""),a=this.getContent(e,"ctaUrl","/"),r=e.settings.sticky??!0,o=e.settings.showCta??!0,l={white:"bg-white",dark:"bg-gray-900 text-white",transparent:"bg-transparent",primary:"bg-primary text-white"}[e.settings.backgroundColor||"white"]||"bg-white",d=Array.isArray(s)&&s.length>0?s.map(e=>`\n                    <a href="${e.url||"#"}" ${e.isExternal?'target="_blank"':""} class="hover:text-primary transition">\n                        ${this.escapeHtml(e.label||"")}\n                    </a>\n                `).join(""):"";return`\n                <header class="${l} ${r?"sticky top-0 z-50":""} shadow-sm" x-data="{ mobileOpen: false }">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        <div class="flex items-center justify-between h-16">\n                            <a href="/" class="flex-shrink-0">\n                                ${t?`<img src="${t}" alt="${this.escapeHtml(n)}" class="h-8 w-auto">`:'<span class="text-xl font-bold">Logo</span>'}\n                            </a>\n                            <nav class="hidden md:flex items-center gap-8">\n                                ${d}\n                                ${o&&i?`<a href="${a}" class="px-4 py-2 bg-primary text-white rounded-lg font-medium hover:bg-primary-dark transition">${this.escapeHtml(i)}</a>`:""}\n                            </nav>\n                            <button @click="mobileOpen = !mobileOpen" class="md:hidden p-2">\n                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>\n                                </svg>\n                            </button>\n                        </div>\n                    </div>\n                    <div x-show="mobileOpen" x-collapse class="md:hidden border-t">\n                        <nav class="px-4 py-4 space-y-2">\n                            ${d}\n                            ${o&&i?`<a href="${a}" class="block px-4 py-2 bg-primary text-white rounded-lg font-medium text-center">${this.escapeHtml(i)}</a>`:""}\n                        </nav>\n                    </div>\n                </header>\n            `}),this.registerRenderer("footer",e=>{const t=this.getContent(e,"logo",""),n=this.getContent(e,"description",""),s=this.getContentArray(e,"linkGroups"),i=this.getContentArray(e,"socialLinks"),a=this.getContent(e,"copyright",""),r=this.getContent(e,"email",""),o=this.getContent(e,"phone",""),l=e.settings.style||"default",d="dark"===l?"bg-gray-900 text-white":"bg-gray-100 text-gray-900",c="dark"===l?"text-gray-400":"text-gray-600",m=Array.isArray(s)&&s.length>0?s.map(e=>`\n                    <div>\n                        <h3 class="font-semibold mb-4">${this.escapeHtml(e.title||"")}</h3>\n                        <ul class="space-y-2">\n                            ${Array.isArray(e.links)?e.links.map(e=>`\n                                <li><a href="${e.url||"#"}" class="${c} hover:text-primary transition">${this.escapeHtml(e.label||"")}</a></li>\n                            `).join(""):""}\n                        </ul>\n                    </div>\n                `).join(""):"";return`\n                <footer class="${d} pt-16 pb-8">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">\n                            <div>\n                                ${t?`<img src="${t}" alt="Logo" class="h-8 w-auto mb-4">`:""}\n                                ${n?`<div class="${c} prose prose-sm">${n}</div>`:""}\n                                ${r?`<p class="mt-4"><a href="mailto:${r}" class="${c} hover:text-primary">${r}</a></p>`:""}\n                                ${o?`<p><a href="tel:${o}" class="${c} hover:text-primary">${o}</a></p>`:""}\n                            </div>\n                            ${m}\n                        </div>\n                        <div class="border-t ${"dark"===l?"border-gray-800":"border-gray-200"} pt-8 flex flex-col md:flex-row justify-between items-center gap-4">\n                            <p class="${c} text-sm">${this.escapeHtml(a)}</p>\n                            ${Array.isArray(i)&&i.length>0?`\n                                <div class="flex gap-4">\n                                    ${i.map(e=>`<a href="${e.url||"#"}" target="_blank" class="${c} hover:text-primary">${e.platform}</a>`).join("")}\n                                </div>\n                            `:""}\n                        </div>\n                    </div>\n                </footer>\n            `}),this.registerRenderer("menu",e=>{const t=this.getContentArray(e,"items"),n=e.settings.style||"horizontal";return`\n                <nav class="py-4">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        <div class="flex ${{left:"justify-start",center:"justify-center",right:"justify-end",justified:"justify-between"}[e.settings.alignment||"left"]||"justify-start"} ${"vertical"===n?"flex-col space-y-2":"flex-row flex-wrap gap-6"}">\n                            ${Array.isArray(t)&&t.length>0?t.map(e=>`\n                    <a href="${e.url||"#"}" ${e.isExternal?'target="_blank"':""}\n                       class="${e.highlighted?"text-primary font-semibold":"text-gray-700"} hover:text-primary transition">\n                        ${this.escapeHtml(e.label||"")}\n                    </a>\n                `).join(""):""}\n                        </div>\n                    </div>\n                </nav>\n            `}),this.registerRenderer("columns",e=>{const t=this.getContentArray(e,"columns"),n=e.settings.columns||2,s=e.settings.gap||"md";return`\n                <section class="py-8">\n                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">\n                        <div class="grid ${e.settings.stackOnMobile??!0?"grid-cols-1":""} md:grid-cols-${n} ${{none:"gap-0",sm:"gap-4",md:"gap-8",lg:"gap-12",xl:"gap-16"}[s]||"gap-8"}">\n                            ${Array.isArray(t)&&t.length>0?t.map(e=>`<div class="${"light"===e.background?"bg-gray-50":"white"===e.background?"bg-white":"primary-light"===e.background?"bg-primary/5":""} ${"sm"===e.padding?"p-4":"md"===e.padding?"p-6":"lg"===e.padding?"p-8":""} rounded-lg prose prose-lg max-w-none">${e.content||""}</div>`).join(""):""}\n                        </div>\n                    </div>\n                </section>\n            `})}static extractYouTubeId(e){const t=e.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);return t?t[1]:""}static extractVimeoId(e){const t=e.match(/(?:vimeo\.com\/)(\d+)/);return t?t[1]:""}static escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}static updateLayout(e,t="page-content"){const n=document.getElementById(t);n&&(n.innerHTML=this.renderLayout(e),this.initializeBlocks(e))}static initializeBlocks(e){(null==e?void 0:e.blocks)&&e.blocks.forEach(e=>{switch(e.type){case"event-grid":this.initEventGrid(e);break;case"event-list":this.initEventList(e);break;case"featured-event":this.initFeaturedEvent(e);break;case"category-nav":this.initCategoryNav(e);break;case"newsletter":this.initNewsletter(e);break;case"countdown":this.initCountdown(e);break;case"slider":this.initSlider(e);break;case"stats-counter":this.initStatsCounter(e)}})}static async initEventGrid(e){const t=document.getElementById(`event-grid-${e.id}`);if(!t)return;const n=t.dataset.source||"upcoming",s=parseInt(t.dataset.limit||"6",10);try{const e=await fetch(`${this.config.apiEndpoint}/events?filter=${n}&limit=${s}`);if(!e.ok)return;const i=(await e.json()).data||[];if(0===i.length)return void(t.innerHTML='<p class="col-span-full text-center text-gray-500">No events found</p>');t.innerHTML=i.map(e=>`\n                <a href="/event/${e.slug}" class="group bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition">\n                    <div class="aspect-video bg-gray-200 overflow-hidden">\n                        ${e.image?`<img src="${e.image}" alt="${this.escapeHtml(e.title)}" class="w-full h-full object-cover group-hover:scale-105 transition duration-300">`:""}\n                    </div>\n                    <div class="p-4">\n                        <div class="text-sm text-primary font-medium mb-1">${e.date_formatted||""}</div>\n                        <h3 class="font-semibold text-gray-900 group-hover:text-primary transition">${this.escapeHtml(e.title)}</h3>\n                        <p class="text-sm text-gray-500 mt-1">${e.venue||""}</p>\n                    </div>\n                </a>\n            `).join("")}catch(i){}}static async initFeaturedEvent(e){var t;const n=document.getElementById(`featured-event-${e.id}`);if(!n)return;const s=n.dataset.eventId;if(s)try{const e=await fetch(`${this.config.apiEndpoint}/events/${s}`);if(!e.ok)return;const i=(await e.json()).data;if(!i)return;n.innerHTML=`\n                <div class="lg:w-1/2 aspect-video lg:aspect-auto">\n                    ${i.image?`<img src="${i.image}" alt="${this.escapeHtml(i.title)}" class="w-full h-full object-cover">`:`\n                        <div class="w-full h-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center">\n                            <span class="text-white text-4xl font-bold">${(null==(t=i.title)?void 0:t.charAt(0))||"E"}</span>\n                        </div>\n                    `}\n                </div>\n                <div class="p-8 flex-1">\n                    <div class="text-primary font-medium mb-2">${i.date_formatted||""}</div>\n                    <h3 class="text-2xl md:text-3xl font-bold text-gray-900 mb-4">${this.escapeHtml(i.title)}</h3>\n                    <p class="text-gray-600 mb-6">${i.description||""}</p>\n                    <div class="flex items-center gap-4">\n                        <a href="/event/${i.slug}" class="btn-primary px-6 py-3 rounded-lg font-semibold">\n                            Get Tickets\n                        </a>\n                        <span class="text-lg font-semibold text-gray-900">\n                            ${i.price_from?`From ${i.currency||"€"}${i.price_from}`:"Free"}\n                        </span>\n                    </div>\n                </div>\n            `}catch(i){}}static async initCategoryNav(e){const t=document.getElementById(`category-nav-${e.id}`);if(!t)return;const n="true"===t.dataset.showCount;try{const e=await fetch(`${this.config.apiEndpoint}/categories`);if(!e.ok)return;const s=(await e.json()).data||[];if(0===s.length)return void(t.innerHTML='<p class="col-span-full text-center text-gray-500">No categories found</p>');t.innerHTML=s.map(e=>`\n                <a href="/events?category=${e.slug}" class="group flex flex-col items-center p-4 bg-white rounded-xl shadow-md hover:shadow-lg transition">\n                    <div class="w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-3 group-hover:bg-primary/20 transition">\n                        <span class="text-2xl">${e.icon||"🎫"}</span>\n                    </div>\n                    <span class="font-medium text-gray-900">${this.escapeHtml(e.name)}</span>\n                    ${n&&void 0!==e.events_count?`\n                        <span class="text-sm text-gray-500">${e.events_count} events</span>\n                    `:""}\n                </a>\n            `).join("")}catch(s){}}static initNewsletter(e){const t=document.getElementById(`newsletter-form-${e.id}`);t&&t.addEventListener("submit",async e=>{e.preventDefault();const n=t.querySelector('input[type="email"]'),s=null==n?void 0:n.value;if(s)try{if(!(await fetch(`${this.config.apiEndpoint}/newsletter/subscribe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})})).ok)throw new Error("Subscription failed");t.innerHTML='<p class="text-green-600 font-medium">Thank you for subscribing!</p>'}catch{t.innerHTML='<p class="text-red-600">Something went wrong. Please try again.</p>'}})}static async initEventList(e){const t=document.getElementById(`event-list-${e.id}`);if(!t)return;const n=t.dataset.source||"upcoming",s=parseInt(t.dataset.limit||"5",10),i="true"===t.dataset.showDate,a="true"===t.dataset.showVenue,r="true"===t.dataset.showPrice,o=t.dataset.emptyMessage||"No events found";try{const e=await fetch(`${this.config.apiEndpoint}/events?filter=${n}&limit=${s}`);if(!e.ok)return;const l=(await e.json()).data||[];if(0===l.length)return void(t.innerHTML=`<p class="text-center text-gray-500 py-8">${this.escapeHtml(o)}</p>`);t.innerHTML=l.map(e=>`\n                <a href="/event/${e.slug}" class="flex gap-4 p-4 bg-white rounded-lg shadow hover:shadow-md transition group">\n                    <div class="w-24 h-24 flex-shrink-0 rounded-lg overflow-hidden bg-gray-200">\n                        ${e.image?`<img src="${e.image}" alt="${this.escapeHtml(e.title)}" class="w-full h-full object-cover group-hover:scale-105 transition duration-300">`:""}\n                    </div>\n                    <div class="flex-1 min-w-0">\n                        <h3 class="font-semibold text-gray-900 group-hover:text-primary transition truncate">${this.escapeHtml(e.title)}</h3>\n                        ${i&&e.date_formatted?`<p class="text-sm text-primary font-medium">${e.date_formatted}</p>`:""}\n                        ${a&&e.venue?`<p class="text-sm text-gray-500">${e.venue}</p>`:""}\n                        ${r&&e.price_from?`<p class="text-sm font-medium text-gray-900 mt-1">From ${e.currency||"€"}${e.price_from}</p>`:""}\n                    </div>\n                </a>\n            `).join("")}catch(l){}}static initCountdown(e){const t=document.getElementById(`countdown-${e.id}`);if(!t)return;const n=t.dataset.target,s=t.dataset.expiredMessage||"Event has started!";if(!n)return;const i=new Date(n).getTime(),a=t.querySelector("[data-days]"),r=t.querySelector("[data-hours]"),o=t.querySelector("[data-minutes]"),l=t.querySelector("[data-seconds]"),d=()=>{const e=Date.now(),n=i-e;if(n<0)return void(t.innerHTML=`<p class="text-2xl font-bold text-primary">${s}</p>`);const d=Math.floor(n/864e5),c=Math.floor(n%864e5/36e5),m=Math.floor(n%36e5/6e4),u=Math.floor(n%6e4/1e3);a&&(a.textContent=String(d).padStart(2,"0")),r&&(r.textContent=String(c).padStart(2,"0")),o&&(o.textContent=String(m).padStart(2,"0")),l&&(l.textContent=String(u).padStart(2,"0"))};d(),setInterval(d,1e3)}static initSlider(e){const t=document.getElementById(`slider-${e.id}`);if(!t)return;const n=t.querySelectorAll(".slide");if(n.length<=1)return;const s="true"===t.dataset.autoplay,i=parseInt(t.dataset.speed||"5000",10);let a=0,r=null;const o=e=>{n.forEach((t,n)=>{t.classList.toggle("active",n===e),t.style.opacity=n===e?"1":"0"});t.querySelectorAll(".slider-dots button").forEach((t,n)=>{t.classList.toggle("bg-white",n===e),t.classList.toggle("bg-white/50",n!==e)}),a=e},l=()=>{o((a+1)%n.length)},d=t.querySelector(".slider-prev"),c=t.querySelector(".slider-next");null==d||d.addEventListener("click",()=>{o((a-1+n.length)%n.length),m()}),null==c||c.addEventListener("click",()=>{l(),m()}),t.querySelectorAll(".slider-dots button").forEach((e,t)=>{e.addEventListener("click",()=>{o(t),m()})});const m=()=>{r&&clearInterval(r),s&&(r=setInterval(l,i))};s&&(r=setInterval(l,i)),t.addEventListener("mouseenter",()=>{r&&clearInterval(r)}),t.addEventListener("mouseleave",()=>{s&&(r=setInterval(l,i))})}static initStatsCounter(e){const t=document.getElementById(`stats-${e.id}`);if(!t)return;if(!("true"===t.dataset.animate))return;const n=t.querySelectorAll("[data-count-to]");let s=!1;const i=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&!s&&(s=!0,n.forEach(e=>(e=>{const t=parseInt(e.getAttribute("data-count-to")||"0",10),n=t/125;let s=0;const i=()=>{s+=n,s<t?(e.textContent=Math.floor(s).toString(),requestAnimationFrame(i)):e.textContent=t.toString()};requestAnimationFrame(i)})(e)),i.disconnect())})},{threshold:.5});i.observe(t)}}__publicField(d,"renderers",new Map),__publicField(d,"config"),__publicField(d,"currentLanguage","en");class c{static init(){const e=new URLSearchParams(window.location.search);return this.isPreviewMode=e.has("preview")||"1"===e.get("preview"),this.isPreviewMode&&(this.setupMessageListener(),this.notifyReady()),this.isPreviewMode}static isActive(){return this.isPreviewMode}static setupMessageListener(){window.addEventListener("message",e=>{const t=e.data;if(t&&t.type)switch(t.type){case"THEME_UPDATE":t.theme&&this.handleThemeUpdate(t.theme);break;case"LAYOUT_UPDATE":t.layout&&this.handleLayoutUpdate(t.layout)}})}static notifyReady(){window.parent&&window.parent!==window&&window.parent.postMessage({type:"PREVIEW_READY"},"*")}static handleThemeUpdate(e){o.updateTheme(e)}static handleLayoutUpdate(e){this.layoutUpdateCallbacks.forEach(t=>{try{t(e)}catch(n){}})}static onLayoutUpdate(e){this.layoutUpdateCallbacks.push(e)}static offLayoutUpdate(e){const t=this.layoutUpdateCallbacks.indexOf(e);t>-1&&this.layoutUpdateCallbacks.splice(t,1)}static sendToParent(e){this.isPreviewMode&&window.parent&&window.parent!==window&&window.parent.postMessage(e,"*")}}__publicField(c,"isPreviewMode",!1),__publicField(c,"layoutUpdateCallbacks",[]);const m={en:{title:"We use cookies",description:'We use cookies to improve your experience on our site. By clicking "Accept All", you consent to the use of all cookies. You can also customize your preferences.',acceptAll:"Accept All",rejectAll:"Reject All",customize:"Customize",savePreferences:"Save Preferences",cookiePreferences:"Cookie Preferences",necessaryCookies:"Necessary Cookies",necessaryDescription:"Required for the website to function. Cannot be disabled.",analyticsCookies:"Analytics Cookies",analyticsDescription:"Help us understand how visitors interact with our website.",marketingCookies:"Marketing Cookies",marketingDescription:"Used to deliver relevant advertisements and track ad performance.",preferenceCookies:"Preference Cookies",preferenceDescription:"Remember your settings and preferences for a better experience.",privacyPolicy:"Privacy Policy",cookiePolicy:"Cookie Policy",cookieSettings:"Cookie Settings",close:"Close",renewalTitle:"Your cookie preferences are expiring",renewalDescription:"Your cookie consent will expire soon. Please renew your preferences to continue enjoying a personalized experience.",renewalUrgentDescription:"Your cookie consent expires in a few days. Renew now to keep your preferences.",renewNow:"Renew Now",dismiss:"Dismiss"},ro:{title:"Folosim cookie-uri",description:'Folosim cookie-uri pentru a imbunatatii experienta dumneavoastra pe site-ul nostru. Apasand "Accepta toate", consimtiti la utilizarea tuturor cookie-urilor. Puteti personaliza preferintele.',acceptAll:"Accepta toate",rejectAll:"Refuza toate",customize:"Personalizeaza",savePreferences:"Salveaza preferintele",cookiePreferences:"Preferinte cookie-uri",necessaryCookies:"Cookie-uri necesare",necessaryDescription:"Necesare pentru functionarea site-ului. Nu pot fi dezactivate.",analyticsCookies:"Cookie-uri de analiza",analyticsDescription:"Ne ajuta sa intelegem cum interactioneaza vizitatorii cu site-ul nostru.",marketingCookies:"Cookie-uri de marketing",marketingDescription:"Utilizate pentru a livra reclame relevante si a urmari performanta.",preferenceCookies:"Cookie-uri de preferinte",preferenceDescription:"Retin setarile si preferintele pentru o experienta mai buna.",privacyPolicy:"Politica de confidentialitate",cookiePolicy:"Politica de cookie-uri",cookieSettings:"Setari cookie-uri",close:"Inchide",renewalTitle:"Preferintele tale de cookie-uri expira",renewalDescription:"Consimtamantul tau pentru cookie-uri va expira in curand. Te rugam sa reinnoiesti preferintele pentru a continua sa te bucuri de o experienta personalizata.",renewalUrgentDescription:"Consimtamantul tau pentru cookie-uri expira in cateva zile. Reinnoieste acum pentru a pastra preferintele.",renewNow:"Reinnoieste acum",dismiss:"Inchide"}},u="tixello_cookie_consent",p="tixello_visitor_id",g="1.0",h=class e{constructor(){__publicField(this,"name","cookie-consent"),__publicField(this,"apiClient",null),__publicField(this,"eventBus",null),__publicField(this,"config",{position:"bottom",theme:"auto",language:"auto",showSettingsLink:!0,consentVersion:g,expiryDays:365,enableGoogleConsentMode:!0,showFooterLink:!0}),__publicField(this,"consent",{necessary:!0,analytics:!1,marketing:!1,preferences:!1}),__publicField(this,"visitorId",""),__publicField(this,"bannerElement",null),__publicField(this,"settingsModalElement",null),__publicField(this,"footerLinkElement",null),__publicField(this,"renewalBannerElement",null),__publicField(this,"isInitialized",!1),__publicField(this,"currentLanguage","en"),__publicField(this,"t",m.en),__publicField(this,"isDarkMode",!1),__publicField(this,"pendingScripts",[]),__publicField(this,"loadedScripts",new Set),__publicField(this,"previousActiveElement",null),__publicField(this,"renewalDismissed",!1)}static getInstance(){return e.instance||(e.instance=new e),e.instance}configure(e){this.config={...this.config,...e},this.detectLanguage(),this.detectTheme(),this.bannerElement&&(this.bannerElement.innerHTML=this.getBannerHTML(),this.applyThemeStyles(),this.bindBannerEvents())}async init(e,t,n){var s,i;if(this.isInitialized)return;this.apiClient=e,this.eventBus=t,this.visitorId=this.getOrCreateVisitorId(),(null==(s=null==n?void 0:n.site)?void 0:s.language)&&(this.config.language=n.site.language),(null==(i=null==n?void 0:n.theme)?void 0:i.primaryColor)&&(this.config.primaryColor=n.theme.primaryColor),this.detectLanguage(),this.detectTheme(),this.listenForThemeChanges(),this.initGoogleConsentMode();const a=this.getStoredConsent();a&&a.version===this.config.consentVersion?(this.consent=a.preferences,this.emitConsentUpdate(),this.updateGoogleConsentMode(),this.loadPendingScripts()):this.showBanner(),a&&(await this.syncWithServer(),this.checkRenewalStatus()),this.config.showFooterLink&&this.addFooterLink(),this.isInitialized=!0}detectTheme(){var e;const t=this.config.theme||"auto";this.isDarkMode="auto"===t?(null==(e=window.matchMedia)?void 0:e.call(window,"(prefers-color-scheme: dark)").matches)||!1:"dark"===t}listenForThemeChanges(){var e;"auto"===this.config.theme&&(null==(e=window.matchMedia)||e.call(window,"(prefers-color-scheme: dark)").addEventListener("change",e=>{this.isDarkMode=e.matches,this.applyThemeStyles()}))}applyThemeStyles(){this.bannerElement&&this.bannerElement.classList.toggle("tixello-dark",this.isDarkMode),this.settingsModalElement&&this.settingsModalElement.classList.toggle("tixello-dark",this.isDarkMode)}setTheme(e){this.config.theme=e,this.detectTheme(),this.applyThemeStyles()}detectLanguage(){var e,t;let n=this.config.language||"auto";if("auto"===n){const s=(null==(e=navigator.language)?void 0:e.substring(0,2))||"en";n=(null==(t=document.documentElement.lang)?void 0:t.substring(0,2))||s}this.currentLanguage=m[n]?n:"en",this.t=m[this.currentLanguage]}setLanguage(e){this.config.language=e,this.detectLanguage(),this.bannerElement&&(this.bannerElement.innerHTML=this.getBannerHTML(),this.bindBannerEvents()),this.settingsModalElement&&(this.settingsModalElement.innerHTML=this.getSettingsHTML(),this.bindSettingsEvents()),this.footerLinkElement&&(this.footerLinkElement.textContent=this.config.footerLinkText||this.t.cookieSettings)}registerScript(e){this.loadedScripts.has(e.id)||(this.hasConsent(e.category)?this.loadScript(e):this.pendingScripts.push(e))}loadScript(e){var t;if(!this.loadedScripts.has(e.id))if(e.src){const t=document.createElement("script");t.id=`tixello-script-${e.id}`,t.src=e.src,e.async&&(t.async=!0),e.defer&&(t.defer=!0),t.onload=()=>{var t;this.loadedScripts.add(e.id),null==(t=e.onLoad)||t.call(e)},document.head.appendChild(t)}else if(e.inline){const n=document.createElement("script");n.id=`tixello-script-${e.id}`,n.textContent=e.inline,document.head.appendChild(n),this.loadedScripts.add(e.id),null==(t=e.onLoad)||t.call(e)}}loadPendingScripts(){this.pendingScripts.filter(e=>this.hasConsent(e.category)).forEach(e=>this.loadScript(e)),this.pendingScripts=this.pendingScripts.filter(e=>!this.hasConsent(e.category))}addFooterLink(){if(document.getElementById("tixello-cookie-settings-link"))return;this.footerLinkElement=document.createElement("button"),this.footerLinkElement.id="tixello-cookie-settings-link",this.footerLinkElement.className="tixello-footer-link",this.footerLinkElement.textContent=this.config.footerLinkText||this.t.cookieSettings,this.footerLinkElement.setAttribute("aria-label",this.t.cookieSettings),this.footerLinkElement.addEventListener("click",()=>this.showSettings());const e=document.querySelector("footer")||document.querySelector('[role="contentinfo"]');e?e.appendChild(this.footerLinkElement):(this.footerLinkElement.classList.add("tixello-footer-link-fixed"),document.body.appendChild(this.footerLinkElement))}static createFooterLink(t){const n=e.getInstance(),s=document.createElement("button");return s.className="tixello-footer-link",s.textContent=t||n.t.cookieSettings,s.setAttribute("aria-label",n.t.cookieSettings),s.addEventListener("click",()=>n.showSettings()),s}async checkRenewalStatus(){var e;if(this.apiClient&&!this.renewalDismissed)try{const t=await this.apiClient.get(`/consent/renewal-status?visitor_id=${encodeURIComponent(this.visitorId)}`);t.success&&(null==(e=t.data)?void 0:e.needs_renewal)&&this.showRenewalBanner(t.data.is_urgent,t.data.days_until_expiry)}catch(t){}}showRenewalBanner(e,t){this.renewalBannerElement||this.renewalDismissed||(this.renewalBannerElement=document.createElement("div"),this.renewalBannerElement.id="tixello-renewal-banner",this.renewalBannerElement.setAttribute("role","alert"),this.renewalBannerElement.setAttribute("aria-live","polite"),this.renewalBannerElement.innerHTML=this.getRenewalBannerHTML(e,t),this.renewalBannerElement.style.cssText=this.getRenewalBannerStyles(e),this.isDarkMode&&this.renewalBannerElement.classList.add("tixello-dark"),document.body.appendChild(this.renewalBannerElement),this.bindRenewalBannerEvents())}getRenewalBannerHTML(e,t){const n=e?this.t.renewalUrgentDescription:this.t.renewalDescription;return`\n            <div class="tixello-renewal-content ${e?"tixello-renewal-urgent":""}">\n                <div class="tixello-renewal-text">\n                    <p class="tixello-renewal-title">${this.t.renewalTitle}</p>\n                    <p class="tixello-renewal-description">\n                        ${n}\n                        <span class="tixello-renewal-days">(${t} days remaining)</span>\n                    </p>\n                </div>\n                <div class="tixello-renewal-actions">\n                    <button class="tixello-consent-btn tixello-consent-btn-outline" id="tixello-renewal-dismiss">\n                        ${this.t.dismiss}\n                    </button>\n                    <button class="tixello-consent-btn tixello-consent-btn-primary" id="tixello-renewal-renew">\n                        ${this.t.renewNow}\n                    </button>\n                </div>\n            </div>\n        `}getRenewalBannerStyles(e){return`\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            z-index: 99998;\n            padding: 0.75rem 1rem;\n            background: ${e?"#fef3c7":"#dbeafe"};\n            border-bottom: 2px solid ${e?"#f59e0b":"#3b82f6"};\n            font-family: var(--tixello-font, system-ui, sans-serif);\n        `}bindRenewalBannerEvents(){const e=document.getElementById("tixello-renewal-dismiss"),t=document.getElementById("tixello-renewal-renew");null==e||e.addEventListener("click",()=>this.dismissRenewalBanner()),null==t||t.addEventListener("click",()=>this.renewConsent())}dismissRenewalBanner(){this.renewalBannerElement&&(this.renewalBannerElement.remove(),this.renewalBannerElement=null),this.renewalDismissed=!0,sessionStorage.setItem("tixello_renewal_dismissed","true")}async renewConsent(){if(!this.apiClient)return this.saveConsent("update"),void this.dismissRenewalBanner();try{await this.apiClient.post("/consent/renew",{visitor_id:this.visitorId}),this.saveConsent("update"),this.dismissRenewalBanner()}catch(e){}}initGoogleConsentMode(){this.config.enableGoogleConsentMode&&(window.dataLayer=window.dataLayer||[],window.gtag||(window.gtag=function(){window.dataLayer.push(arguments)}),window.gtag("consent","default",{analytics_storage:"denied",ad_storage:"denied",ad_user_data:"denied",ad_personalization:"denied",functionality_storage:"denied",personalization_storage:"denied",security_storage:"granted"}))}updateGoogleConsentMode(){this.config.enableGoogleConsentMode&&window.gtag&&window.gtag("consent","update",{analytics_storage:this.consent.analytics?"granted":"denied",ad_storage:this.consent.marketing?"granted":"denied",ad_user_data:this.consent.marketing?"granted":"denied",ad_personalization:this.consent.marketing?"granted":"denied",functionality_storage:this.consent.preferences?"granted":"denied",personalization_storage:this.consent.preferences?"granted":"denied"})}getConsent(){return{...this.consent}}hasConsent(e){return!0===this.consent[e]}showSettings(){this.showSettingsModal()}async withdrawConsent(){if(this.consent={necessary:!0,analytics:!1,marketing:!1,preferences:!1},this.saveConsent("reject_all"),this.emitConsentUpdate(),this.updateGoogleConsentMode(),this.apiClient)try{await this.apiClient.post("/consent/withdraw",{visitor_id:this.visitorId})}catch(e){}this.showBanner()}getOrCreateVisitorId(){let e=localStorage.getItem(p);return e||(e=this.generateUUID(),localStorage.setItem(p,e)),e}generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}getStoredConsent(){try{const e=localStorage.getItem(u);if(e)return JSON.parse(e)}catch{}return null}saveConsent(e){const t={preferences:this.consent,consentedAt:(new Date).toISOString(),version:this.config.consentVersion||g,visitorId:this.visitorId};localStorage.setItem(u,JSON.stringify(t)),this.syncConsentToServer(e)}async syncConsentToServer(e){if(this.apiClient)try{await this.apiClient.post("/consent",{visitor_id:this.visitorId,necessary:this.consent.necessary,analytics:this.consent.analytics,marketing:this.consent.marketing,preferences:this.consent.preferences,action:e,consent_version:this.config.consentVersion||g,page_url:window.location.href,referrer_url:document.referrer||null})}catch(t){}}async syncWithServer(){var e,t;if(this.apiClient)try{const n=await this.apiClient.get(`/consent?visitor_id=${encodeURIComponent(this.visitorId)}`);if(n.success&&(null==(e=n.data)?void 0:e.has_consent)&&(null==(t=n.data)?void 0:t.consent)){const e=n.data.consent;this.consent={necessary:!0,analytics:e.analytics,marketing:e.marketing,preferences:e.preferences},this.saveConsent("update"),this.updateGoogleConsentMode(),this.loadPendingScripts()}}catch(n){}}emitConsentUpdate(){this.eventBus&&this.eventBus.emit("consent:update",this.consent),window.dispatchEvent(new CustomEvent("tixello:consent",{detail:this.consent}))}showBanner(){if(this.bannerElement)return this.bannerElement.style.display="block",this.bannerElement.setAttribute("aria-hidden","false"),void this.focusFirstButton();this.bannerElement=document.createElement("div"),this.bannerElement.id="tixello-cookie-banner",this.bannerElement.setAttribute("role","dialog"),this.bannerElement.setAttribute("aria-modal","false"),this.bannerElement.setAttribute("aria-label",this.t.cookiePreferences),this.bannerElement.setAttribute("aria-describedby","tixello-consent-description"),this.bannerElement.innerHTML=this.getBannerHTML(),this.bannerElement.style.cssText=this.getBannerStyles(),this.isDarkMode&&this.bannerElement.classList.add("tixello-dark"),document.body.appendChild(this.bannerElement),this.bindBannerEvents(),this.focusFirstButton()}focusFirstButton(){setTimeout(()=>{var e;const t=null==(e=this.bannerElement)?void 0:e.querySelector("button");null==t||t.focus()},100)}hideBanner(){this.bannerElement&&(this.bannerElement.style.display="none",this.bannerElement.setAttribute("aria-hidden","true"))}getBannerHTML(){const e=this.config.bannerTitle||this.t.title,t=this.config.bannerDescription||this.t.description;let n="";return this.config.privacyPolicyUrl&&(n+=`<a href="${this.config.privacyPolicyUrl}" target="_blank" rel="noopener">${this.t.privacyPolicy}</a>`),this.config.cookiePolicyUrl&&(n&&(n+=" | "),n+=`<a href="${this.config.cookiePolicyUrl}" target="_blank" rel="noopener">${this.t.cookiePolicy}</a>`),`\n            <div class="tixello-consent-content">\n                <div class="tixello-consent-text">\n                    <p class="tixello-consent-title" id="tixello-consent-title">${e}</p>\n                    <p class="tixello-consent-description" id="tixello-consent-description">\n                        ${t}\n                        ${n?`<br><span class="tixello-consent-links">${n}</span>`:""}\n                    </p>\n                </div>\n                <div class="tixello-consent-actions" role="group" aria-label="Cookie consent options">\n                    <button class="tixello-consent-btn tixello-consent-btn-secondary" id="tixello-consent-customize" aria-describedby="tixello-consent-description">\n                        ${this.t.customize}\n                    </button>\n                    <button class="tixello-consent-btn tixello-consent-btn-outline" id="tixello-consent-reject" aria-describedby="tixello-consent-description">\n                        ${this.t.rejectAll}\n                    </button>\n                    <button class="tixello-consent-btn tixello-consent-btn-primary" id="tixello-consent-accept" aria-describedby="tixello-consent-description">\n                        ${this.t.acceptAll}\n                    </button>\n                </div>\n            </div>\n        `}getBannerStyles(){const e=this.config.position||"bottom";return`\n            position: fixed;\n            ${"bottom"===e?"bottom: 0; left: 0; right: 0;":"top"===e?"top: 0; left: 0; right: 0;":"top: 50%; left: 50%; transform: translate(-50%, -50%);"}\n            z-index: 99999;\n            padding: 1rem;\n            font-family: var(--tixello-font, system-ui, sans-serif);\n        `}bindBannerEvents(){var e;const t=document.getElementById("tixello-consent-accept"),n=document.getElementById("tixello-consent-reject"),s=document.getElementById("tixello-consent-customize");null==t||t.addEventListener("click",()=>this.acceptAll()),null==n||n.addEventListener("click",()=>this.rejectAll()),null==s||s.addEventListener("click",()=>this.showSettingsModal()),null==(e=this.bannerElement)||e.addEventListener("keydown",e=>{"Escape"===e.key&&this.rejectAll()})}acceptAll(){this.consent={necessary:!0,analytics:!0,marketing:!0,preferences:!0},this.saveConsent("accept_all"),this.hideBanner(),this.emitConsentUpdate(),this.updateGoogleConsentMode(),this.loadPendingScripts()}rejectAll(){this.consent={necessary:!0,analytics:!1,marketing:!1,preferences:!1},this.saveConsent("reject_all"),this.hideBanner(),this.emitConsentUpdate(),this.updateGoogleConsentMode()}showSettingsModal(){if(this.previousActiveElement=document.activeElement,this.settingsModalElement)return this.settingsModalElement.style.display="flex",this.settingsModalElement.setAttribute("aria-hidden","false"),this.updateSettingsCheckboxes(),void this.trapFocus();this.settingsModalElement=document.createElement("div"),this.settingsModalElement.id="tixello-cookie-settings",this.settingsModalElement.setAttribute("role","dialog"),this.settingsModalElement.setAttribute("aria-modal","true"),this.settingsModalElement.setAttribute("aria-labelledby","tixello-settings-title"),this.settingsModalElement.innerHTML=this.getSettingsHTML(),this.settingsModalElement.style.cssText=this.getSettingsStyles(),this.isDarkMode&&this.settingsModalElement.classList.add("tixello-dark"),document.body.appendChild(this.settingsModalElement),this.bindSettingsEvents(),this.trapFocus()}trapFocus(){setTimeout(()=>{var e;const t=null==(e=this.settingsModalElement)?void 0:e.querySelector(".tixello-settings-modal"),n=null==t?void 0:t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');n&&n.length>0&&n[0].focus()},100)}updateSettingsCheckboxes(){const e=document.getElementById("tixello-toggle-analytics"),t=document.getElementById("tixello-toggle-marketing"),n=document.getElementById("tixello-toggle-preferences");e&&(e.checked=this.consent.analytics),t&&(t.checked=this.consent.marketing),n&&(n.checked=this.consent.preferences)}hideSettingsModal(){this.settingsModalElement&&(this.settingsModalElement.style.display="none",this.settingsModalElement.setAttribute("aria-hidden","true"),this.previousActiveElement instanceof HTMLElement&&this.previousActiveElement.focus())}getSettingsHTML(){return`\n            <div class="tixello-settings-backdrop" id="tixello-settings-backdrop"></div>\n            <div class="tixello-settings-modal" role="document">\n                <div class="tixello-settings-header">\n                    <h2 id="tixello-settings-title">${this.t.cookiePreferences}</h2>\n                    <button class="tixello-settings-close" id="tixello-settings-close" aria-label="${this.t.close}">\n                        <span aria-hidden="true">&times;</span>\n                    </button>\n                </div>\n                <div class="tixello-settings-body">\n                    <div class="tixello-settings-category">\n                        <div class="tixello-settings-category-header">\n                            <div>\n                                <h3 id="necessary-label">${this.t.necessaryCookies}</h3>\n                                <p id="necessary-desc">${this.t.necessaryDescription}</p>\n                            </div>\n                            <label class="tixello-toggle tixello-toggle-disabled">\n                                <input type="checkbox" checked disabled aria-labelledby="necessary-label" aria-describedby="necessary-desc">\n                                <span class="tixello-toggle-slider" aria-hidden="true"></span>\n                            </label>\n                        </div>\n                    </div>\n\n                    <div class="tixello-settings-category">\n                        <div class="tixello-settings-category-header">\n                            <div>\n                                <h3 id="analytics-label">${this.t.analyticsCookies}</h3>\n                                <p id="analytics-desc">${this.t.analyticsDescription}</p>\n                            </div>\n                            <label class="tixello-toggle">\n                                <input type="checkbox" id="tixello-toggle-analytics" ${this.consent.analytics?"checked":""} aria-labelledby="analytics-label" aria-describedby="analytics-desc">\n                                <span class="tixello-toggle-slider" aria-hidden="true"></span>\n                            </label>\n                        </div>\n                    </div>\n\n                    <div class="tixello-settings-category">\n                        <div class="tixello-settings-category-header">\n                            <div>\n                                <h3 id="marketing-label">${this.t.marketingCookies}</h3>\n                                <p id="marketing-desc">${this.t.marketingDescription}</p>\n                            </div>\n                            <label class="tixello-toggle">\n                                <input type="checkbox" id="tixello-toggle-marketing" ${this.consent.marketing?"checked":""} aria-labelledby="marketing-label" aria-describedby="marketing-desc">\n                                <span class="tixello-toggle-slider" aria-hidden="true"></span>\n                            </label>\n                        </div>\n                    </div>\n\n                    <div class="tixello-settings-category">\n                        <div class="tixello-settings-category-header">\n                            <div>\n                                <h3 id="preferences-label">${this.t.preferenceCookies}</h3>\n                                <p id="preferences-desc">${this.t.preferenceDescription}</p>\n                            </div>\n                            <label class="tixello-toggle">\n                                <input type="checkbox" id="tixello-toggle-preferences" ${this.consent.preferences?"checked":""} aria-labelledby="preferences-label" aria-describedby="preferences-desc">\n                                <span class="tixello-toggle-slider" aria-hidden="true"></span>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n                <div class="tixello-settings-footer">\n                    <button class="tixello-consent-btn tixello-consent-btn-outline" id="tixello-settings-reject-all">\n                        ${this.t.rejectAll}\n                    </button>\n                    <button class="tixello-consent-btn tixello-consent-btn-primary" id="tixello-settings-save">\n                        ${this.t.savePreferences}\n                    </button>\n                </div>\n            </div>\n        `}getSettingsStyles(){return"\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            z-index: 100000;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-family: var(--tixello-font, system-ui, sans-serif);\n        "}bindSettingsEvents(){var e;const t=document.getElementById("tixello-settings-close"),n=document.getElementById("tixello-settings-backdrop"),s=document.getElementById("tixello-settings-save"),i=document.getElementById("tixello-settings-reject-all");null==t||t.addEventListener("click",()=>this.hideSettingsModal()),null==n||n.addEventListener("click",()=>this.hideSettingsModal()),null==s||s.addEventListener("click",()=>this.saveSettings()),null==i||i.addEventListener("click",()=>{this.rejectAll(),this.hideSettingsModal()}),null==(e=this.settingsModalElement)||e.addEventListener("keydown",e=>{var t;if("Escape"===e.key&&this.hideSettingsModal(),"Tab"===e.key){const n=null==(t=this.settingsModalElement)?void 0:t.querySelector(".tixello-settings-modal"),s=null==n?void 0:n.querySelectorAll('button, [href], input:not([disabled]), select, textarea, [tabindex]:not([tabindex="-1"])');if(s&&s.length>0){const t=s[0],n=s[s.length-1];e.shiftKey&&document.activeElement===t?(e.preventDefault(),n.focus()):e.shiftKey||document.activeElement!==n||(e.preventDefault(),t.focus())}}})}saveSettings(){const e=document.getElementById("tixello-toggle-analytics"),t=document.getElementById("tixello-toggle-marketing"),n=document.getElementById("tixello-toggle-preferences");this.consent={necessary:!0,analytics:(null==e?void 0:e.checked)||!1,marketing:(null==t?void 0:t.checked)||!1,preferences:(null==n?void 0:n.checked)||!1},this.saveConsent("customize"),this.hideSettingsModal(),this.hideBanner(),this.emitConsentUpdate(),this.updateGoogleConsentMode(),this.loadPendingScripts()}static injectStyles(){if(document.getElementById("tixello-consent-styles"))return;const e=document.createElement("style");e.id="tixello-consent-styles",e.textContent='\n            /* Light theme (default) */\n            #tixello-cookie-banner {\n                background: white;\n                box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);\n            }\n\n            .tixello-consent-content {\n                max-width: 1200px;\n                margin: 0 auto;\n                display: flex;\n                flex-wrap: wrap;\n                align-items: center;\n                justify-content: space-between;\n                gap: 1rem;\n                background: white;\n                padding: 1.5rem;\n                border-radius: 0.5rem;\n            }\n\n            .tixello-consent-text {\n                flex: 1;\n                min-width: 280px;\n            }\n\n            .tixello-consent-title {\n                font-size: 1.125rem;\n                font-weight: 600;\n                margin: 0 0 0.5rem 0;\n                color: #111827;\n            }\n\n            .tixello-consent-description {\n                font-size: 0.875rem;\n                color: #6b7280;\n                margin: 0;\n                line-height: 1.5;\n            }\n\n            .tixello-consent-description a,\n            .tixello-consent-links a {\n                color: var(--tixello-primary, #3b82f6);\n                text-decoration: underline;\n            }\n\n            .tixello-consent-links {\n                display: inline-block;\n                margin-top: 0.5rem;\n                font-size: 0.8125rem;\n            }\n\n            .tixello-consent-actions {\n                display: flex;\n                flex-wrap: wrap;\n                gap: 0.5rem;\n            }\n\n            .tixello-consent-btn {\n                padding: 0.625rem 1.25rem;\n                border-radius: 0.375rem;\n                font-size: 0.875rem;\n                font-weight: 500;\n                cursor: pointer;\n                transition: all 0.2s;\n                border: none;\n            }\n\n            .tixello-consent-btn:focus {\n                outline: 2px solid var(--tixello-primary, #3b82f6);\n                outline-offset: 2px;\n            }\n\n            .tixello-consent-btn-primary {\n                background: var(--tixello-primary, #3b82f6);\n                color: white;\n            }\n\n            .tixello-consent-btn-primary:hover {\n                background: var(--tixello-primary-dark, #2563eb);\n            }\n\n            .tixello-consent-btn-secondary {\n                background: #f3f4f6;\n                color: #374151;\n            }\n\n            .tixello-consent-btn-secondary:hover {\n                background: #e5e7eb;\n            }\n\n            .tixello-consent-btn-outline {\n                background: transparent;\n                color: #374151;\n                border: 1px solid #d1d5db;\n            }\n\n            .tixello-consent-btn-outline:hover {\n                background: #f3f4f6;\n            }\n\n            /* Settings Modal */\n            .tixello-settings-backdrop {\n                position: absolute;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background: rgba(0, 0, 0, 0.5);\n            }\n\n            .tixello-settings-modal {\n                position: relative;\n                background: white;\n                border-radius: 0.75rem;\n                max-width: 500px;\n                width: 90%;\n                max-height: 90vh;\n                overflow-y: auto;\n                box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n            }\n\n            .tixello-settings-header {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                padding: 1.25rem 1.5rem;\n                border-bottom: 1px solid #e5e7eb;\n            }\n\n            .tixello-settings-header h2 {\n                margin: 0;\n                font-size: 1.25rem;\n                font-weight: 600;\n                color: #111827;\n            }\n\n            .tixello-settings-close {\n                background: none;\n                border: none;\n                font-size: 1.5rem;\n                color: #6b7280;\n                cursor: pointer;\n                padding: 0.25rem;\n                line-height: 1;\n                border-radius: 0.25rem;\n            }\n\n            .tixello-settings-close:hover {\n                color: #111827;\n            }\n\n            .tixello-settings-close:focus {\n                outline: 2px solid var(--tixello-primary, #3b82f6);\n                outline-offset: 2px;\n            }\n\n            .tixello-settings-body {\n                padding: 1rem 1.5rem;\n            }\n\n            .tixello-settings-category {\n                padding: 1rem 0;\n                border-bottom: 1px solid #e5e7eb;\n            }\n\n            .tixello-settings-category:last-child {\n                border-bottom: none;\n            }\n\n            .tixello-settings-category-header {\n                display: flex;\n                justify-content: space-between;\n                align-items: flex-start;\n                gap: 1rem;\n            }\n\n            .tixello-settings-category h3 {\n                margin: 0 0 0.25rem 0;\n                font-size: 0.9375rem;\n                font-weight: 600;\n                color: #111827;\n            }\n\n            .tixello-settings-category p {\n                margin: 0;\n                font-size: 0.8125rem;\n                color: #6b7280;\n                line-height: 1.4;\n            }\n\n            .tixello-settings-footer {\n                display: flex;\n                justify-content: flex-end;\n                gap: 0.75rem;\n                padding: 1.25rem 1.5rem;\n                border-top: 1px solid #e5e7eb;\n            }\n\n            /* Toggle Switch */\n            .tixello-toggle {\n                position: relative;\n                display: inline-block;\n                width: 48px;\n                height: 26px;\n                flex-shrink: 0;\n            }\n\n            .tixello-toggle input {\n                opacity: 0;\n                width: 0;\n                height: 0;\n            }\n\n            .tixello-toggle input:focus + .tixello-toggle-slider {\n                box-shadow: 0 0 0 2px var(--tixello-primary, #3b82f6);\n            }\n\n            .tixello-toggle-slider {\n                position: absolute;\n                cursor: pointer;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background-color: #d1d5db;\n                transition: 0.3s;\n                border-radius: 26px;\n            }\n\n            .tixello-toggle-slider:before {\n                position: absolute;\n                content: "";\n                height: 20px;\n                width: 20px;\n                left: 3px;\n                bottom: 3px;\n                background-color: white;\n                transition: 0.3s;\n                border-radius: 50%;\n            }\n\n            .tixello-toggle input:checked + .tixello-toggle-slider {\n                background-color: var(--tixello-primary, #3b82f6);\n            }\n\n            .tixello-toggle input:checked + .tixello-toggle-slider:before {\n                transform: translateX(22px);\n            }\n\n            .tixello-toggle-disabled .tixello-toggle-slider {\n                cursor: not-allowed;\n                opacity: 0.6;\n            }\n\n            .tixello-toggle-disabled input:checked + .tixello-toggle-slider {\n                background-color: #9ca3af;\n            }\n\n            /* Footer Link */\n            .tixello-footer-link {\n                background: none;\n                border: none;\n                color: #6b7280;\n                font-size: 0.75rem;\n                cursor: pointer;\n                padding: 0.5rem;\n                text-decoration: underline;\n            }\n\n            .tixello-footer-link:hover {\n                color: var(--tixello-primary, #3b82f6);\n            }\n\n            .tixello-footer-link:focus {\n                outline: 2px solid var(--tixello-primary, #3b82f6);\n                outline-offset: 2px;\n            }\n\n            .tixello-footer-link-fixed {\n                position: fixed;\n                bottom: 1rem;\n                left: 1rem;\n                z-index: 99998;\n                background: white;\n                padding: 0.5rem 1rem;\n                border-radius: 0.25rem;\n                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n            }\n\n            /* Dark Mode */\n            #tixello-cookie-banner.tixello-dark {\n                background: #1f2937;\n                box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);\n            }\n\n            .tixello-dark .tixello-consent-content {\n                background: #1f2937;\n            }\n\n            .tixello-dark .tixello-consent-title {\n                color: #f9fafb;\n            }\n\n            .tixello-dark .tixello-consent-description {\n                color: #9ca3af;\n            }\n\n            .tixello-dark .tixello-consent-btn-secondary {\n                background: #374151;\n                color: #f3f4f6;\n            }\n\n            .tixello-dark .tixello-consent-btn-secondary:hover {\n                background: #4b5563;\n            }\n\n            .tixello-dark .tixello-consent-btn-outline {\n                color: #f3f4f6;\n                border-color: #4b5563;\n            }\n\n            .tixello-dark .tixello-consent-btn-outline:hover {\n                background: #374151;\n            }\n\n            .tixello-dark .tixello-settings-modal {\n                background: #1f2937;\n            }\n\n            .tixello-dark .tixello-settings-header {\n                border-bottom-color: #374151;\n            }\n\n            .tixello-dark .tixello-settings-header h2 {\n                color: #f9fafb;\n            }\n\n            .tixello-dark .tixello-settings-close {\n                color: #9ca3af;\n            }\n\n            .tixello-dark .tixello-settings-close:hover {\n                color: #f9fafb;\n            }\n\n            .tixello-dark .tixello-settings-category {\n                border-bottom-color: #374151;\n            }\n\n            .tixello-dark .tixello-settings-category h3 {\n                color: #f9fafb;\n            }\n\n            .tixello-dark .tixello-settings-category p {\n                color: #9ca3af;\n            }\n\n            .tixello-dark .tixello-settings-footer {\n                border-top-color: #374151;\n            }\n\n            .tixello-dark .tixello-toggle-slider {\n                background-color: #4b5563;\n            }\n\n            .tixello-dark .tixello-footer-link {\n                color: #9ca3af;\n            }\n\n            .tixello-dark .tixello-footer-link-fixed {\n                background: #1f2937;\n            }\n\n            /* Renewal Banner */\n            .tixello-renewal-content {\n                max-width: 1200px;\n                margin: 0 auto;\n                display: flex;\n                flex-wrap: wrap;\n                align-items: center;\n                justify-content: space-between;\n                gap: 1rem;\n            }\n\n            .tixello-renewal-text {\n                flex: 1;\n                min-width: 280px;\n            }\n\n            .tixello-renewal-title {\n                font-size: 0.9375rem;\n                font-weight: 600;\n                margin: 0 0 0.25rem 0;\n                color: #1f2937;\n            }\n\n            .tixello-renewal-description {\n                font-size: 0.8125rem;\n                color: #4b5563;\n                margin: 0;\n            }\n\n            .tixello-renewal-days {\n                font-weight: 500;\n            }\n\n            .tixello-renewal-actions {\n                display: flex;\n                gap: 0.5rem;\n            }\n\n            .tixello-renewal-urgent .tixello-renewal-title {\n                color: #92400e;\n            }\n\n            .tixello-renewal-urgent .tixello-renewal-description {\n                color: #78350f;\n            }\n\n            .tixello-dark #tixello-renewal-banner {\n                background: #1e3a5f;\n                border-bottom-color: #3b82f6;\n            }\n\n            .tixello-dark .tixello-renewal-title {\n                color: #f3f4f6;\n            }\n\n            .tixello-dark .tixello-renewal-description {\n                color: #d1d5db;\n            }\n\n            /* Responsive */\n            @media (max-width: 640px) {\n                .tixello-consent-content {\n                    flex-direction: column;\n                    align-items: stretch;\n                }\n\n                .tixello-consent-actions {\n                    flex-direction: column;\n                }\n\n                .tixello-consent-btn {\n                    width: 100%;\n                    text-align: center;\n                }\n\n                .tixello-renewal-content {\n                    flex-direction: column;\n                    align-items: stretch;\n                    text-align: center;\n                }\n\n                .tixello-renewal-actions {\n                    flex-direction: column;\n                    width: 100%;\n                }\n            }\n\n            /* Reduced motion */\n            @media (prefers-reduced-motion: reduce) {\n                .tixello-toggle-slider,\n                .tixello-toggle-slider:before,\n                .tixello-consent-btn {\n                    transition: none;\n                }\n            }\n        ',document.head.appendChild(e)}};__publicField(h,"instance");let x=h;"undefined"!=typeof document&&x.injectStyles(),x.getInstance();const v=class e{constructor(){__publicField(this,"config"),__publicField(this,"userData"),__publicField(this,"deviceInfo"),__publicField(this,"eventQueue",[]),__publicField(this,"pageEntryTime",Date.now()),__publicField(this,"maxScrollDepth",0),__publicField(this,"heartbeatTimer"),__publicField(this,"flushTimer"),__publicField(this,"isInitialized",!1),__publicField(this,"consentModule",null),__publicField(this,"consentPreferences",{necessary:!0,analytics:!1,marketing:!1,preferences:!1}),this.config={enabled:!0,endpoint:"",tenantId:"",sessionTimeout:18e5,heartbeatInterval:3e4,batchSize:10,flushInterval:5e3},this.userData={visitorId:this.getOrCreateVisitorId(),sessionId:this.getOrCreateSessionId()},this.deviceInfo=this.collectDeviceInfo()}static getInstance(){return e.instance||(e.instance=new e),e.instance}init(e){var t;if(this.isInitialized)return;const n=e.apiEndpoint||"";try{const e=new URL(n);this.config.endpoint=e.origin}catch{this.config.endpoint=n.replace(/\/api\/tenant-client\/?$/,"")}this.config.tenantId=String(e.tenantId||""),this.config.enabled=!1!==(null==(t=e.tracking)?void 0:t.enabled),this.config.enabled&&(this.initConsentIntegration(),this.extractUrlParameters(),this.hasAnalyticsConsent()&&this.trackPageView(),this.setupEventListeners(),this.startHeartbeat(),this.startFlushTimer(),this.isInitialized=!0)}initConsentIntegration(){try{this.consentModule=x.getInstance(),this.consentPreferences=this.consentModule.getConsent(),window.addEventListener("tixello:consent",e=>{this.consentPreferences=e.detail,this.consentPreferences.analytics&&!this.isInitialized&&this.trackPageView()})}catch(e){this.consentPreferences={necessary:!0,analytics:!1,marketing:!1,preferences:!1}}}hasAnalyticsConsent(){return!0===this.consentPreferences.analytics}hasMarketingConsent(){return!0===this.consentPreferences.marketing}hasConsent(e){return!0===this.consentPreferences[e]}trackPageView(e){this.pageEntryTime=Date.now(),this.maxScrollDepth=0,this.queueEvent({eventType:"page_view",eventCategory:"navigation",timestamp:Date.now(),pageUrl:window.location.href,pageTitle:document.title,referrer:document.referrer,eventData:e,...this.getAttributionParams()})}trackAddToCart(e){this.queueEvent({eventType:"add_to_cart",eventCategory:"ecommerce",timestamp:Date.now(),pageUrl:window.location.href,pageTitle:document.title,referrer:document.referrer,value:e.price,currency:e.currency||"USD",eventData:e,...this.getAttributionParams()}),this.flushEvents()}trackBeginCheckout(e){this.queueEvent({eventType:"begin_checkout",eventCategory:"ecommerce",timestamp:Date.now(),pageUrl:window.location.href,pageTitle:document.title,referrer:document.referrer,value:e.cartTotal,currency:e.currency||"USD",eventData:e,...this.getAttributionParams()}),this.flushEvents()}trackPurchase(e){e.email&&(this.userData.email=e.email),e.phone&&(this.userData.phone=e.phone),e.firstName&&(this.userData.firstName=e.firstName),e.lastName&&(this.userData.lastName=e.lastName),this.queueEvent({eventType:"purchase",eventCategory:"ecommerce",timestamp:Date.now(),pageUrl:window.location.href,pageTitle:document.title,referrer:document.referrer,orderId:e.orderId,value:e.orderTotal,currency:e.currency||"USD",eventData:{ticketCount:e.ticketCount,eventId:e.eventId,items:e.items},...this.getAttributionParams()}),this.flushEvents()}trackSignUp(e){e.email&&(this.userData.email=e.email),e.phone&&(this.userData.phone=e.phone),e.firstName&&(this.userData.firstName=e.firstName),e.lastName&&(this.userData.lastName=e.lastName),this.queueEvent({eventType:"sign_up",eventCategory:"user",timestamp:Date.now(),pageUrl:window.location.href,pageTitle:document.title,referrer:document.referrer,eventData:{method:e.method},...this.getAttributionParams()}),this.flushEvents()}trackLogin(e){e.email&&(this.userData.email=e.email),this.queueEvent({eventType:"login",eventCategory:"user",timestamp:Date.now(),pageUrl:window.location.href,pageTitle:document.title,referrer:document.referrer,eventData:{method:e.method},...this.getAttributionParams()})}trackViewEvent(e){this.queueEvent({eventType:"view_item",eventCategory:"engagement",timestamp:Date.now(),pageUrl:window.location.href,pageTitle:document.title,referrer:document.referrer,value:e.lowestPrice,currency:e.currency||"USD",eventData:e,...this.getAttributionParams()})}trackSearch(e){this.queueEvent({eventType:"search",eventCategory:"engagement",timestamp:Date.now(),pageUrl:window.location.href,pageTitle:document.title,referrer:document.referrer,eventData:e,...this.getAttributionParams()})}trackCustomEvent(e,t){this.queueEvent({eventType:e,eventCategory:"custom",timestamp:Date.now(),pageUrl:window.location.href,pageTitle:document.title,referrer:document.referrer,eventData:t,...this.getAttributionParams()})}setUserIdentity(e){e.email&&(this.userData.email=e.email),e.phone&&(this.userData.phone=e.phone),e.firstName&&(this.userData.firstName=e.firstName),e.lastName&&(this.userData.lastName=e.lastName),this.queueEvent({eventType:"identify",eventCategory:"user",timestamp:Date.now(),pageUrl:window.location.href,pageTitle:document.title,referrer:document.referrer,eventData:{userId:e.userId},...this.getAttributionParams()}),this.flushEvents()}getOrCreateVisitorId(){const e="tixello_visitor_id";let t=localStorage.getItem(e);return t||(t=this.generateUUID(),localStorage.setItem(e,t)),t}getOrCreateSessionId(){const e="tixello_session",t=sessionStorage.getItem(e);if(t){const n=JSON.parse(t);if(Date.now()-n.lastActivity<this.config.sessionTimeout)return n.lastActivity=Date.now(),sessionStorage.setItem(e,JSON.stringify(n)),n.id}const n=this.generateUUID();return sessionStorage.setItem(e,JSON.stringify({id:n,startTime:Date.now(),lastActivity:Date.now()})),n}generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}collectDeviceInfo(){var e,t,n,s,i,a,r,o,l,d;const c=navigator.userAgent,m=/Mobile|Android|iPhone|iPad|iPod/i.test(c),u=/Tablet|iPad/i.test(c);let p="Unknown",g="";c.includes("Chrome")?(p="Chrome",g=(null==(e=c.match(/Chrome\/(\d+)/))?void 0:e[1])||""):c.includes("Firefox")?(p="Firefox",g=(null==(t=c.match(/Firefox\/(\d+)/))?void 0:t[1])||""):c.includes("Safari")?(p="Safari",g=(null==(n=c.match(/Version\/(\d+)/))?void 0:n[1])||""):c.includes("Edge")&&(p="Edge",g=(null==(s=c.match(/Edge\/(\d+)/))?void 0:s[1])||"");let h="Unknown",x="";return c.includes("Windows")?(h="Windows",x=(null==(i=c.match(/Windows NT (\d+\.\d+)/))?void 0:i[1])||""):c.includes("Mac OS")?(h="macOS",x=(null==(r=null==(a=c.match(/Mac OS X (\d+[_\.]\d+)/))?void 0:a[1])?void 0:r.replace("_","."))||""):c.includes("Linux")?h="Linux":c.includes("Android")?(h="Android",x=(null==(o=c.match(/Android (\d+\.?\d*)/))?void 0:o[1])||""):(c.includes("iOS")||c.includes("iPhone")||c.includes("iPad"))&&(h="iOS",x=(null==(d=null==(l=c.match(/OS (\d+[_\.]\d+)/))?void 0:l[1])?void 0:d.replace("_","."))||""),{deviceType:u?"tablet":m?"mobile":"desktop",browser:p,browserVersion:g,os:h,osVersion:x,screenWidth:window.screen.width,screenHeight:window.screen.height,viewportWidth:window.innerWidth,viewportHeight:window.innerHeight,isMobile:m,isTablet:u,isDesktop:!m&&!u}}extractUrlParameters(){const e=new URLSearchParams(window.location.search),t=e.get("gclid"),n=e.get("fbclid"),s=e.get("ttclid"),i=e.get("li_fat_id");t&&localStorage.setItem("tixello_gclid",t),n&&localStorage.setItem("tixello_fbclid",n),s&&localStorage.setItem("tixello_ttclid",s),i&&localStorage.setItem("tixello_li_fat_id",i);["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(t=>{const n=e.get(t);n&&localStorage.setItem(`tixello_${t}`,n)})}getAttributionParams(){return{utmSource:localStorage.getItem("tixello_utm_source")||void 0,utmMedium:localStorage.getItem("tixello_utm_medium")||void 0,utmCampaign:localStorage.getItem("tixello_utm_campaign")||void 0,utmTerm:localStorage.getItem("tixello_utm_term")||void 0,utmContent:localStorage.getItem("tixello_utm_content")||void 0,gclid:localStorage.getItem("tixello_gclid")||void 0,fbclid:localStorage.getItem("tixello_fbclid")||void 0,ttclid:localStorage.getItem("tixello_ttclid")||void 0,liFatId:localStorage.getItem("tixello_li_fat_id")||void 0}}setupEventListeners(){let e;window.addEventListener("scroll",()=>{clearTimeout(e),e=window.setTimeout(()=>{const e=window.scrollY,t=document.documentElement.scrollHeight-window.innerHeight,n=Math.round(e/t*100);this.maxScrollDepth=Math.max(this.maxScrollDepth,n)},100)}),window.addEventListener("beforeunload",()=>{this.trackEngagement(),this.trackSessionEnd(),this.flushEvents(!0)}),document.addEventListener("visibilitychange",()=>{document.hidden&&(this.trackEngagement(),this.flushEvents())}),document.addEventListener("click",e=>{var t;const n=e.target.closest("a");n&&n.hostname!==window.location.hostname&&this.queueEvent({eventType:"outbound_click",eventCategory:"engagement",timestamp:Date.now(),pageUrl:window.location.href,pageTitle:document.title,referrer:document.referrer,eventData:{targetUrl:n.href,linkText:null==(t=n.textContent)?void 0:t.substring(0,100)},...this.getAttributionParams()})});const t=history.pushState;history.pushState=(...e)=>{t.apply(history,e),this.handleNavigation()},window.addEventListener("popstate",()=>{this.handleNavigation()})}handleNavigation(){this.trackEngagement(),setTimeout(()=>{this.trackPageView()},100)}trackEngagement(){const e=Math.round((Date.now()-this.pageEntryTime)/1e3);e>0&&this.queueEvent({eventType:"engagement",eventCategory:"engagement",timestamp:Date.now(),pageUrl:window.location.href,pageTitle:document.title,referrer:document.referrer,timeOnPage:e,scrollDepth:this.maxScrollDepth,...this.getAttributionParams()})}trackSessionEnd(){const e=sessionStorage.getItem("tixello_session");if(!e)return;const t=JSON.parse(e),n=Math.round((Date.now()-t.startTime)/1e3);this.queueEvent({eventType:"session_end",eventCategory:"session",timestamp:Date.now(),pageUrl:window.location.href,pageTitle:document.title,referrer:document.referrer,eventData:{sessionDuration:n,sessionStartTime:t.startTime},...this.getAttributionParams()})}startHeartbeat(){this.heartbeatTimer=window.setInterval(()=>{const e="tixello_session",t=sessionStorage.getItem(e);if(t){const n=JSON.parse(t);n.lastActivity=Date.now(),sessionStorage.setItem(e,JSON.stringify(n))}},this.config.heartbeatInterval)}startFlushTimer(){this.flushTimer=window.setInterval(()=>{this.eventQueue.length>0&&this.flushEvents()},this.config.flushInterval)}queueEvent(e){const t=["outbound_click"];if(!["error","session_start"].includes(e.eventType)){if(t.includes(e.eventType)&&!this.hasMarketingConsent())return;if(!t.includes(e.eventType)&&!this.hasAnalyticsConsent())return}this.eventQueue.push(e),this.eventQueue.length>=this.config.batchSize&&this.flushEvents()}flushEvents(e=!1){if(0===this.eventQueue.length||!this.config.endpoint)return;const t=[...this.eventQueue];this.eventQueue=[];const n={tenantId:this.config.tenantId,userData:this.userData,deviceInfo:this.deviceInfo,events:t,timestamp:Date.now(),consent:{analytics:this.consentPreferences.analytics,marketing:this.consentPreferences.marketing,preferences:this.consentPreferences.preferences}};if(e&&navigator.sendBeacon){const e=new Blob([JSON.stringify(n)],{type:"application/json"});navigator.sendBeacon(`${this.config.endpoint}/api/tracking/events`,e)}else fetch(`${this.config.endpoint}/api/tracking/events`,{method:"POST",mode:"cors",credentials:"omit",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(n)}).catch(e=>{this.eventQueue=[...t,...this.eventQueue]})}destroy(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.flushTimer&&clearInterval(this.flushTimer),this.flushEvents(!0)}};__publicField(v,"instance");const y=v.getInstance();class b{static getCart(){const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}static addItem(e){const t=this.getCart(),n=t.findIndex(t=>t.eventId===e.eventId&&t.ticketTypeId===e.ticketTypeId);n>=0?t[n].quantity+=e.quantity:t.push(e),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}static updateQuantity(e,t,n){const s=this.getCart(),i=s.find(n=>n.eventId===e&&n.ticketTypeId===t);i&&(i.quantity=n,i.quantity<=0?this.removeItem(e,t):localStorage.setItem(this.STORAGE_KEY,JSON.stringify(s)))}static removeItem(e,t){let n=this.getCart();n=n.filter(n=>!(n.eventId===e&&n.ticketTypeId===t)),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(n))}static clearCart(){localStorage.removeItem(this.STORAGE_KEY)}static getItemCount(){return this.getCart().reduce((e,t)=>e+t.quantity,0)}static calculateBulkDiscount(e,t,n){let s=e*t,i=0;for(const a of n){let n=e*t,r=0;if("buy_x_get_y"===a.rule_type&&e>=a.buy_qty){const s=Math.floor(e/a.buy_qty)*a.get_qty;n=(e-s)*t,r=s*t}else if("amount_off_per_ticket"===a.rule_type&&e>=a.min_qty){r=e*(a.amount_off/100),n=e*t-r}else"percent_off"===a.rule_type&&e>=a.min_qty&&(r=e*t*(a.percent_off/100),n=e*t-r);n<s&&(s=n,i=r)}return{total:s,discount:i}}static getTotal(){const e=this.getCart();let t=0,n=0,s=0,i=!1,a="RON";for(const d of e){const e=d.salePrice||d.price,r=this.calculateBulkDiscount(d.quantity,e,d.bulkDiscounts);if(t+=r.total,n+=r.discount,a=d.currency,d.hasCommissionOnTop&&d.commissionRate>0){s+=d.quantity*d.price*(d.commissionRate/100),i=!0}}const r=this.getDiscount();let o=0,l=null;return r&&(l=r.name,o="percentage"===r.type?t*(r.value/100):r.discountAmount),{subtotal:t+n,bulkDiscount:n,couponDiscount:o,couponName:l,discount:n+o,commission:s,total:Math.max(0,t+s-o),currency:a,hasCommission:i}}static setDiscount(e){localStorage.setItem(this.DISCOUNT_KEY,JSON.stringify(e))}static getDiscount(){const e=localStorage.getItem(this.DISCOUNT_KEY);return e?JSON.parse(e):null}static removeDiscount(){localStorage.removeItem(this.DISCOUNT_KEY)}}__publicField(b,"STORAGE_KEY","tixello_cart"),__publicField(b,"DISCOUNT_KEY","tixello_discount");class f{static show(e,t="success"){const n=document.createElement("div");n.className="fixed bottom-4 right-4 px-6 py-3 rounded-lg shadow-lg text-white font-medium z-50 transform transition-all duration-300 translate-y-0 opacity-100";n.classList.add({success:"bg-green-600",error:"bg-red-600",info:"bg-blue-600"}[t]),n.textContent=e,document.body.appendChild(n),setTimeout(()=>{n.classList.add("translate-y-2","opacity-0"),setTimeout(()=>n.remove(),300)},3e3)}}class w{constructor(e){__publicField(this,"routes",[]),__publicField(this,"config"),__publicField(this,"currentPath",""),__publicField(this,"authToken",null),__publicField(this,"currentUser",null),this.config=e,s.init(e),this.loadAuthState(),this.setupDefaultRoutes()}loadAuthState(){this.authToken=localStorage.getItem("tixello_auth_token");const e=localStorage.getItem("tixello_user");if(e)try{this.currentUser=JSON.parse(e)}catch{this.currentUser=null}}saveAuthState(e,t){e&&t&&(this.authToken=e,this.currentUser=t,localStorage.setItem("tixello_auth_token",e),localStorage.setItem("tixello_user",JSON.stringify(t)))}clearAuthState(){this.authToken=null,this.currentUser=null,localStorage.removeItem("tixello_auth_token"),localStorage.removeItem("tixello_user")}isAuthenticated(){return!!this.authToken}getUser(){return this.currentUser}updateCartBadge(){const e=document.getElementById("cart-badge");if(e){const t=b.getItemCount();e.textContent=t.toString(),t>0?e.classList.remove("hidden"):e.classList.add("hidden")}}updateHeaderForUser(){var e;const t=document.getElementById("account-link");if(t&&this.currentUser){const n=(null==(e=this.currentUser.name)?void 0:e.split(" ")[0])||this.currentUser.email;t.textContent=`Buna, ${n}`,t.href="/account"}}async fetchApi(e,t={},n={}){const s=new URL(`${this.config.apiEndpoint}${e}`);s.searchParams.set("hostname",window.location.hostname),Object.entries(t).forEach(([e,t])=>{s.searchParams.set(e,t)});const i={"Content-Type":"application/json",...n.headers||{}};this.authToken&&(i.Authorization=`Bearer ${this.authToken}`);const a=await fetch(s.toString(),{...n,headers:i});if(!a.ok){const e=await a.json().catch(()=>({message:"Request failed"}));throw new Error(e.message||`API error: ${a.status}`)}return a.json()}async postApi(e,t){const n=new URL(`${this.config.apiEndpoint}${e}`);n.searchParams.set("hostname",window.location.hostname);const s={"Content-Type":"application/json"};this.authToken&&(s.Authorization=`Bearer ${this.authToken}`);const i=await fetch(n.toString(),{method:"POST",headers:s,body:JSON.stringify(t)}),a=await i.json();if(!i.ok)throw new Error(a.message||a.error||"Request failed");return a}async deleteApi(e){const t=new URL(`${this.config.apiEndpoint}${e}`);t.searchParams.set("hostname",window.location.hostname);const n={"Content-Type":"application/json"};this.authToken&&(n.Authorization=`Bearer ${this.authToken}`);const s=await fetch(t.toString(),{method:"DELETE",headers:n}),i=await s.json();if(!s.ok)throw new Error(i.message||i.error||"Request failed");return i}renderEventCard(e){const t=e.is_postponed&&e.postponed_date?e.postponed_date:e.start_date,n=t?new Date(t).toLocaleDateString("ro-RO",{day:"numeric",month:"short",year:"numeric"}):"",s=e.poster_url||e.hero_image_url;return`\n            <a href="/event/${e.slug}" class="block bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition group">\n                <div class="aspect-[16/9] bg-gray-200 relative overflow-hidden">\n                    ${s?`<img src="${s}" alt="${e.title}" class="w-full h-full object-cover group-hover:scale-105 transition duration-300">`:'<div class="w-full h-full flex items-center justify-center text-gray-400">\n                            <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>\n                            </svg>\n                          </div>'}\n                    ${e.is_sold_out?'<span class="absolute top-2 right-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded">SOLD OUT</span>':""}\n                    ${e.is_cancelled?'<span class="absolute top-2 right-2 bg-gray-800 text-white text-xs font-bold px-2 py-1 rounded">ANULAT</span>':""}\n                    ${e.is_postponed&&!e.is_cancelled?'<span class="absolute top-2 right-2 bg-yellow-500 text-white text-xs font-bold px-2 py-1 rounded">AMÂNAT</span>':""}\n                </div>\n                <div class="p-4">\n                    <h3 class="font-semibold text-gray-900 mb-1 line-clamp-2">${e.title}</h3>\n                    <p class="text-sm text-gray-500 mb-2">${n}</p>\n                    ${e.venue?`<p class="text-sm text-gray-600 mb-2">${e.venue.name}${e.venue.city?`, ${e.venue.city}`:""}</p>`:""}\n                    ${e.price_from?`<p class="text-sm font-semibold text-primary">de la ${e.price_from} ${e.currency||"RON"}</p>`:""}\n                </div>\n            </a>\n        `}init(){window.addEventListener("popstate",()=>this.handleRoute()),document.addEventListener("click",e=>{const t=e.target.closest("a");if(t&&t.href&&t.href.startsWith(window.location.origin)){const n=new URL(t.href);t.hasAttribute("data-external")||(e.preventDefault(),this.navigate(n.pathname))}}),this.handleRoute(),this.updateCartBadge()}setupDefaultRoutes(){this.addRoute("/",this.renderHome.bind(this)),this.addRoute("/events",this.renderEvents.bind(this)),this.addRoute("/event/:slug",this.renderEventDetail.bind(this)),this.addRoute("/cart",this.renderCart.bind(this)),this.addRoute("/checkout",this.renderCheckout.bind(this)),this.addRoute("/order-success/:orderId",this.renderOrderSuccess.bind(this)),this.addRoute("/thank-you/:orderNumber",this.renderThankYou.bind(this)),this.addRoute("/login",this.renderLogin.bind(this)),this.addRoute("/register",this.renderRegister.bind(this)),this.addRoute("/forgot-password",this.renderForgotPassword.bind(this)),this.addRoute("/reset-password",this.renderResetPassword.bind(this)),this.addRoute("/account",this.renderAccount.bind(this)),this.addRoute("/account/orders",this.renderOrders.bind(this)),this.addRoute("/account/orders/:id",this.renderOrderDetail.bind(this)),this.addRoute("/account/tickets",this.renderTickets.bind(this)),this.addRoute("/account/events",this.renderMyEvents.bind(this)),this.addRoute("/account/profile",this.renderProfile.bind(this)),this.addRoute("/account/watchlist",this.renderWatchlist.bind(this)),this.addRoute("/terms",this.renderTerms.bind(this)),this.addRoute("/privacy",this.renderPrivacy.bind(this)),this.addRoute("/past-events",this.renderPastEvents.bind(this)),this.addRoute("/page/:slug",this.renderPage.bind(this)),this.addRoute("/blog",this.renderBlog.bind(this)),this.addRoute("/blog/:slug",this.renderBlogArticle.bind(this))}addRoute(e,t){const n=[],s=e.replace(/:([^/]+)/g,(e,t)=>(n.push(t),"([^/]+)"));this.routes.push({pattern:new RegExp(`^${s}$`),handler:t,paramNames:n})}navigate(e){window.history.pushState({},"",e),this.handleRoute()}handleRoute(){const e=window.location.pathname||"/";this.currentPath=e,this.resetMetaTags(),y.trackPageView();for(const t of this.routes){const n=e.match(t.pattern);if(n){const e={};return t.paramNames.forEach((t,s)=>{e[t]=n[s+1]}),void t.handler(e)}}this.render404()}getContentElement(){return document.getElementById("tixello-content")}resetMetaTags(){var e,t,n,s;const i=(null==(e=this.config.site)?void 0:e.title)||"Tixello",a=null==(t=this.config.site)?void 0:t.tagline,r=(null==(n=this.config.site)?void 0:n.description)||`Events and tickets by ${i}`;document.title=a?`${i} - ${a}`:i;const o=document.querySelector('meta[name="description"]');o&&o.setAttribute("content",r);const l=document.querySelector('meta[property="og:title"]');l&&l.setAttribute("content",i);const d=document.querySelector('meta[property="og:description"]');d&&d.setAttribute("content",r);const c=document.querySelector('meta[property="og:type"]');c&&c.setAttribute("content","website");const m=document.querySelector('meta[property="og:image"]');m&&(null==(s=this.config.theme)?void 0:s.logo)&&m.setAttribute("content",this.config.theme.logo);const u=document.querySelector('meta[name="twitter:title"]');u&&u.setAttribute("content",i);const p=document.querySelector('meta[name="twitter:description"]');p&&p.setAttribute("content",r);const g=document.querySelector('meta[name="twitter:card"]');g&&g.setAttribute("content","summary");const h=document.querySelector('link[rel="canonical"]');h&&h.setAttribute("href",window.location.origin)}async renderHome(){var e,t,n;const s=this.getContentElement();if(s){try{const i=await this.fetchApi("/pages/home");if(i.success&&"builder"===(null==(e=i.data)?void 0:e.page_type)&&(null==(n=null==(t=i.data)?void 0:t.layout)?void 0:n.blocks))return s.innerHTML='<div id="page-content"></div>',d.updateLayout(i.data.layout,"page-content"),void(c.isActive()&&c.onLayoutUpdate(e=>{d.updateLayout(e,"page-content")}))}catch{}s.innerHTML='\n            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">\n                \x3c!-- Hero Section --\x3e\n                <div class="text-center mb-16">\n                    <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">\n                        Descoperă evenimente unice\n                    </h1>\n                    <p class="text-xl text-gray-600 mb-8 max-w-2xl mx-auto">\n                        Găsește și cumpără bilete pentru cele mai bune concerte, spectacole și experiențe\n                    </p>\n                    <a href="/events" class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-primary hover:bg-primary-dark transition">\n                        Vezi toate evenimentele\n                        <svg class="ml-2 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>\n                        </svg>\n                    </a>\n                </div>\n\n                \x3c!-- Featured Events --\x3e\n                <div class="mb-16">\n                    <h2 class="text-2xl font-bold text-gray-900 mb-6">Evenimente recomandate</h2>\n                    <div id="featured-events" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">\n                        <div class="animate-pulse bg-gray-200 rounded-lg h-64"></div>\n                        <div class="animate-pulse bg-gray-200 rounded-lg h-64"></div>\n                        <div class="animate-pulse bg-gray-200 rounded-lg h-64"></div>\n                    </div>\n                </div>\n\n                \x3c!-- Categories --\x3e\n                <div>\n                    <h2 class="text-2xl font-bold text-gray-900 mb-6">Explorează pe categorii</h2>\n                    <div id="categories" class="grid grid-cols-2 md:grid-cols-4 gap-4">\n                        <div class="animate-pulse bg-gray-200 rounded-lg h-24"></div>\n                        <div class="animate-pulse bg-gray-200 rounded-lg h-24"></div>\n                        <div class="animate-pulse bg-gray-200 rounded-lg h-24"></div>\n                        <div class="animate-pulse bg-gray-200 rounded-lg h-24"></div>\n                    </div>\n                </div>\n            </div>\n        ';try{const[e,t]=await Promise.all([this.fetchApi("/events/featured"),this.fetchApi("/categories")]),n=document.getElementById("featured-events");if(n&&e.data){const t=e.data.events||e.data||[];0===t.length?n.innerHTML='<p class="col-span-3 text-center text-gray-500">Nu există evenimente recomandate momentan.</p>':n.innerHTML=t.map(e=>this.renderEventCard(e)).join("")}const s=document.getElementById("categories");if(s&&t.data){const e=t.data.categories||t.data||[];0===e.length?s.innerHTML='<p class="col-span-4 text-center text-gray-500">Nu există categorii disponibile.</p>':s.innerHTML=e.map(e=>`\n                        <a href="/events?category=${e.slug}" class="block p-4 bg-white rounded-lg shadow hover:shadow-md transition text-center">\n                            <div class="text-primary mb-2">\n                                <svg class="w-8 h-8 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>\n                                </svg>\n                            </div>\n                            <span class="font-medium text-gray-900">${e.name}</span>\n                        </a>\n                    `).join("")}}catch(i){}}}async renderEvents(){var e;const t=this.getContentElement();if(t){t.innerHTML=`\n            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                <h1 class="text-3xl font-bold text-gray-900 mb-6">Evenimente</h1>\n\n                \x3c!-- Calendar Timeline (Sticky) --\x3e\n                <div id="events-calendar" class="space-y-4 mb-8 sticky top-4 z-20 bg-gray-50 pt-4 px-2 pb-2 -mt-4 border-b border-gray-200">\n                    \x3c!-- Year/Month Navigator --\x3e\n                    <div id="month-navigator" class="flex items-center gap-x-8 flex-wrap">\n                        <div class="animate-pulse bg-gray-200 h-8 w-full rounded"></div>\n                    </div>\n\n                    \x3c!-- Days Strip (hidden scrollbar, drag to scroll) --\x3e\n                    <div class="relative">\n                        <div id="days-scroller" class="days-scroller flex items-stretch gap-6 overflow-x-scroll pb-2 whitespace-nowrap cursor-grab active:cursor-grabbing" style="scrollbar-width: none; -ms-overflow-style: none;">\n                            <div class="animate-pulse flex gap-2">\n                                ${Array(14).fill(0).map(()=>'<div class="w-14 h-16 bg-white/70 rounded-xl shrink-0"></div>').join("")}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                \x3c!-- Events List --\x3e\n                <div id="events-container" class="min-h-[80px]">\n                    <div class="animate-pulse space-y-3">\n                        <div class="bg-gray-400 h-20 rounded-xl"></div>\n                        <div class="bg-gray-300 h-20 rounded-xl"></div>\n                        <div class="bg-gray-200 h-20 rounded-xl"></div>\n                    </div>\n                </div>\n            </div>\n        `;try{const t=await this.fetchApi("/events"),n=(null==(e=t.data)?void 0:e.events)||t.data||[];this.initEventsCalendar(n)}catch(n){const e=document.getElementById("events-container");e&&(e.innerHTML='<p class="text-center text-red-500 py-4">Eroare la încărcarea evenimentelor.</p>')}}}initEventsCalendar(e){const t=new Date;t.setHours(0,0,0,0);let n="all",s=null,i=null,a=null;const r=["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"],o=["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],l=["Dum","Lun","Mar","Mie","Joi","Vin","Sâm"],d=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,c=d(t),m={},u=e.map(e=>{var n,s;const i=(e=>{const n=e.is_postponed&&e.postponed_date,s=n?e.postponed_date:e.start_date,i=n?e.postponed_start_time:e.start_time;if(!s)return t;const a=String(s).split("T")[0].split("-").map(Number);if(3!==a.length)return t;const[r,o,l]=a;let d=0,c=0;if(i){const e=String(i).split(":");e.length>=2&&(d=parseInt(e[0])||0,c=parseInt(e[1])||0)}return new Date(r,o-1,l,d,c)})(e),a=d(i),r=i.toLocaleDateString("ro-RO",{day:"numeric",month:"short",year:"numeric"}),o=i.toLocaleTimeString("ro-RO",{hour:"2-digit",minute:"2-digit"}),l={id:e.id,title:e.title||e.name||"Untitled",slug:e.slug,venue:(null==(n=e.venue)?void 0:n.name)||"",city:(null==(s=e.venue)?void 0:s.city)||"",posterUrl:e.poster_url||e.hero_image_url,date:i,dateStr:a,dateLabel:r,timeLabel:o,isPostponed:!!e.is_postponed,isCancelled:!!e.is_cancelled,isSoldOut:!!e.is_sold_out,doorSalesOnly:!!e.door_sales_only,priceFrom:e.price_from||null};return m[a]||(m[a]=[]),m[a].push(l),l}),p=[],g=new Date(t);g.setMonth(g.getMonth()+3);for(let C=new Date(t);C<=g;C.setDate(C.getDate()+1)){const e=new Date(C),t=d(e),n=m[t]||[];p.push({date:e,dateStr:t,year:e.getFullYear(),monthIndex:e.getMonth(),weekdayShort:l[e.getDay()],day:e.getDate(),isToday:t===c,hasEvents:n.length>0,hasPostponed:n.some(e=>e.isPostponed),hasCancelled:n.some(e=>e.isCancelled)})}const h={};p.forEach(e=>{h[e.year]||(h[e.year]={}),h[e.year][e.monthIndex]||(h[e.year][e.monthIndex]={index:e.monthIndex,label:r[e.monthIndex],eventCount:0}),m[e.dateStr]&&(h[e.year][e.monthIndex].eventCount+=m[e.dateStr].length)});const x=Object.keys(h).sort().map(e=>{const t=Number(e);return{year:t,months:Object.values(h[t]).sort((e,t)=>e.index-t.index)}}),v=[],y={};p.forEach(e=>{const t=`${e.year}-${e.monthIndex}`;y[t]||(y[t]={year:e.year,monthIndex:e.monthIndex,label:o[e.monthIndex],days:[]},v.push(y[t])),y[t].days.push(e)});const b=()=>{const e=document.getElementById("month-navigator");e&&(e.innerHTML=x.map(e=>`\n                <div class="flex items-center">\n                    <div class="w-10 text-xs font-bold text-gray-800">${e.year}</div>\n                    <div class="flex flex-wrap gap-2">\n                        ${e.months.map(t=>{const s="month"===n&&i===e.year&&a===t.index;return`\n                                <button type="button" data-year="${e.year}" data-month="${t.index}"\n                                    class="month-btn px-2 py-1 rounded-md text-[11px] uppercase font-semibold transition\n                                    ${s?"bg-gray-900 text-white border border-gray-900":"border bg-white/70 border-gray-200 text-gray-800 hover:border-gray-400 hover:bg-gray-50"}">\n                                    <span>${t.label}</span>\n                                    ${t.eventCount?`<span class="ml-1 text-[11px] font-bold ${s?"text-gray-400":"text-gray-800"}">${t.eventCount}</span>`:""}\n                                </button>\n                            `}).join("")}\n                    </div>\n                </div>\n            `).join(""),e.querySelectorAll(".month-btn").forEach(e=>{e.addEventListener("click",()=>{const t=parseInt(e.dataset.year||"0"),n=parseInt(e.dataset.month||"0");$(t,n)})}))},f=()=>{const e=document.getElementById("days-scroller");e&&(e.innerHTML=v.map(e=>`\n                <div class="flex flex-col items-start gap-1 shrink-0">\n                    <div class="text-xs font-semibold text-gray-800 uppercase">${e.label}</div>\n                    <div class="flex items-stretch gap-2">\n                        ${e.days.map(e=>{const t="day"===n&&s===e.dateStr;return`\n                                <button type="button" data-date="${e.dateStr}"\n                                    class="day-btn flex flex-col items-center justify-between w-14 h-16 ${e.isToday?"py-1 px-3":"p-3"} rounded-xl border text-xs leading-tight shrink-0 transition ${(e=>"day"===n&&s===e.dateStr?"border-gray-900 bg-gray-900 text-white":e.hasCancelled?"border-red-300 bg-red-50 text-red-900":e.hasPostponed?"border-amber-300 bg-amber-50 text-amber-900":e.hasEvents?"border-emerald-300 bg-emerald-50 text-gray-900":"border-gray-200 text-gray-700 hover:border-gray-400")(e)}">\n                                    <span class="text-xl font-bold">${e.day}</span>\n                                    <span class="text-[11px] capitalize">${e.weekdayShort}</span>\n                                    ${e.isToday?`<span class="mt-0.5 text-[9px] uppercase tracking-wide ${t?"text-white":"text-blue-600"}">Azi</span>`:""}\n                                    <span class="mt-0.5 h-1.5 w-1.5 rounded-full ${(e=>e.hasCancelled?"bg-red-500":e.hasPostponed?"bg-amber-500":e.hasEvents?"bg-emerald-500":"bg-transparent")(e)}"></span>\n                                </button>\n                            `}).join("")}\n                    </div>\n                </div>\n            `).join(""),e.querySelectorAll(".day-btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.date||"";k(t)})}))},w=()=>{const e=document.getElementById("events-container");if(!e)return;let t=[...u];"day"===n&&s?t=m[s]||[]:"month"===n&&null!==i&&null!==a&&(t=u.filter(e=>e.date.getFullYear()===i&&e.date.getMonth()===a)),t.sort((e,t)=>e.date.getTime()-t.date.getTime()),0!==t.length?e.innerHTML=`\n                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">\n                    ${t.map(e=>`\n                        <a href="/event/${e.slug}" class="group block rounded-xl border border-gray-200 bg-white overflow-hidden hover:border-gray-400 hover:shadow-md transition">\n                            ${e.posterUrl?`\n                                <div class="aspect-[3/4] w-full overflow-hidden bg-gray-100">\n                                    <img src="${e.posterUrl}" alt="${e.title}" class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-300" loading="lazy">\n                                </div>\n                            `:'\n                                <div class="aspect-[3/4] w-full bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center">\n                                    <svg class="w-12 h-12 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>\n                                </div>\n                            '}\n                            <div class="p-3">\n                                <p class="font-semibold text-gray-900 text-sm line-clamp-2 leading-tight">${e.title}</p>\n                                <p class="mt-1 text-xs text-gray-500 truncate">${e.venue}${e.city?` · ${e.city}`:""}</p>\n                                <div class="mt-2 flex items-center justify-between">\n                                    <div class="text-xs text-gray-600">\n                                        <span class="font-medium">${e.dateLabel}</span>\n                                        <span class="text-gray-400 ml-1">${e.timeLabel}</span>\n                                    </div>\n                                    ${e.priceFrom?`<span class="text-xs font-semibold text-gray-900">${e.priceFrom} RON</span>`:""}\n                                </div>\n                                <div class="mt-2 flex flex-wrap gap-1">\n                                    ${e.isCancelled?'<span class="inline-flex items-center rounded-full bg-red-100 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-red-700">Anulat</span>':""}\n                                    ${!e.isCancelled&&e.isPostponed?'<span class="inline-flex items-center rounded-full bg-amber-100 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-amber-700">Amânat</span>':""}\n                                    ${e.isSoldOut?'<span class="inline-flex items-center rounded-full bg-gray-200 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-gray-800">Sold-out</span>':""}\n                                    ${e.doorSalesOnly?'<span class="inline-flex items-center rounded-full bg-blue-50 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-blue-700">Doar la intrare</span>':""}\n                                </div>\n                            </div>\n                        </a>\n                    `).join("")}\n                </div>\n            `:e.innerHTML='<p class="text-sm text-gray-500 py-4">Nu există evenimente care să corespundă filtrelor selectate.</p>'},k=e=>{const t=p.find(t=>t.dateStr===e);t&&(n="day",s=e,i=t.year,a=t.monthIndex,b(),f(),w())},$=(e,t)=>{n="month",i=e,a=t,s=null,b(),f(),w();const r=p.find(n=>n.year===e&&n.monthIndex===t);if(r){const e=document.getElementById("days-scroller"),t=null==e?void 0:e.querySelector(`[data-date="${r.dateStr}"]`);null==t||t.scrollIntoView({behavior:"smooth",inline:"start",block:"nearest"})}};b(),f(),w(),setTimeout(()=>{const e=document.getElementById("days-scroller"),t=null==e?void 0:e.querySelector(`[data-date="${c}"]`);t&&e&&(e.scrollLeft=t.offsetLeft-24)},100);const _=document.getElementById("days-scroller");if(_){const e="days-scroller-style";if(!document.getElementById(e)){const t=document.createElement("style");t.id=e,t.textContent=".days-scroller::-webkit-scrollbar { display: none; }",document.head.appendChild(t)}let t=!1,n=0,s=0;_.addEventListener("mousedown",e=>{t=!0,_.classList.add("active"),n=e.pageX-_.offsetLeft,s=_.scrollLeft}),_.addEventListener("mouseleave",()=>{t=!1,_.classList.remove("active")}),_.addEventListener("mouseup",()=>{t=!1,_.classList.remove("active")}),_.addEventListener("mousemove",e=>{if(!t)return;e.preventDefault();const i=2*(e.pageX-_.offsetLeft-n);_.scrollLeft=s-i}),_.addEventListener("touchstart",e=>{n=e.touches[0].pageX-_.offsetLeft,s=_.scrollLeft},{passive:!0}),_.addEventListener("touchmove",e=>{const t=2*(e.touches[0].pageX-_.offsetLeft-n);_.scrollLeft=s-t},{passive:!0})}}async renderEventDetail(e){const t=this.getContentElement();if(t){t.innerHTML='\n            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                <a href="/events" class="inline-flex items-center text-gray-600 hover:text-gray-900 mb-6">\n                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>\n                    </svg>\n                    Înapoi la evenimente\n                </a>\n                <div id="event-detail" class="grid grid-cols-1 lg:grid-cols-3 gap-8">\n                    <div class="lg:col-span-2">\n                        <div class="animate-pulse bg-gray-200 rounded-lg h-96 mb-6"></div>\n                        <div class="animate-pulse bg-gray-200 h-8 w-3/4 mb-4 rounded"></div>\n                        <div class="animate-pulse bg-gray-200 h-4 w-full mb-2 rounded"></div>\n                        <div class="animate-pulse bg-gray-200 h-4 w-full mb-2 rounded"></div>\n                        <div class="animate-pulse bg-gray-200 h-4 w-2/3 rounded"></div>\n                    </div>\n                    <div class="lg:col-span-1">\n                        <div class="bg-white rounded-lg shadow-lg p-6 sticky top-24">\n                            <div class="animate-pulse bg-gray-200 h-6 w-1/2 mb-4 rounded"></div>\n                            <div class="animate-pulse bg-gray-200 h-10 w-full mb-4 rounded"></div>\n                            <div class="animate-pulse bg-gray-200 h-12 w-full rounded"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ';try{const t=(await this.fetchApi(`/events/${e.slug}`)).data;if(!t)return void this.render404();window.currentEventData=t;const n=!0===t.is_postponed,s=n&&t.postponed_date?t.postponed_date:t.start_date,i=n&&t.postponed_start_time?t.postponed_start_time:t.start_time,a=(n&&t.postponed_door_time?t.postponed_door_time:t.door_time,n&&t.postponed_end_time?t.postponed_end_time:t.end_time,s?new Date(s).toLocaleDateString("ro-RO",{weekday:"long",day:"numeric",month:"long",year:"numeric"}):""),r=i||(s?new Date(s).toLocaleTimeString("ro-RO",{hour:"2-digit",minute:"2-digit"}):""),o=t.poster_url||t.hero_image_url||t.image,l=s?new Date(s):null,d=!!l&&l<new Date,c=document.getElementById("event-detail");if(c){if(c.innerHTML=`\n                    <div class="${d?"lg:col-span-3":"lg:col-span-2"}">\n                        ${o?`<img src="${o}" alt="${t.title}" class="w-full h-96 object-cover rounded-lg mb-6">`:'<div class="w-full h-96 bg-gray-200 rounded-lg mb-6 flex items-center justify-center">\n                                <svg class="w-24 h-24 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>\n                                </svg>\n                              </div>'}\n\n                        ${d?"":`<div id="countdown-container" data-event-date="${s||""}" data-event-time="${i||""}" data-is-cancelled="${t.is_cancelled||!1}" data-is-postponed="${t.is_postponed||!1}"></div>`}\n\n                        ${t.is_cancelled?`\n                        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">\n                            <strong>Eveniment anulat:</strong> ${t.cancel_reason||"Acest eveniment a fost anulat."}\n                        </div>\n                        `:""}\n\n                        ${n?`\n                        <div class="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded mb-4">\n                            <strong>Eveniment amânat${t.postponed_date?` pentru ${a}${i?` ora ${i}`:""}`:""}:</strong> ${t.postponed_reason||"Acest eveniment a fost amânat."}\n                        </div>\n                        `:""}\n\n                        ${d&&!t.is_cancelled?`\n                        <div class="bg-gray-100 border border-gray-300 text-gray-700 px-4 py-3 rounded mb-4">\n                            <strong>Eveniment încheiat</strong> - Acest eveniment a avut loc în ${a}.\n                        </div>\n                        `:""}\n\n                        <h1 class="text-3xl font-bold text-gray-900 mb-4">${t.title}</h1>\n\n                        <div class="flex flex-wrap gap-4 mb-6 text-gray-600">\n                            <div class="flex items-center">\n                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>\n                                </svg>\n                                ${a}\n                            </div>\n                            ${r?`\n                            <div class="flex items-center">\n                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>\n                                </svg>\n                                ${r}\n                            </div>\n                            `:""}\n                            ${t.venue?`\n                            <div class="flex items-center flex-wrap gap-2">\n                                <div class="flex items-center">\n                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>\n                                    </svg>\n                                    <a href="https://core.tixello.com/venue/${t.venue.slug}?locale=en" target="_blank" class="hover:underline text-blue-600">${t.venue.name}</a>\n                                    ${t.venue.city?`, ${t.venue.city}`:""}\n                                </div>\n                                ${t.venue.latitude&&t.venue.longitude?`\n                                <a href="https://www.google.com/maps?q=${t.venue.latitude},${t.venue.longitude}" target="_blank" class="text-sm text-blue-600 hover:underline">\n                                    Vezi pe Google Maps\n                                </a>\n                                `:t.venue.address?`\n                                <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t.venue.address)}" target="_blank" class="text-sm text-blue-600 hover:underline">\n                                    Vezi pe Google Maps\n                                </a>\n                                `:""}\n                            </div>\n                            `:""}\n                        </div>\n\n                        ${t.description?`\n                        <div class="mb-8">\n                            <h2 class="text-xl font-semibold text-gray-900 mb-4">Descriere</h2>\n                            <div class="prose prose-gray max-w-none text-gray-700 [&>p]:mb-4 [&>ul]:mb-4 [&>ol]:mb-4 [&>p:last-child]:mb-0">${t.description}</div>\n                        </div>\n                        `:""}\n\n                        ${t.ticket_terms?`\n                        <div class="prose max-w-none mb-8">\n                            <h2 class="text-xl font-semibold text-gray-900 mb-4">Termeni și condiții bilete</h2>\n                            <div class="text-gray-700 text-sm">${t.ticket_terms}</div>\n                        </div>\n                        `:""}\n\n                        ${t.event_website_url||t.facebook_url?`\n                        <div class="mb-8">\n                            <h2 class="text-xl font-semibold text-gray-900 mb-4">Link-uri</h2>\n                            <div class="flex flex-wrap gap-4">\n                                ${t.event_website_url?`<a href="${t.event_website_url}" target="_blank" class="text-blue-600 hover:underline">Website eveniment</a>`:""}\n                                ${t.facebook_url?`<a href="${t.facebook_url}" target="_blank" class="text-blue-600 hover:underline">Facebook</a>`:""}\n                                ${t.website_url?`<a href="${t.website_url}" target="_blank" class="text-blue-600 hover:underline">Website</a>`:""}\n                            </div>\n                        </div>\n                        `:""}\n\n                        ${t.artists&&t.artists.length>0?`\n                        <div class="mb-8 collapsible-section" data-section="artists">\n                            <h2 class="text-xl font-semibold text-gray-900 mb-6 collapsible-header cursor-pointer lg:cursor-default flex items-center justify-between" data-target="artists">\n                                <span>Artiști</span>\n                                <svg class="w-5 h-5 collapsible-icon lg:hidden transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>\n                                </svg>\n                            </h2>\n                            <div class="space-y-8 collapsible-content" data-content="artists">\n                                ${t.artists.map(e=>{const t=e=>e?e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString():"",n=e.youtube_subscribers||e.youtube_total_views||e.spotify_followers||e.facebook_followers||e.instagram_followers||e.tiktok_followers,s=e.facebook_url||e.instagram_url||e.youtube_url||e.spotify_url||e.tiktok_url||e.website,i=e.youtube_videos&&e.youtube_videos.length>0?e.youtube_videos[0]:null;return`\n                                    <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl overflow-hidden shadow-sm">\n                                        <div class="p-6">\n                                            \x3c!-- Header: Image, Name, Types/Genres --\x3e\n                                            <div class="flex flex-col md:flex-row gap-6">\n                                                <a href="https://core.tixello.com/artist/${e.slug}?locale=en" target="_blank" class="flex-shrink-0 group">\n                                                    ${e.image||e.portrait?`<img src="${e.portrait||e.image}" alt="${e.name}" class="w-32 h-32 md:w-40 md:h-40 rounded-xl object-cover shadow-md group-hover:shadow-lg transition">`:`<div class="w-32 h-32 md:w-40 md:h-40 rounded-xl bg-gradient-to-br from-primary to-purple-600 flex items-center justify-center">\n                                                            <span class="text-4xl text-white font-bold">${e.name.charAt(0)}</span>\n                                                           </div>`}\n                                                </a>\n                                                <div class="flex-1">\n                                                    <a href="https://core.tixello.com/artist/${e.slug}?locale=en" target="_blank" class="hover:text-primary transition">\n                                                        <h3 class="text-2xl font-bold text-gray-900 mb-2">${e.name}</h3>\n                                                    </a>\n                                                    ${e.city||e.country?`\n                                                        <p class="text-gray-500 mb-3">📍 ${[e.city,e.country].filter(Boolean).join(", ")}</p>\n                                                    `:""}\n\n                                                    ${e.artist_types&&e.artist_types.length>0?`\n                                                        <div class="flex flex-wrap gap-2 mb-2">\n                                                            ${e.artist_types.map(e=>`\n                                                                <span class="px-3 py-1 bg-primary/10 text-primary text-sm font-medium rounded-full">${e.name}</span>\n                                                            `).join("")}\n                                                        </div>\n                                                    `:""}\n\n                                                    ${e.artist_genres&&e.artist_genres.length>0?`\n                                                        <div class="flex flex-wrap gap-2">\n                                                            ${e.artist_genres.map(e=>`\n                                                                <span class="px-3 py-1 bg-gray-200 text-gray-700 text-sm rounded-full">${e.name}</span>\n                                                            `).join("")}\n                                                        </div>\n                                                    `:""}\n\n                                                    ${s?`\n                                                        <div class="flex flex-wrap gap-3 mt-4">\n                                                            ${e.spotify_url?`<a href="${e.spotify_url}" target="_blank" class="w-10 h-10 flex items-center justify-center bg-[#1DB954] text-white rounded-full hover:scale-110 transition" title="Spotify"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/></svg></a>`:""}\n                                                            ${e.youtube_url?`<a href="${e.youtube_url}" target="_blank" class="w-10 h-10 flex items-center justify-center bg-[#FF0000] text-white rounded-full hover:scale-110 transition" title="YouTube"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg></a>`:""}\n                                                            ${e.instagram_url?`<a href="${e.instagram_url}" target="_blank" class="w-10 h-10 flex items-center justify-center bg-gradient-to-br from-[#833AB4] via-[#FD1D1D] to-[#FCAF45] text-white rounded-full hover:scale-110 transition" title="Instagram"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg></a>`:""}\n                                                            ${e.facebook_url?`<a href="${e.facebook_url}" target="_blank" class="w-10 h-10 flex items-center justify-center bg-[#1877F2] text-white rounded-full hover:scale-110 transition" title="Facebook"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg></a>`:""}\n                                                            ${e.tiktok_url?`<a href="${e.tiktok_url}" target="_blank" class="w-10 h-10 flex items-center justify-center bg-black text-white rounded-full hover:scale-110 transition" title="TikTok"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/></svg></a>`:""}\n                                                            ${e.website?`<a href="${e.website}" target="_blank" class="w-10 h-10 flex items-center justify-center bg-gray-700 text-white rounded-full hover:scale-110 transition" title="Website"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/></svg></a>`:""}\n                                                        </div>\n                                                    `:""}\n                                                </div>\n                                            </div>\n\n                                            ${n?`\n                                            \x3c!-- Social Stats --\x3e\n                                            <div class="mt-6 pt-6 border-t border-gray-200">\n                                                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-4">\n                                                    ${e.spotify_followers?`\n                                                        <div class="text-center p-3 bg-white rounded-xl shadow-sm">\n                                                            <div class="text-[#1DB954] mb-1"><svg class="w-6 h-6 mx-auto" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/></svg></div>\n                                                            <div class="text-xl font-bold text-gray-900">${t(e.spotify_followers)}</div>\n                                                            <div class="text-xs text-gray-500">Followers</div>\n                                                        </div>\n                                                    `:""}\n                                                    ${e.spotify_monthly_listeners?`\n                                                        <div class="text-center p-3 bg-white rounded-xl shadow-sm">\n                                                            <div class="text-[#1DB954] mb-1"><svg class="w-6 h-6 mx-auto" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/></svg></div>\n                                                            <div class="text-xl font-bold text-gray-900">${t(e.spotify_monthly_listeners)}</div>\n                                                            <div class="text-xs text-gray-500">Monthly</div>\n                                                        </div>\n                                                    `:""}\n                                                    ${e.youtube_subscribers?`\n                                                        <div class="text-center p-3 bg-white rounded-xl shadow-sm">\n                                                            <div class="text-[#FF0000] mb-1"><svg class="w-6 h-6 mx-auto" fill="currentColor" viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg></div>\n                                                            <div class="text-xl font-bold text-gray-900">${t(e.youtube_subscribers)}</div>\n                                                            <div class="text-xs text-gray-500">Subscribers</div>\n                                                        </div>\n                                                    `:""}\n                                                    ${e.youtube_total_views?`\n                                                        <div class="text-center p-3 bg-white rounded-xl shadow-sm">\n                                                            <div class="text-[#FF0000] mb-1"><svg class="w-6 h-6 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg></div>\n                                                            <div class="text-xl font-bold text-gray-900">${t(e.youtube_total_views)}</div>\n                                                            <div class="text-xs text-gray-500">Views</div>\n                                                        </div>\n                                                    `:""}\n                                                    ${e.instagram_followers?`\n                                                        <div class="text-center p-3 bg-white rounded-xl shadow-sm">\n                                                            <div class="text-[#E4405F] mb-1"><svg class="w-6 h-6 mx-auto" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg></div>\n                                                            <div class="text-xl font-bold text-gray-900">${t(e.instagram_followers)}</div>\n                                                            <div class="text-xs text-gray-500">Followers</div>\n                                                        </div>\n                                                    `:""}\n                                                    ${e.facebook_followers?`\n                                                        <div class="text-center p-3 bg-white rounded-xl shadow-sm">\n                                                            <div class="text-[#1877F2] mb-1"><svg class="w-6 h-6 mx-auto" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg></div>\n                                                            <div class="text-xl font-bold text-gray-900">${t(e.facebook_followers)}</div>\n                                                            <div class="text-xs text-gray-500">Followers</div>\n                                                        </div>\n                                                    `:""}\n                                                    ${e.tiktok_followers?`\n                                                        <div class="text-center p-3 bg-white rounded-xl shadow-sm">\n                                                            <div class="text-black mb-1"><svg class="w-6 h-6 mx-auto" fill="currentColor" viewBox="0 0 24 24"><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/></svg></div>\n                                                            <div class="text-xl font-bold text-gray-900">${t(e.tiktok_followers)}</div>\n                                                            <div class="text-xs text-gray-500">Followers</div>\n                                                        </div>\n                                                    `:""}\n                                                </div>\n                                            </div>\n                                            `:""}\n\n                                            ${e.bio?`\n                                            \x3c!-- Bio --\x3e\n                                            <div class="mt-6 pt-6 border-t border-gray-200">\n                                                <div class="prose prose-sm max-w-none text-gray-600">${e.bio}</div>\n                                            </div>\n                                            `:""}\n\n                                            ${i&&i.video_id?`\n                                            \x3c!-- YouTube Video Embed --\x3e\n                                            <div class="mt-6 pt-6 border-t border-gray-200">\n                                                <h4 class="text-lg font-semibold text-gray-900 mb-4">Ultimul videoclip</h4>\n                                                <div class="relative pb-[56.25%] h-0 rounded-xl overflow-hidden shadow-lg">\n                                                    <iframe\n                                                        class="absolute top-0 left-0 w-full h-full"\n                                                        src="https://www.youtube.com/embed/${i.video_id}"\n                                                        title="${i.title||"YouTube video"}"\n                                                        frameborder="0"\n                                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"\n                                                        allowfullscreen>\n                                                    </iframe>\n                                                </div>\n                                                ${i.title?`<p class="mt-2 text-sm text-gray-600">${i.title}</p>`:""}\n                                            </div>\n                                            `:""}\n                                        </div>\n                                    </div>\n                                `}).join("")}\n                            </div>\n                        </div>\n                        `:""}\n\n                        ${t.venue?`\n                        <div class="mb-8 collapsible-section" data-section="location">\n                            <h2 class="text-xl font-semibold text-gray-900 mb-4 collapsible-header cursor-pointer lg:cursor-default flex items-center justify-between" data-target="location">\n                                <span>Locație</span>\n                                <svg class="w-5 h-5 collapsible-icon lg:hidden transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>\n                                </svg>\n                            </h2>\n                            <div class="bg-gray-50 rounded-lg overflow-hidden collapsible-content" data-content="location">\n                                ${t.venue.image_url?`\n                                <img src="${t.venue.image_url}" alt="${t.venue.name}" class="w-full h-48 object-cover">\n                                `:""}\n                                <div class="p-4">\n                                    <h3 class="font-semibold text-lg text-gray-900 mb-2">${t.venue.name}</h3>\n\n                                    ${t.venue.address||t.venue.city||t.venue.state||t.venue.country?`\n                                    <div class="flex items-start mb-3">\n                                        <svg class="w-5 h-5 text-gray-400 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>\n                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>\n                                        </svg>\n                                        <div class="text-gray-600">\n                                            ${t.venue.address?`<div>${t.venue.address}</div>`:""}\n                                            ${t.venue.city||t.venue.state||t.venue.country?`\n                                            <div>${[t.venue.city,t.venue.state,t.venue.country].filter(Boolean).join(", ")}</div>\n                                            `:""}\n                                        </div>\n                                    </div>\n                                    `:""}\n\n                                    ${t.venue.phone||t.venue.phone2?`\n                                    <div class="flex items-center mb-3">\n                                        <svg class="w-5 h-5 text-gray-400 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>\n                                        </svg>\n                                        <div class="text-gray-600">\n                                            ${t.venue.phone?`<a href="tel:${t.venue.phone}" class="hover:text-primary">${t.venue.phone}</a>`:""}\n                                            ${t.venue.phone&&t.venue.phone2?" / ":""}\n                                            ${t.venue.phone2?`<a href="tel:${t.venue.phone2}" class="hover:text-primary">${t.venue.phone2}</a>`:""}\n                                        </div>\n                                    </div>\n                                    `:""}\n\n                                    ${t.venue.email||t.venue.email2?`\n                                    <div class="flex items-center mb-3">\n                                        <svg class="w-5 h-5 text-gray-400 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>\n                                        </svg>\n                                        <div class="text-gray-600">\n                                            ${t.venue.email?`<a href="mailto:${t.venue.email}" class="hover:text-primary">${t.venue.email}</a>`:""}\n                                            ${t.venue.email&&t.venue.email2?" / ":""}\n                                            ${t.venue.email2?`<a href="mailto:${t.venue.email2}" class="hover:text-primary">${t.venue.email2}</a>`:""}\n                                        </div>\n                                    </div>\n                                    `:""}\n\n                                    <div class="flex flex-wrap gap-3 mt-4">\n                                        ${t.venue.website_url?`\n                                        <a href="${t.venue.website_url}" target="_blank" class="inline-flex items-center px-3 py-1.5 bg-gray-200 hover:bg-gray-300 rounded text-sm text-gray-700 transition">\n                                            <svg class="w-4 h-4 mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/>\n                                            </svg>\n                                            Website\n                                        </a>\n                                        `:""}\n                                        ${t.venue.google_maps_url?`\n                                        <a href="${t.venue.google_maps_url}" target="_blank" class="inline-flex items-center px-3 py-1.5 bg-blue-100 hover:bg-blue-200 rounded text-sm text-blue-700 transition">\n                                            <svg class="w-4 h-4 mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/>\n                                            </svg>\n                                            Google Maps\n                                        </a>\n                                        `:t.venue.latitude&&t.venue.longitude?`\n                                        <a href="https://www.google.com/maps?q=${t.venue.latitude},${t.venue.longitude}" target="_blank" class="inline-flex items-center px-3 py-1.5 bg-blue-100 hover:bg-blue-200 rounded text-sm text-blue-700 transition">\n                                            <svg class="w-4 h-4 mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/>\n                                            </svg>\n                                            Google Maps\n                                        </a>\n                                        `:""}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        `:""}\n                    </div>\n\n                    ${d?"":`\n                    <div class="lg:col-span-1">\n                        <div class="bg-white rounded-lg shadow-lg p-6 sticky top-24">\n                            <h2 class="text-xl font-semibold text-gray-900 mb-4">Bilete</h2>\n\n                            ${t.is_sold_out||t.door_sales_only||t.is_cancelled?`\n                                <div class="mb-4 p-4 rounded ${t.is_cancelled?"bg-red-50 border border-red-200":"bg-yellow-50 border border-yellow-200"}">\n                                    <p class="text-sm ${t.is_cancelled?"text-red-700":"text-yellow-700"}">\n                                        ${t.is_cancelled?"Eveniment anulat":t.is_sold_out?"Bilete epuizate":"Bilete disponibile doar la intrare"}\n                                    </p>\n                                </div>\n                            `:""}\n\n                            ${t.ticket_types&&t.ticket_types.length>0&&!t.is_cancelled&&!t.door_sales_only&&!t.is_sold_out?`\n                                <div class="space-y-4 mb-6">\n                                    ${t.ticket_types.map(e=>{const n=e.currency||t.currency||"RON",s=e.available??0,i=Math.min(10,s),a=t.commission,r=(null==a?void 0:a.is_added_on_top)&&e.commission_amount>0;return`\n                                        <div class="border border-gray-200 rounded-lg p-4 ${"active"!==e.status?"opacity-50":""}">\n                                            <div class="flex justify-between items-start mb-2">\n                                                <div class="flex items-center gap-2">\n                                                    <h3 class="font-semibold text-gray-900">${e.name}</h3>\n                                                    ${r?`\n                                                    <div class="relative group">\n                                                        <svg class="w-4 h-4 text-gray-400 cursor-help" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>\n                                                        </svg>\n                                                        <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">\n                                                            Prețul include comision Tixello de ${e.commission_amount} ${n}\n                                                        </div>\n                                                    </div>\n                                                    `:""}\n                                                </div>\n                                            </div>\n                                            ${e.description?`<p class="text-sm text-gray-500 mb-2">${e.description}</p>`:""}\n                                            ${e.bulk_discounts&&e.bulk_discounts.length>0?`\n                                            <div class="mt-2 space-y-1">\n                                                ${e.bulk_discounts.map(e=>"buy_x_get_y"===e.rule_type?`<div class="text-xs text-green-600 bg-green-50 px-2 py-1 rounded">\n                                                            🎁 Cumpără ${e.buy_qty}, primești ${e.get_qty} GRATUIT\n                                                        </div>`:"amount_off_per_ticket"===e.rule_type?`<div class="text-xs text-green-600 bg-green-50 px-2 py-1 rounded">\n                                                            💰 ${e.amount_off/100} ${n} reducere/bilet pentru ${e.min_qty}+ bilete\n                                                        </div>`:"percent_off"===e.rule_type?`<div class="text-xs text-green-600 bg-green-50 px-2 py-1 rounded">\n                                                            📊 ${e.percent_off}% reducere pentru ${e.min_qty}+ bilete\n                                                        </div>`:"").join("")}\n                                            </div>\n                                            `:""}\n                                            <div class="flex justify-between items-start">\n                                                <div></div>\n                                                <div class="text-right">\n                                                    ${r?`\n                                                        <div>\n                                                            ${e.sale_price?`\n                                                                <span class="line-through text-gray-400 text-sm">${e.price} ${n}</span>\n                                                                <span class="font-bold text-primary block">${(parseFloat(e.sale_price)+parseFloat(e.commission_amount||0)).toFixed(2)} ${n}</span>\n                                                                <span class="text-xs text-gray-500">(${e.sale_price} + ${e.commission_amount} comision)</span>\n                                                            `:`\n                                                                <span class="font-bold text-primary">${(parseFloat(e.price)+parseFloat(e.commission_amount||0)).toFixed(2)} ${n}</span>\n                                                                <span class="text-xs text-gray-500 block">(${e.price} + ${e.commission_amount} comision)</span>\n                                                            `}\n                                                        </div>\n                                                    `:e.sale_price?`\n                                                        <div>\n                                                            <span class="line-through text-gray-400 text-sm">${e.price} ${n}</span>\n                                                            <span class="font-bold text-red-600 block">${e.sale_price} ${n}</span>\n                                                            ${e.discount_percent?`<span class="text-xs text-red-600">-${e.discount_percent}%</span>`:""}\n                                                        </div>\n                                                    `:`\n                                                        <span class="font-bold text-primary">${e.price} ${n}</span>\n                                                    `}\n                                                </div>\n                                            </div>\n                                            ${"active"===e.status&&s>0?`\n                                            <div class="flex items-center justify-between mt-3">\n                                                <div class="flex items-center gap-2">\n                                                    <button class="ticket-minus w-8 h-8 flex items-center justify-center border border-gray-300 rounded hover:bg-gray-100" data-ticket-id="${e.id}">\n                                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"/>\n                                                        </svg>\n                                                    </button>\n                                                    <span class="ticket-qty-display w-12 text-center font-semibold" data-ticket-id="${e.id}" data-price="${e.sale_price||e.price}" data-base-price="${e.price}" data-currency="${n}" data-bulk-discounts='${JSON.stringify(e.bulk_discounts||[])}' data-commission-rate="${(null==a?void 0:a.rate)||0}" data-has-commission-on-top="${r}">0</span>\n                                                    <button class="ticket-plus w-8 h-8 flex items-center justify-center border border-gray-300 rounded hover:bg-gray-100" data-ticket-id="${e.id}" data-max="${i}">\n                                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>\n                                                        </svg>\n                                                    </button>\n                                                </div>\n                                                <span class="text-sm text-gray-500">${s} disponibile</span>\n                                            </div>\n                                            `:`\n                                                <p class="text-sm text-gray-500 mt-2">${"active"!==e.status?"Indisponibil":"Stoc epuizat"}</p>\n                                            `}\n                                        </div>\n                                    `}).join("")}\n                                </div>\n\n                                <div class="border-t pt-4 mb-4">\n                                    <div class="flex justify-between items-center text-lg font-bold">\n                                        <span>Total</span>\n                                        <span id="cart-total-price">0 ${t.currency||"RON"}</span>\n                                    </div>\n                                </div>\n\n                                <button id="add-to-cart-btn" class="w-full py-3 bg-primary text-white font-semibold rounded-lg hover:bg-primary-dark transition disabled:bg-gray-300 disabled:cursor-not-allowed" disabled>\n                                    Adaugă în coș\n                                </button>\n                                <button id="watchlist-btn" class="w-full mt-3 py-3 border-2 border-primary text-primary font-semibold rounded-lg hover:bg-primary hover:text-white transition flex items-center justify-center gap-2" data-event-id="${t.id}">\n                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>\n                                    </svg>\n                                    <span id="watchlist-btn-text">Adaugă la favorite</span>\n                                </button>\n                                <p class="text-center text-xs text-gray-400 mt-4">\n                                    Ticketing system powered by <a href="https://tixello.com" target="_blank" class="text-primary hover:underline">Tixello</a>\n                                </p>\n                            `:'\n                                <p class="text-gray-500 text-center py-4">Nu sunt bilete disponibile pentru achiziție online.</p>\n                            '}\n                        </div>\n                    </div>\n                    `}\n                `,!d&&t.ticket_types&&t.ticket_types.length>0&&!t.is_cancelled&&!t.door_sales_only&&!t.is_sold_out){const e=t.ticket_types.reduce((e,t)=>{const n=parseFloat(t.sale_price||t.price)||0;return n>0&&(0===e||n<e)?n:e},0),n=t.currency||"RON",s=`\n                        <style>\n                            .mobile-tickets-btn {\n                                display: none;\n                                position: fixed;\n                                bottom: 0;\n                                left: 0;\n                                right: 0;\n                                z-index: 40;\n                                background: linear-gradient(135deg, var(--tixello-primary, #6366f1) 0%, var(--tixello-primary-dark, #4f46e5) 100%);\n                                color: white;\n                                padding: 1rem 1.5rem;\n                                justify-content: space-between;\n                                align-items: center;\n                                cursor: pointer;\n                                box-shadow: 0 -4px 20px rgba(0,0,0,0.15);\n                            }\n                            @media (max-width: 1023px) {\n                                .mobile-tickets-btn { display: flex; }\n                                .event-detail-container { padding-bottom: 80px; }\n                            }\n                            .mobile-tickets-overlay {\n                                position: fixed;\n                                inset: 0;\n                                background: rgba(0,0,0,0.5);\n                                z-index: 45;\n                                opacity: 0;\n                                pointer-events: none;\n                                transition: opacity 0.3s ease;\n                            }\n                            .mobile-tickets-overlay.open {\n                                opacity: 1;\n                                pointer-events: auto;\n                            }\n                            .mobile-tickets-panel {\n                                position: fixed;\n                                bottom: 0;\n                                left: 0;\n                                right: 0;\n                                z-index: 50;\n                                background: white;\n                                border-radius: 1.5rem 1.5rem 0 0;\n                                box-shadow: 0 -8px 30px rgba(0,0,0,0.2);\n                                transform: translateY(100%);\n                                transition: transform 0.3s ease-out;\n                                max-height: 85vh;\n                                overflow-y: auto;\n                            }\n                            .mobile-tickets-panel.open {\n                                transform: translateY(0);\n                            }\n                            @media (min-width: 1024px) {\n                                .mobile-tickets-btn, .mobile-tickets-overlay, .mobile-tickets-panel { display: none !important; }\n                            }\n                        </style>\n\n                        \x3c!-- Mobile: Sticky bottom button --\x3e\n                        <div class="mobile-tickets-btn" id="mobile-tickets-btn">\n                            <div>\n                                <div style="font-weight: 700; font-size: 1.1rem;">Bilete</div>\n                                <div style="font-size: 0.875rem; opacity: 0.9;">Începând de la ${e} ${n}</div>\n                            </div>\n                            <svg style="width: 24px; height: 24px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/>\n                            </svg>\n                        </div>\n\n                        \x3c!-- Mobile: Overlay --\x3e\n                        <div class="mobile-tickets-overlay" id="mobile-tickets-overlay"></div>\n\n                        \x3c!-- Mobile: Tickets panel --\x3e\n                        <div class="mobile-tickets-panel" id="mobile-tickets-panel">\n                            <div style="padding: 1rem 1.5rem; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; background: white; z-index: 10; border-radius: 1.5rem 1.5rem 0 0;">\n                                <h2 style="font-size: 1.25rem; font-weight: 600; margin: 0;">Selectează bilete</h2>\n                                <button id="mobile-tickets-close" style="padding: 0.5rem; border-radius: 0.5rem; border: none; background: #f3f4f6; cursor: pointer;">\n                                    <svg style="width: 24px; height: 24px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>\n                                    </svg>\n                                </button>\n                            </div>\n                            <div style="padding: 1rem 1.5rem;">\n                                <div id="mobile-ticket-types">\n                                    ${t.ticket_types.map(e=>{const n=e.currency||t.currency||"RON",s=e.available??0,i=Math.min(10,s);return"active"===e.status&&s>0?`\n                                        <div style="border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1rem; margin-bottom: 1rem;">\n                                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">\n                                                <span style="font-weight: 600;">${e.name}</span>\n                                                <span style="font-weight: 600; color: var(--tixello-primary, #6366f1);">${e.sale_price||e.price} ${n}</span>\n                                            </div>\n                                            ${e.description?`<p style="font-size: 0.875rem; color: #6b7280; margin-bottom: 0.5rem;">${e.description}</p>`:""}\n                                            <div style="display: flex; align-items: center; justify-content: space-between;">\n                                                <div style="display: flex; align-items: center; gap: 0.5rem;">\n                                                    <button class="mobile-ticket-minus" data-ticket-id="${e.id}" style="width: 2rem; height: 2rem; border: 1px solid #d1d5db; border-radius: 0.25rem; background: white; cursor: pointer;">−</button>\n                                                    <span class="mobile-ticket-qty" data-ticket-id="${e.id}" style="width: 2rem; text-align: center; font-weight: 600;">0</span>\n                                                    <button class="mobile-ticket-plus" data-ticket-id="${e.id}" data-max="${i}" style="width: 2rem; height: 2rem; border: 1px solid #d1d5db; border-radius: 0.25rem; background: white; cursor: pointer;">+</button>\n                                                </div>\n                                                <span style="font-size: 0.75rem; color: #9ca3af;">${s} disponibile</span>\n                                            </div>\n                                        </div>\n                                        `:""}).join("")}\n                                </div>\n                                <div style="border-top: 1px solid #e5e7eb; padding-top: 1rem; margin-top: 1rem;">\n                                    <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">\n                                        <span style="font-weight: 600;">Total:</span>\n                                        <span id="mobile-cart-total" style="font-size: 1.25rem; font-weight: 700;">0 ${n}</span>\n                                    </div>\n                                    <button id="mobile-add-to-cart-btn" class="w-full py-3 bg-primary text-white font-semibold rounded-lg disabled:bg-gray-300 disabled:cursor-not-allowed" disabled>\n                                        Adaugă în coș\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    `,i=document.createElement("div");i.id="mobile-tickets-container",i.innerHTML=s,document.body.appendChild(i),this.setupMobileTicketsPanel()}d||this.setupTicketHandlers(),this.setupCollapsibleSections(),this.initCountdown()}}catch(n){this.render404()}}}setupTicketHandlers(){const e=document.querySelectorAll(".ticket-qty-display"),t=document.getElementById("cart-total-price"),n=document.getElementById("add-to-cart-btn"),s={},i={};document.querySelectorAll(".ticket-qty-display").forEach(e=>{const t=e.dataset.ticketId||"",n=e.dataset.bulkDiscounts;if(n)try{i[t]=JSON.parse(n)}catch(s){i[t]=[]}else i[t]=[]});const a=()=>{let a=0,r=0,o=0,l=!1,d="RON",c=!1;e.forEach(e=>{const t=e.dataset.ticketId||"",n=s[t]||0,m=parseFloat(e.dataset.price||"0"),u=parseFloat(e.dataset.basePrice||"0"),p=e.dataset.currency||"RON",g=parseFloat(e.dataset.commissionRate||"0"),h="true"===e.dataset.hasCommissionOnTop,x=i[t]||[];if(n>0){const e=((e,t,n)=>{let s=e*t,i=0,a="";for(const r of n){let n=e*t,o=0,l="";if("buy_x_get_y"===r.rule_type&&e>=r.buy_qty){const s=Math.floor(e/r.buy_qty)*r.get_qty;n=(e-s)*t,o=s*t,l=`Buy ${r.buy_qty} get ${r.get_qty} free`}else if("amount_off_per_ticket"===r.rule_type&&e>=r.min_qty){const s=r.amount_off/100;o=e*s,n=e*t-o,l=`${s} off per ticket`}else"percent_off"===r.rule_type&&e>=r.min_qty&&(o=e*t*(r.percent_off/100),n=e*t-o,l=`${r.percent_off}% off`);n<s&&(s=n,i=o,a=l)}return{total:s,discount:i,info:a}})(n,m,x);if(a+=e.total,r+=e.discount,l=!0,d=p,h&&g>0){o+=n*u*(g/100),c=!0}}});const m=a+o;if(t)if(r>0&&c){const e=a+r;t.innerHTML=`\n                        <div class="text-sm text-gray-500 line-through">${e.toFixed(2)} ${d}</div>\n                        <div class="text-sm text-green-600">-${r.toFixed(2)} ${d} reducere</div>\n                        <div class="text-sm text-gray-500">+${o.toFixed(2)} ${d} comision</div>\n                        <div class="text-lg font-bold text-primary">${m.toFixed(2)} ${d}</div>\n                    `}else if(r>0){const e=a+r;t.innerHTML=`\n                        <div class="text-sm text-gray-500 line-through">${e.toFixed(2)} ${d}</div>\n                        <div class="text-lg font-bold text-green-600">${a.toFixed(2)} ${d}</div>\n                        <div class="text-xs text-green-600">Economisești ${r.toFixed(2)} ${d}</div>\n                    `}else c?t.innerHTML=`\n                        <div class="text-sm text-gray-500">${a.toFixed(2)} + ${o.toFixed(2)} comision</div>\n                        <div class="text-lg font-bold text-primary">${m.toFixed(2)} ${d}</div>\n                    `:t.textContent=`${a.toFixed(2)} ${d}`;n&&(n.disabled=!l)};document.querySelectorAll(".ticket-plus").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.ticketId||"",n=parseInt(e.dataset.max||"10"),i=s[t]||0;if(i<n){s[t]=i+1;const e=document.querySelector(`.ticket-qty-display[data-ticket-id="${t}"]`);e&&(e.textContent=s[t].toString()),a()}})}),document.querySelectorAll(".ticket-minus").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.ticketId||"",n=s[t]||0;if(n>0){s[t]=n-1;const e=document.querySelector(`.ticket-qty-display[data-ticket-id="${t}"]`);e&&(e.textContent=s[t].toString()),a()}})}),n&&n.addEventListener("click",()=>{var t;null==(t=document.querySelector("#event-detail h1"))||t.textContent;const n=window.currentEventData;let i=!1;e.forEach(e=>{const t=parseInt(e.dataset.ticketId||"0"),a=s[t]||0;if(a>0&&n){const e=n.ticket_types.find(e=>e.id===t),s=n.commission,r=(null==s?void 0:s.is_added_on_top)&&e.commission_amount>0;e&&(b.addItem({eventId:n.id,eventTitle:n.title,eventSlug:n.slug,eventDate:n.start_date,ticketTypeId:e.id,ticketTypeName:e.name,price:e.price,salePrice:e.sale_price,finalPrice:e.final_price||e.sale_price||e.price,commissionAmount:e.commission_amount||0,commissionRate:(null==s?void 0:s.rate)||0,hasCommissionOnTop:r,quantity:a,currency:e.currency||"RON",bulkDiscounts:e.bulk_discounts||[]}),i=!0)}}),i?(f.show("✓ Biletele au fost adăugate în coș!","success"),this.updateCartBadge(),this.navigate("/cart")):f.show("Te rog selectează cel puțin un bilet.","error")});const r=document.getElementById("watchlist-btn");if(r){(async()=>{if(this.isAuthenticated())try{const e=r.dataset.eventId,t=await this.fetchApi(`/account/watchlist/${e}/check`),n=document.getElementById("watchlist-btn-text");t.in_watchlist?(n&&(n.textContent="În watchlist"),r.classList.add("bg-primary","text-white"),r.classList.remove("text-primary")):(n&&(n.textContent="Adaugă la favorite"),r.classList.remove("bg-primary","text-white"),r.classList.add("text-primary"))}catch(e){}})(),r.addEventListener("click",async()=>{var e;if(!this.isAuthenticated())return void this.navigate("/login");const t=r.dataset.eventId,n=document.getElementById("watchlist-btn-text");try{(await this.fetchApi(`/account/watchlist/${t}/check`)).in_watchlist?(await this.deleteApi(`/account/watchlist/${t}`),n&&(n.textContent="Adaugă la favorite"),r.classList.remove("bg-primary","text-white"),r.classList.add("text-primary"),f.show("✓ Eveniment șters din watchlist","success")):(await this.postApi(`/account/watchlist/${t}`,{}),n&&(n.textContent="În watchlist"),r.classList.add("bg-primary","text-white"),r.classList.remove("text-primary"),f.show("✓ Eveniment adăugat la watchlist","success"))}catch(s){(null==(e=s.message)?void 0:e.includes("deja în watchlist"))?f.show("Evenimentul este deja în watchlist","info"):f.show("Eroare la actualizarea watchlist-ului","error")}})}}setupMobileTicketsPanel(){const e=document.getElementById("mobile-tickets-btn"),t=document.getElementById("mobile-tickets-close"),n=document.getElementById("mobile-tickets-overlay"),s=document.getElementById("mobile-tickets-panel"),i=document.getElementById("mobile-add-to-cart-btn"),a=document.getElementById("mobile-cart-total");if(!e||!s||!n)return;const r=()=>{n.classList.remove("open"),s.classList.remove("open"),document.body.style.overflow=""};e.addEventListener("click",()=>{n.classList.add("open"),s.classList.add("open"),document.body.style.overflow="hidden"}),t&&t.addEventListener("click",r),n.addEventListener("click",r);const o={},l=window.currentEventData,d=(null==l?void 0:l.currency)||"RON",c=()=>{let e=0,t=!1;document.querySelectorAll(".mobile-ticket-qty").forEach(n=>{var s;const i=n.dataset.ticketId||"",a=o[i]||0;if(a>0){t=!0;const n=null==(s=null==l?void 0:l.ticket_types)?void 0:s.find(e=>e.id==i);if(n){const t=parseFloat(n.sale_price||n.price)||0;e+=t*a}}}),a&&(a.textContent=`${e.toFixed(2)} ${d}`),i&&(i.disabled=!t),Object.keys(o).forEach(e=>{const t=document.querySelector(`.ticket-qty-display[data-ticket-id="${e}"]`);t&&(t.textContent=o[e].toString())})};document.querySelectorAll(".mobile-ticket-plus").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.ticketId||"",n=parseInt(e.dataset.max||"10"),s=o[t]||0;if(s<n){o[t]=s+1;const e=document.querySelector(`.mobile-ticket-qty[data-ticket-id="${t}"]`);e&&(e.textContent=o[t].toString()),c()}})}),document.querySelectorAll(".mobile-ticket-minus").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.ticketId||"",n=o[t]||0;if(n>0){o[t]=n-1;const e=document.querySelector(`.mobile-ticket-qty[data-ticket-id="${t}"]`);e&&(e.textContent=o[t].toString()),c()}})}),i&&i.addEventListener("click",()=>{let e=!1;Object.keys(o).forEach(t=>{var n,s;const i=o[t]||0;if(i>0&&l){const a=l.ticket_types.find(e=>e.id==t);a&&(b.addItem({eventId:l.id,eventTitle:l.title,eventSlug:l.slug,eventDate:l.start_date,ticketTypeId:a.id,ticketTypeName:a.name,price:a.price,salePrice:a.sale_price,finalPrice:a.final_price||a.sale_price||a.price,commissionAmount:a.commission_amount||0,commissionRate:(null==(n=l.commission)?void 0:n.rate)||0,hasCommissionOnTop:(null==(s=l.commission)?void 0:s.is_added_on_top)&&a.commission_amount>0,quantity:i,currency:a.currency||"RON",bulkDiscounts:a.bulk_discounts||[]}),e=!0)}}),e?(r(),f.show("✓ Biletele au fost adăugate în coș!","success"),this.updateCartBadge(),this.navigate("/cart")):f.show("Te rog selectează cel puțin un bilet.","error")}),window.addEventListener("popstate",()=>{const e=document.getElementById("mobile-tickets-container");e&&e.remove()},{once:!0})}setupCollapsibleSections(){const e=window.innerWidth<1024;if(!document.getElementById("collapsible-styles")){const e=document.createElement("style");e.id="collapsible-styles",e.textContent="\n                @media (max-width: 1023px) {\n                    .collapsible-section .collapsible-content {\n                        max-height: 0;\n                        overflow: hidden;\n                        transition: max-height 0.3s ease-out, opacity 0.3s ease-out;\n                        opacity: 0;\n                    }\n                    .collapsible-section.expanded .collapsible-content {\n                        max-height: 2000px;\n                        opacity: 1;\n                    }\n                    .collapsible-section .collapsible-icon {\n                        transition: transform 0.3s ease;\n                    }\n                    .collapsible-section.expanded .collapsible-icon {\n                        transform: rotate(180deg);\n                    }\n                    .collapsible-header {\n                        padding: 0.75rem 0;\n                        border-bottom: 1px solid #e5e7eb;\n                        margin-bottom: 0 !important;\n                    }\n                    .collapsible-section.expanded .collapsible-header {\n                        border-bottom-color: transparent;\n                        margin-bottom: 1rem !important;\n                    }\n                }\n                @media (min-width: 1024px) {\n                    .collapsible-section .collapsible-content {\n                        max-height: none !important;\n                        opacity: 1 !important;\n                        overflow: visible !important;\n                    }\n                }\n            ",document.head.appendChild(e)}document.querySelectorAll(".collapsible-header").forEach(e=>{e.addEventListener("click",()=>{if(window.innerWidth>=1024)return;const t=e.dataset.target,n=document.querySelector(`[data-section="${t}"]`);n&&n.classList.toggle("expanded")})}),e||document.querySelectorAll(".collapsible-section").forEach(e=>{e.classList.add("expanded")})}renderCart(){const e=this.getContentElement();if(!e)return;const t=b.getCart(),n=b.getTotal();if(0===t.length)return void(e.innerHTML='\n                <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center">\n                    <svg class="w-24 h-24 mx-auto text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"/>\n                    </svg>\n                    <h1 class="text-2xl font-bold text-gray-900 mb-4">Coșul tău este gol</h1>\n                    <p class="text-gray-600 mb-8">Explorează evenimentele noastre și adaugă bilete în coș.</p>\n                    <a href="/events" class="px-6 py-3 bg-primary text-white font-semibold rounded-lg hover:bg-primary-dark transition inline-block">\n                        Vezi evenimente\n                    </a>\n                </div>\n            ');const s=t.map((e,t)=>{const n=e.salePrice||e.price,s=b.calculateBulkDiscount(e.quantity,n,e.bulkDiscounts);let i=s.total;const a=s.discount;let r=e.quantity*n,o=0;e.hasCommissionOnTop&&e.commissionRate>0&&(o=e.quantity*e.price*(e.commissionRate/100),i+=o,r+=o);const l=new Date(e.eventDate).toLocaleDateString("ro-RO",{weekday:"long",day:"numeric",month:"long",year:"numeric"});return`\n            <div class="bg-white rounded-lg shadow p-6">\n                <div class="flex justify-between items-start mb-4">\n                    <div class="flex-1">\n                        <h3 class="font-semibold text-lg text-gray-900 mb-1">${e.eventTitle}</h3>\n                        <p class="text-sm text-gray-600">${e.ticketTypeName}</p>\n                        <p class="text-sm text-gray-500">${l}</p>\n                    </div>\n                    <button class="remove-item-btn text-red-600 hover:text-red-700" data-event-id="${e.eventId}" data-ticket-id="${e.ticketTypeId}">\n                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>\n                        </svg>\n                    </button>\n                </div>\n\n                <div class="flex justify-between items-center">\n                    <div class="flex items-center gap-3">\n                        <button class="cart-qty-minus w-8 h-8 flex items-center justify-center border border-gray-300 rounded hover:bg-gray-100" data-event-id="${e.eventId}" data-ticket-id="${e.ticketTypeId}">\n                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"/>\n                            </svg>\n                        </button>\n                        <span class="cart-qty-display w-12 text-center font-semibold">${e.quantity}</span>\n                        <button class="cart-qty-plus w-8 h-8 flex items-center justify-center border border-gray-300 rounded hover:bg-gray-100" data-event-id="${e.eventId}" data-ticket-id="${e.ticketTypeId}">\n                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>\n                            </svg>\n                        </button>\n                    </div>\n                    <div class="text-right">\n                        ${a>0?`\n                            <div class="text-sm text-gray-500 line-through">${r.toFixed(2)} ${e.currency}</div>\n                            <div class="font-bold text-green-600">${i.toFixed(2)} ${e.currency}</div>\n                            <div class="text-xs text-green-600">-${a.toFixed(2)} ${e.currency}</div>\n                        `:`\n                            <div class="font-bold text-gray-900">${i.toFixed(2)} ${e.currency}</div>\n                        `}\n                    </div>\n                </div>\n            </div>\n        `}).join("");e.innerHTML=`\n            <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                <div class="flex justify-between items-center mb-8">\n                    <h1 class="text-3xl font-bold text-gray-900">Coșul meu</h1>\n                    <button id="clear-cart-btn" class="text-sm text-red-600 hover:text-red-700">Golește coșul</button>\n                </div>\n\n                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">\n                    <div class="lg:col-span-2 space-y-4">\n                        ${s}\n                    </div>\n\n                    <div class="lg:col-span-1">\n                        <div class="bg-white rounded-lg shadow p-6 sticky top-4">\n                            <h2 class="text-xl font-semibold text-gray-900 mb-4">Sumar comandă</h2>\n\n                            <div class="space-y-2 mb-4 pb-4 border-b">\n                                <div class="flex justify-between text-gray-600">\n                                    <span>Subtotal bilete</span>\n                                    <span>${n.subtotal.toFixed(2)} ${n.currency}</span>\n                                </div>\n                                ${n.bulkDiscount>0?`\n                                <div class="flex justify-between text-green-600">\n                                    <span>Discount bulk</span>\n                                    <span>-${n.bulkDiscount.toFixed(2)} ${n.currency}</span>\n                                </div>\n                                `:""}\n                                ${n.couponDiscount>0?`\n                                <div class="flex justify-between text-green-600">\n                                    <span>Cod promoțional${n.couponName?` (${n.couponName})`:""}</span>\n                                    <span>-${n.couponDiscount.toFixed(2)} ${n.currency}</span>\n                                </div>\n                                `:""}\n                                ${n.hasCommission?`\n                                <div class="flex justify-between text-gray-600">\n                                    <span>Comision Tixello</span>\n                                    <span>+${n.commission.toFixed(2)} ${n.currency}</span>\n                                </div>\n                                `:""}\n                            </div>\n\n                            \x3c!-- Discount Code Section --\x3e\n                            <div class="mb-4 pb-4 border-b">\n                                <label class="block text-sm font-medium text-gray-700 mb-2">Cod de reducere</label>\n                                <div class="flex gap-2">\n                                    <input type="text" id="discount-code-input" placeholder="Introdu codul"\n                                           class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary text-sm">\n                                    <button id="apply-discount-btn" class="px-4 py-2 bg-gray-800 text-white text-sm font-medium rounded-lg hover:bg-gray-700 transition">\n                                        Aplică\n                                    </button>\n                                </div>\n                                <div id="discount-code-message" class="mt-2 text-sm hidden"></div>\n                                <div id="applied-discount-display" class="hidden mt-3 p-3 bg-green-50 border border-green-200 rounded-lg">\n                                    <div class="flex justify-between items-center">\n                                        <div>\n                                            <span class="text-sm font-medium text-green-800" id="applied-discount-name"></span>\n                                            <span class="text-sm text-green-600 ml-2" id="applied-discount-value"></span>\n                                        </div>\n                                        <button id="remove-discount-btn" class="text-red-600 hover:text-red-700 text-sm">Elimină</button>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="flex justify-between items-center mb-6">\n                                <span class="text-lg font-semibold">Total</span>\n                                <span class="text-2xl font-bold text-primary" id="cart-total-amount">${n.total.toFixed(2)} ${n.currency}</span>\n                            </div>\n\n                            <button id="checkout-btn" class="w-full py-3 bg-primary text-white font-semibold rounded-lg hover:bg-primary-dark transition">\n                                Finalizează comanda\n                            </button>\n\n                            <a href="/events" class="w-full mt-3 py-3 bg-gray-100 text-gray-700 font-semibold rounded-lg hover:bg-gray-200 transition block text-center">\n                                Continuă cumpărăturile\n                            </a>\n\n                            <p class="text-center text-xs text-gray-400 mt-4">\n                                Ticketing system powered by <a href="https://tixello.com" target="_blank" class="text-primary hover:underline">Tixello</a>\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `,this.setupCartHandlers()}setupCartHandlers(){document.querySelectorAll(".remove-item-btn").forEach(e=>{e.addEventListener("click",e=>{const t=e.currentTarget,n=parseInt(t.dataset.eventId||"0"),s=parseInt(t.dataset.ticketId||"0");b.removeItem(n,s),this.updateCartBadge(),this.renderCart()})}),document.querySelectorAll(".cart-qty-plus").forEach(e=>{e.addEventListener("click",e=>{const t=e.currentTarget,n=parseInt(t.dataset.eventId||"0"),s=parseInt(t.dataset.ticketId||"0"),i=b.getCart().find(e=>e.eventId===n&&e.ticketTypeId===s);i&&(b.updateQuantity(n,s,i.quantity+1),this.updateCartBadge(),this.renderCart())})}),document.querySelectorAll(".cart-qty-minus").forEach(e=>{e.addEventListener("click",e=>{const t=e.currentTarget,n=parseInt(t.dataset.eventId||"0"),s=parseInt(t.dataset.ticketId||"0"),i=b.getCart().find(e=>e.eventId===n&&e.ticketTypeId===s);i&&i.quantity>1&&(b.updateQuantity(n,s,i.quantity-1),this.updateCartBadge(),this.renderCart())})});const e=document.getElementById("clear-cart-btn");e&&e.addEventListener("click",()=>{confirm("Sigur vrei să golești coșul?")&&(b.clearCart(),this.updateCartBadge(),this.renderCart())});const t=document.getElementById("checkout-btn");t&&t.addEventListener("click",()=>{this.navigate("/checkout")}),this.setupDiscountCodeHandlers()}setupDiscountCodeHandlers(){const e=document.getElementById("apply-discount-btn"),t=document.getElementById("discount-code-input"),n=document.getElementById("discount-code-message"),s=document.getElementById("applied-discount-display"),i=document.getElementById("remove-discount-btn");e&&t&&(e.addEventListener("click",async()=>{const i=t.value.trim();if(i){e.textContent="Se verifică...",e.disabled=!0;try{const e=await this.fetchApi("/cart/promo-code",{},{method:"POST",body:JSON.stringify({code:i,cart:b.getCart()})});if(e.success&&e.data){b.setDiscount({code:i,name:e.data.name||i,type:e.data.discount_type,value:e.data.discount_value,discountAmount:e.data.discount_amount});const a=document.getElementById("applied-discount-name"),r=document.getElementById("applied-discount-value");a&&(a.textContent=e.data.name||i),r&&(r.textContent="percentage"===e.data.discount_type?`(-${e.data.discount_value}%)`:`(-${e.data.discount_amount} ${b.getTotal().currency})`),s&&s.classList.remove("hidden"),n&&n.classList.add("hidden"),t.value="",t.disabled=!0,this.updateCartTotal()}else this.showDiscountMessage(e.message||"Cod invalid sau expirat.","error")}catch(a){this.showDiscountMessage("A apărut o eroare. Te rugăm să încerci din nou.","error")}finally{e.textContent="Aplică",e.disabled=!1}}else this.showDiscountMessage("Te rugăm să introduci un cod de reducere.","error")}),t.addEventListener("keypress",t=>{"Enter"===t.key&&(t.preventDefault(),e.click())})),i&&i.addEventListener("click",()=>{b.removeDiscount(),s&&s.classList.add("hidden"),t&&(t.disabled=!1,t.value=""),this.updateCartTotal()});const a=b.getDiscount();if(a&&s){const e=document.getElementById("applied-discount-name"),n=document.getElementById("applied-discount-value");e&&(e.textContent=a.name),n&&(n.textContent="percentage"===a.type?`(-${a.value}%)`:`(-${a.discountAmount} ${b.getTotal().currency})`),s.classList.remove("hidden"),t&&(t.disabled=!0)}}showDiscountMessage(e,t){const n=document.getElementById("discount-code-message");n&&(n.textContent=e,n.className="mt-2 text-sm "+("error"===t?"text-red-600":"text-green-600"),n.classList.remove("hidden"))}updateCartTotal(){const e=b.getTotal(),t=document.getElementById("cart-total-amount");t&&(t.textContent=`${e.total.toFixed(2)} ${e.currency}`)}async renderCheckout(){var e,t;const n=this.getContentElement();if(!n)return;const s=b.getCart(),i=b.getTotal();if(0===s.length)return void this.navigate("/cart");let a=null;if(this.authToken)try{const e=await this.fetchApi("/account/profile");e.success&&(a=e.data)}catch(d){}const r=a?`${a.first_name||""} ${a.last_name||""}`.trim():"",o=(null==a?void 0:a.email)||"",l=(null==a?void 0:a.phone)||"";n.innerHTML=`\n            <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                <h1 class="text-3xl font-bold text-gray-900 mb-8">Finalizare comandă</h1>\n\n                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">\n                    <div class="lg:col-span-2">\n                        <form id="checkout-form" class="space-y-6">\n                            <div class="bg-white rounded-lg shadow p-6">\n                                <h2 class="text-xl font-semibold text-gray-900 mb-4">Date personale</h2>\n                                <div class="space-y-4">\n                                    <div>\n                                        <label for="customer_name" class="block text-sm font-medium text-gray-700 mb-1">\n                                            Nume complet *\n                                        </label>\n                                        <input\n                                            type="text"\n                                            id="customer_name"\n                                            name="customer_name"\n                                            required\n                                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"\n                                            placeholder="Ion Popescu"\n                                            value="${r}"\n                                            value="${r}"\n                                        >\n                                    </div>\n                                    <div>\n                                        <label for="customer_email" class="block text-sm font-medium text-gray-700 mb-1">\n                                            Email *\n                                        </label>\n                                        <input\n                                            type="email"\n                                            id="customer_email"\n                                            name="customer_email"\n                                            required\n                                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"\n                                            placeholder="ion@example.com"\n                                            value="${o}"\n                                            value="${o}"\n                                        >\n                                    </div>\n                                    <div>\n                                        <label for="customer_phone" class="block text-sm font-medium text-gray-700 mb-1">\n                                            Telefon\n                                        </label>\n                                        <input\n                                            type="tel"\n                                            id="customer_phone"\n                                            name="customer_phone"\n                                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"\n                                            placeholder="0722123456"\n                                            value="${l}"\n                                            value="${l}"\n                                        >\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="bg-white rounded-lg shadow p-6">\n                                <h2 class="text-xl font-semibold text-gray-900 mb-4">Beneficiari bilete</h2>\n                                <p class="text-sm text-gray-600 mb-4">\n                                    Implicit, toate biletele vor fi pe numele tău. Poți specifica beneficiari diferiți pentru fiecare bilet.\n                                </p>\n                                <div class="flex items-start mb-4">\n                                    <input\n                                        type="checkbox"\n                                        id="different_beneficiaries"\n                                        name="different_beneficiaries"\n                                        class="mt-1 h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary"\n                                    >\n                                    <label for="different_beneficiaries" class="ml-2 text-sm text-gray-700">\n                                        Doresc să specific beneficiari diferiți pentru fiecare bilet\n                                    </label>\n                                </div>\n                                <div id="beneficiaries-section" class="hidden">\n                                    <div class="border-t pt-4">\n                                        <p class="text-sm text-gray-600 mb-4">\n                                            Completează datele pentru fiecare bilet. Primul bilet va fi pre-completat cu datele tale.\n                                        </p>\n                                        <div id="beneficiaries-container" class="space-y-4">\n                                            \x3c!-- Beneficiary fields will be generated dynamically --\x3e\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="bg-white rounded-lg shadow p-6">\n                                <h2 class="text-xl font-semibold text-gray-900 mb-4">Acorduri</h2>\n                                <div class="space-y-3 mb-6">\n                                    <div class="flex items-start">\n                                        <input\n                                            type="checkbox"\n                                            id="agree_terms"\n                                            name="agree_terms"\n                                            required\n                                            class="mt-1 h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary"\n                                        >\n                                        <label for="agree_terms" class="ml-2 text-sm text-gray-700">\n                                            Sunt de acord cu <a href="/terms" target="_blank" class="text-primary hover:underline">Termenii și Condițiile</a> *\n                                        </label>\n                                    </div>\n                                    <div class="flex items-start">\n                                        <input\n                                            type="checkbox"\n                                            id="agree_privacy"\n                                            name="agree_privacy"\n                                            required\n                                            class="mt-1 h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary"\n                                        >\n                                        <label for="agree_privacy" class="ml-2 text-sm text-gray-700">\n                                            Sunt de acord cu <a href="/privacy" target="_blank" class="text-primary hover:underline">Politica de Confidențialitate</a> a organizatorului, <a href="https://tixello.com/data-privacy-client" target="_blank" class="text-primary hover:underline">Politica Tixello</a> și procesarea datelor personale *\n                                        </label>\n                                    </div>\n                                    ${this.authToken?"":'\n                                    <div class="flex items-start">\n                                        <input\n                                            type="checkbox"\n                                            id="create_account"\n                                            name="create_account"\n                                            class="mt-1 h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary"\n                                        >\n                                        <label for="create_account" class="ml-2 text-sm text-gray-700">\n                                            Doresc să îmi creez un cont automat pentru comenzi viitoare\n                                        </label>\n                                    </div>\n                                    '}\n                                </div>\n                            </div>\n\n                            <div class="bg-white rounded-lg shadow p-6">\n                                <h2 class="text-xl font-semibold text-gray-900 mb-4">Preferințe notificări</h2>\n                                <p class="text-sm text-gray-600 mb-4">Alegeți cum doriți să primiți actualizări despre comandă:</p>\n                                <div class="space-y-3">\n                                    <div class="flex items-start">\n                                        <input\n                                            type="checkbox"\n                                            id="notification_email"\n                                            name="notification_email"\n                                            checked\n                                            class="mt-1 h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary"\n                                        >\n                                        <label for="notification_email" class="ml-2 text-sm text-gray-700">\n                                            Primește notificări pe email (confirmare comandă, bilete, reamintiri)\n                                        </label>\n                                    </div>\n                                    ${(null==(t=null==(e=this.config)?void 0:e.modules)?void 0:t.includes("whatsapp"))?'\n                                    <div class="flex items-start">\n                                        <input\n                                            type="checkbox"\n                                            id="notification_whatsapp"\n                                            name="notification_whatsapp"\n                                            class="mt-1 h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary"\n                                        >\n                                        <label for="notification_whatsapp" class="ml-2 text-sm text-gray-700">\n                                            Primește notificări pe WhatsApp (necesită număr de telefon valid)\n                                        </label>\n                                    </div>\n                                    ':""}\n                                </div>\n                            </div>\n\n                            <div class="bg-white rounded-lg shadow p-6">\n                                <h2 class="text-xl font-semibold text-gray-900 mb-4">Metodă de plată</h2>\n\n                                \x3c!-- Payment method tabs --\x3e\n                                <div class="mb-4">\n                                    <div class="flex border border-gray-200 rounded-lg overflow-hidden">\n                                        <button type="button" id="payment-method-card" class="flex-1 py-3 px-4 text-center text-sm font-medium bg-primary text-white transition payment-method-tab active" data-method="card">\n                                            <span class="flex items-center justify-center gap-2">\n                                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/>\n                                                </svg>\n                                                Card\n                                            </span>\n                                        </button>\n                                        <button type="button" id="payment-method-wallet" class="flex-1 py-3 px-4 text-center text-sm font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition payment-method-tab" data-method="wallet">\n                                            <span class="flex items-center justify-center gap-2">\n                                                <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">\n                                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/>\n                                                </svg>\n                                                Apple Pay / Google Pay\n                                            </span>\n                                        </button>\n                                    </div>\n                                </div>\n\n                                \x3c!-- Payment Element container --\x3e\n                                <div id="payment-element-container" class="mb-4">\n                                    <div id="payment-element" class="min-h-[150px]">\n                                        \x3c!-- Stripe Payment Element will be mounted here --\x3e\n                                        <div class="animate-pulse flex flex-col space-y-3">\n                                            <div class="h-10 bg-gray-200 rounded"></div>\n                                            <div class="flex space-x-3">\n                                                <div class="h-10 bg-gray-200 rounded flex-1"></div>\n                                                <div class="h-10 bg-gray-200 rounded flex-1"></div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div id="payment-message" class="hidden text-red-600 text-sm mt-2"></div>\n                                </div>\n\n                                <p class="text-gray-500 text-sm mb-4">\n                                    <svg class="w-4 h-4 inline mr-1 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>\n                                    </svg>\n                                    Plată securizată prin Stripe. Vei primi biletele pe email imediat după finalizare.\n                                </p>\n\n                                <button\n                                    type="submit"\n                                    id="submit-order-btn"\n                                    class="w-full py-3 bg-primary text-white font-semibold rounded-lg hover:bg-primary-dark transition disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2"\n                                    disabled\n                                >\n                                    <span id="submit-btn-text">Plasează comanda - ${i.total.toFixed(2)} ${i.currency}</span>\n                                    <svg id="submit-btn-spinner" class="hidden animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">\n                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>\n                                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>\n                                    </svg>\n                                </button>\n                                <p class="text-center text-xs text-gray-400 mt-4">\n                                    Ticketing system powered by <a href="https://tixello.com" target="_blank" class="text-primary hover:underline">Tixello</a>\n                                </p>\n                            </div>\n                        </form>\n                    </div>\n\n                    <div class="lg:col-span-1">\n                        <div class="bg-white rounded-lg shadow p-6 sticky top-4">\n                            <h2 class="text-xl font-semibold text-gray-900 mb-4">Sumar comandă</h2>\n\n                            <div class="space-y-3 mb-4 pb-4 border-b">\n                                ${s.map(e=>{const t=e.salePrice||e.price;let n=b.calculateBulkDiscount(e.quantity,t,e.bulkDiscounts).total;if(e.hasCommissionOnTop&&e.commissionRate>0){n+=e.quantity*e.price*(e.commissionRate/100)}return`\n                                    <div class="flex justify-between text-sm">\n                                        <div>\n                                            <div class="font-medium">${e.eventTitle}</div>\n                                            <div class="text-gray-500">${e.ticketTypeName} × ${e.quantity}</div>\n                                        </div>\n                                        <div class="font-medium">${n.toFixed(2)} ${e.currency}</div>\n                                    </div>\n                                `}).join("")}\n                            </div>\n\n                            <div class="space-y-2 mb-4 pb-4 border-b">\n                                <div class="flex justify-between text-gray-600">\n                                    <span>Subtotal bilete</span>\n                                    <span>${i.subtotal.toFixed(2)} ${i.currency}</span>\n                                </div>\n                                ${i.bulkDiscount>0?`\n                                <div class="flex justify-between text-green-600">\n                                    <span>Discount bulk</span>\n                                    <span>-${i.bulkDiscount.toFixed(2)} ${i.currency}</span>\n                                </div>\n                                `:""}\n                                ${i.couponDiscount>0?`\n                                <div class="flex justify-between text-green-600">\n                                    <span>Cod promoțional${i.couponName?` (${i.couponName})`:""}</span>\n                                    <span>-${i.couponDiscount.toFixed(2)} ${i.currency}</span>\n                                </div>\n                                `:""}\n                                ${i.hasCommission?`\n                                <div class="flex justify-between text-gray-600">\n                                    <span>Comision Tixello</span>\n                                    <span>+${i.commission.toFixed(2)} ${i.currency}</span>\n                                </div>\n                                `:""}\n                            </div>\n\n                            <div class="flex justify-between items-center">\n                                <span class="text-lg font-semibold">Total</span>\n                                <span class="text-2xl font-bold text-primary">${i.total.toFixed(2)} ${i.currency}</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `,this.setupCheckoutHandlers()}setupCheckoutHandlers(){const e=document.getElementById("checkout-form"),t=document.getElementById("submit-order-btn"),n=document.getElementById("submit-btn-text"),s=document.getElementById("submit-btn-spinner"),i=document.getElementById("payment-message");let a=null,r=null,o=null,l="";this.initializeStripePayment().then(e=>{e&&(a=e.stripe,r=e.elements,o=e.paymentElement,l=e.clientSecret,t&&(t.disabled=!1))}).catch(e=>{i&&(i.textContent="Nu s-a putut încărca sistemul de plată. Încercați din nou.",i.classList.remove("hidden"))});const d=document.querySelectorAll(".payment-method-tab");d.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.method;d.forEach(e=>{e.dataset.method===t?(e.classList.remove("bg-gray-100","text-gray-700","hover:bg-gray-200"),e.classList.add("bg-primary","text-white")):(e.classList.remove("bg-primary","text-white"),e.classList.add("bg-gray-100","text-gray-700","hover:bg-gray-200"))}),r&&o&&o.update({wallets:{applePay:"wallet"===t?"auto":"never",googlePay:"wallet"===t?"auto":"never"}})})});const c=document.getElementById("different_beneficiaries"),m=document.getElementById("beneficiaries-section"),u=document.getElementById("beneficiaries-container"),p=b.getCart().reduce((e,t)=>e+t.quantity,0);c&&m&&u&&c.addEventListener("change",()=>{var e,t,n;if(c.checked){m.classList.remove("hidden");const s=(null==(e=document.getElementById("customer_name"))?void 0:e.value)||"",i=(null==(t=document.getElementById("customer_email"))?void 0:t.value)||"",a=(null==(n=document.getElementById("customer_phone"))?void 0:n.value)||"";let r="";for(let e=0;e<p;e++){const t=0===e;r+=`\n                            <div class="bg-gray-50 p-4 rounded-lg">\n                                <h4 class="font-medium text-gray-900 mb-3">Bilet ${e+1}</h4>\n                                <div class="space-y-3">\n                                    <div>\n                                        <label class="block text-sm font-medium text-gray-700 mb-1">\n                                            Nume complet *\n                                        </label>\n                                        <input\n                                            type="text"\n                                            name="beneficiary_${e}_name"\n                                            required\n                                            value="${t?s:""}"\n                                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent text-sm"\n                                            placeholder="Nume complet"\n                                        >\n                                    </div>\n                                    <div>\n                                        <label class="block text-sm font-medium text-gray-700 mb-1">\n                                            Email (optional)\n                                        </label>\n                                        <input\n                                            type="email"\n                                            name="beneficiary_${e}_email"\n                                            value="${t?i:""}"\n                                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent text-sm"\n                                            placeholder="email@example.com"\n                                        >\n                                    </div>\n                                    <div>\n                                        <label class="block text-sm font-medium text-gray-700 mb-1">\n                                            Telefon (optional)\n                                        </label>\n                                        <input\n                                            type="tel"\n                                            name="beneficiary_${e}_phone"\n                                            value="${t?a:""}"\n                                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent text-sm"\n                                            placeholder="0722123456"\n                                        >\n                                    </div>\n                                </div>\n                            </div>\n                        `}u.innerHTML=r}else m.classList.add("hidden"),u.innerHTML=""}),e&&e.addEventListener("submit",async o=>{var d,c,m,u,p;o.preventDefault(),t&&(t.disabled=!0),n&&(n.textContent="Se procesează..."),s&&s.classList.remove("hidden");const g=new FormData(e),h=b.getCart(),x=[],v=document.getElementById("different_beneficiaries");if(null==v?void 0:v.checked){const e=h.reduce((e,t)=>e+t.quantity,0);for(let t=0;t<e;t++)x.push({name:g.get(`beneficiary_${t}_name`),email:g.get(`beneficiary_${t}_email`)||null,phone:g.get(`beneficiary_${t}_phone`)||null})}const y=(null==(d=document.getElementById("agree_terms"))?void 0:d.checked)??!1,w=(null==(c=document.getElementById("agree_privacy"))?void 0:c.checked)??!1,k=(null==(m=document.getElementById("create_account"))?void 0:m.checked)??!1,$=(null==(u=document.getElementById("notification_email"))?void 0:u.checked)??!0,_=(null==(p=document.getElementById("notification_whatsapp"))?void 0:p.checked)??!1;try{if(a&&r&&l){const{error:e}=await a.confirmPayment({elements:r,confirmParams:{return_url:window.location.origin+"/checkout/complete",payment_method_data:{billing_details:{name:g.get("customer_name"),email:g.get("customer_email"),phone:g.get("customer_phone")||void 0}}},redirect:"if_required"});if(e)throw i&&(i.textContent=e.message||"Eroare la procesarea plății",i.classList.remove("hidden")),new Error(e.message||"Plata nu a putut fi procesată")}const e=await this.postApi("/orders",{customer_name:g.get("customer_name"),customer_email:g.get("customer_email"),customer_phone:g.get("customer_phone"),agree_terms:y,agree_privacy:w,create_account:k,notification_email:$,notification_whatsapp:_,payment_intent_id:l?l.split("_secret_")[0]:null,cart:h.map(e=>({eventId:e.eventId,ticketTypeId:e.ticketTypeId,quantity:e.quantity})),beneficiaries:x.length>0?x:null});if(!e.success)throw new Error(e.error||"Eroare la plasarea comenzii");b.clearCart(),this.updateCartBadge(),f.show("✓ Comanda a fost plasată cu succes!","success"),this.navigate(`/order-success/${e.data.order_id}`)}catch(C){f.show(C.message||"Eroare la plasarea comenzii","error"),t&&(t.disabled=!1),n&&(n.textContent="Plasează comanda"),s&&s.classList.add("hidden")}})}async initializeStripePayment(){var e,t;const n=document.getElementById("payment-element");if(!n)return null;try{const s=await this.fetchApi("/payment/config");if(!s.success||!(null==(e=s.data)?void 0:e.publishable_key))return n.innerHTML='\n                    <div class="text-center py-4 text-gray-600">\n                        <svg class="w-12 h-12 mx-auto text-green-500 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>\n                        </svg>\n                        <p>Comanda nu necesită plată online.</p>\n                    </div>\n                ',null;const i=s.data.publishable_key;window.Stripe||await this.loadStripeScript();const a=window.Stripe(i),r=b.getCart(),o=b.getTotal(),l=await this.postApi("/payment/create-intent",{amount:Math.round(100*o.total),currency:o.currency.toLowerCase(),cart:r.map(e=>({eventId:e.eventId,ticketTypeId:e.ticketTypeId,quantity:e.quantity}))});if(!l.success||!(null==(t=l.data)?void 0:t.client_secret))throw new Error("Nu s-a putut crea sesiunea de plată");const d=l.data.client_secret,c=a.elements({clientSecret:d,appearance:{theme:"stripe",variables:{colorPrimary:getComputedStyle(document.documentElement).getPropertyValue("--tixello-primary").trim()||"#6366f1",fontFamily:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'}}}),m=c.create("payment",{layout:"tabs",wallets:{applePay:"auto",googlePay:"auto"}});return n.innerHTML="",m.mount(n),{stripe:a,elements:c,paymentElement:m,clientSecret:d}}catch(s){throw n.innerHTML=`\n                <div class="text-center py-4 text-red-600">\n                    <svg class="w-12 h-12 mx-auto text-red-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>\n                    </svg>\n                    <p>${s.message||"Eroare la încărcarea sistemului de plată"}</p>\n                    <button onclick="location.reload()" class="mt-2 text-primary hover:underline">Reîncarcă pagina</button>\n                </div>\n            `,s}}loadStripeScript(){return new Promise((e,t)=>{if(window.Stripe)return void e();const n=document.createElement("script");n.src="https://js.stripe.com/v3/",n.async=!0,n.onload=()=>e(),n.onerror=()=>t(new Error("Failed to load Stripe.js")),document.head.appendChild(n)})}async renderOrderSuccess(e){const t=this.getContentElement();if(!t)return;const n=e.orderId;t.innerHTML=`\n            <div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center">\n                <div class="mb-8">\n                    <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">\n                        <svg class="w-10 h-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>\n                        </svg>\n                    </div>\n                    <h1 class="text-3xl font-bold text-gray-900 mb-2">Comanda plasată cu succes!</h1>\n                    <p class="text-gray-600 mb-4">\n                        Comanda ta <strong>#${n}</strong> a fost înregistrată.\n                    </p>\n                    <p class="text-gray-600">\n                        Vei primi biletele pe email în câteva minute.\n                    </p>\n                </div>\n\n                <div class="space-y-3">\n                    <a href="/events" class="w-full max-w-xs mx-auto block px-6 py-3 bg-primary text-white font-semibold rounded-lg hover:bg-primary-dark transition text-center">\n                        Înapoi la evenimente\n                    </a>\n                </div>\n            </div>\n        `}renderLogin(){if(this.isAuthenticated())return void this.navigate("/account");const e=this.getContentElement();if(!e)return;e.innerHTML='\n            <div class="min-h-[60vh] flex items-center justify-center px-4">\n                <div class="max-w-md w-full space-y-8">\n                    <div class="text-center">\n                        <h1 class="text-3xl font-bold text-gray-900">Bine ai revenit</h1>\n                        <p class="mt-2 text-gray-600">Conectează-te la contul tău</p>\n                    </div>\n                    <div id="login-error" class="hidden bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"></div>\n                    <form id="login-form" class="space-y-6">\n                        <div>\n                            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>\n                            <input type="email" id="email" required\n                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">\n                        </div>\n                        <div>\n                            <div class="flex justify-between items-center mb-1">\n                                <label for="password" class="block text-sm font-medium text-gray-700">Parolă</label>\n                                <a href="/forgot-password" class="text-xs text-primary hover:text-blue-700">Ai uitat parola?</a>\n                            </div>\n                            <input type="password" id="password" required\n                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">\n                        </div>\n                        <button type="submit" id="login-btn" class="w-full px-4 py-2 bg-primary text-white font-medium rounded-lg hover:bg-primary-dark transition">\n                            Conectare\n                        </button>\n                    </form>\n                    <p class="text-center text-gray-600">\n                        Nu ai cont? <a href="/register" class="text-primary hover:text-blue-700 font-medium">Înregistrează-te</a>\n                    </p>\n                </div>\n            </div>\n        ';const t=document.getElementById("login-form");null==t||t.addEventListener("submit",async e=>{e.preventDefault();const t=document.getElementById("email").value,n=document.getElementById("password").value,s=document.getElementById("login-error"),i=document.getElementById("login-btn");i.disabled=!0,i.textContent="Se conectează...",null==s||s.classList.add("hidden");try{const e=await this.postApi("/auth/login",{email:t,password:n});if(!e.success||!e.data)throw new Error(e.message||"Invalid response from server");this.saveAuthState(e.data.token,e.data.user),this.navigate("/account")}catch(a){s&&(s.textContent=a.message||"Eroare la autentificare",s.classList.remove("hidden")),i.disabled=!1,i.textContent="Conectare"}})}renderRegister(){var e,t;if(this.isAuthenticated())return void this.navigate("/account");const n=this.getContentElement();if(!n)return;n.innerHTML=`\n            <div class="min-h-[60vh] flex items-center justify-center px-4">\n                <div class="max-w-md w-full space-y-8">\n                    <div class="text-center">\n                        <h1 class="text-3xl font-bold text-gray-900">Creează cont</h1>\n                        <p class="mt-2 text-gray-600">Înregistrează-te pentru a cumpăra bilete</p>\n                    </div>\n                    <div id="register-error" class="hidden bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"></div>\n                    <form id="register-form" class="space-y-6">\n                        <div class="grid grid-cols-2 gap-4">\n                            <div>\n                                <label for="first_name" class="block text-sm font-medium text-gray-700 mb-1">Prenume</label>\n                                <input type="text" id="first_name" required\n                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary">\n                            </div>\n                            <div>\n                                <label for="last_name" class="block text-sm font-medium text-gray-700 mb-1">Nume</label>\n                                <input type="text" id="last_name" required\n                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary">\n                            </div>\n                        </div>\n                        <div>\n                            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>\n                            <input type="email" id="email" required\n                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary">\n                        </div>\n                        <div>\n                            <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Telefon (opțional)</label>\n                            <input type="tel" id="phone"\n                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary">\n                        </div>\n                        <div>\n                            <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Parolă</label>\n                            <input type="password" id="password" required minlength="8"\n                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary">\n                            \x3c!-- Password Strength Meter --\x3e\n                            <div id="password-strength" class="mt-2">\n                                <div class="flex gap-1 mb-1">\n                                    <div id="strength-bar-1" class="h-1 flex-1 rounded bg-gray-200"></div>\n                                    <div id="strength-bar-2" class="h-1 flex-1 rounded bg-gray-200"></div>\n                                    <div id="strength-bar-3" class="h-1 flex-1 rounded bg-gray-200"></div>\n                                    <div id="strength-bar-4" class="h-1 flex-1 rounded bg-gray-200"></div>\n                                </div>\n                                <p id="strength-text" class="text-xs text-gray-500"></p>\n                            </div>\n                        </div>\n                        <div>\n                            <label for="password_confirmation" class="block text-sm font-medium text-gray-700 mb-1">Confirmă parola</label>\n                            <input type="password" id="password_confirmation" required\n                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary">\n                            <p id="password-match" class="mt-1 text-xs hidden"></p>\n                        </div>\n                        <div class="border-t pt-4">\n                            <p class="text-sm font-medium text-gray-700 mb-3">Preferințe notificări</p>\n                            <div class="space-y-2">\n                                <div class="flex items-center">\n                                    <input type="checkbox" id="reg_notification_email" checked\n                                           class="h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary">\n                                    <label for="reg_notification_email" class="ml-2 text-sm text-gray-700">\n                                        Primește notificări pe email\n                                    </label>\n                                </div>\n                                ${(null==(t=null==(e=this.config)?void 0:e.modules)?void 0:t.includes("whatsapp"))?'\n                                <div class="flex items-center">\n                                    <input type="checkbox" id="reg_notification_whatsapp"\n                                           class="h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary">\n                                    <label for="reg_notification_whatsapp" class="ml-2 text-sm text-gray-700">\n                                        Primește notificări pe WhatsApp\n                                    </label>\n                                </div>\n                                ':""}\n                            </div>\n                        </div>\n                        <button type="submit" id="register-btn" class="w-full px-4 py-2 bg-primary text-white font-medium rounded-lg hover:bg-primary-dark transition">\n                            Creează cont\n                        </button>\n                    </form>\n                    <p class="text-center text-gray-600">\n                        Ai deja cont? <a href="/login" class="text-primary hover:text-blue-700 font-medium">Conectează-te</a>\n                    </p>\n                </div>\n            </div>\n        `;const s=document.getElementById("password"),i=document.getElementById("password_confirmation"),a=document.getElementById("strength-text"),r=document.getElementById("password-match"),o=[document.getElementById("strength-bar-1"),document.getElementById("strength-bar-2"),document.getElementById("strength-bar-3"),document.getElementById("strength-bar-4")],l=()=>{const e=(null==s?void 0:s.value)||"",t=(null==i?void 0:i.value)||"";if(!t)return null==r||r.classList.add("hidden"),void(null==i||i.classList.remove("border-red-300","border-green-300"));null==r||r.classList.remove("hidden"),e===t?(r&&(r.textContent="✓ Parolele coincid",r.className="mt-1 text-xs text-green-600"),null==i||i.classList.remove("border-red-300"),null==i||i.classList.add("border-green-300")):(r&&(r.textContent="✗ Parolele nu coincid",r.className="mt-1 text-xs text-red-600"),null==i||i.classList.remove("border-green-300"),null==i||i.classList.add("border-red-300"))};null==s||s.addEventListener("input",()=>{(()=>{const e=(null==s?void 0:s.value)||"";if(!e)return o.forEach(e=>null==e?void 0:e.classList.replace(e.className.split(" ").find(e=>e.startsWith("bg-"))||"bg-gray-200","bg-gray-200")),void(a&&(a.textContent=""));const{score:t,text:n,color:i}=(e=>{let t=0;return e.length>=8&&t++,e.length>=12&&t++,/[A-Z]/.test(e)&&t++,/[a-z]/.test(e)&&t++,/[0-9]/.test(e)&&t++,/[^A-Za-z0-9]/.test(e)&&t++,t<=2?{score:1,text:"Foarte slabă",color:"bg-red-500"}:t<=3?{score:2,text:"Slabă",color:"bg-orange-500"}:t<=4?{score:3,text:"Medie",color:"bg-yellow-500"}:t<=5?{score:4,text:"Puternică",color:"bg-green-500"}:{score:4,text:"Foarte puternică",color:"bg-green-600"}})(e);o.forEach((e,n)=>{if(e){const s=Array.from(e.classList).find(e=>e.startsWith("bg-"));s&&e.classList.remove(s),e.classList.add(n<t?i:"bg-gray-200")}}),a&&(a.textContent=n,a.className=`text-xs ${i.replace("bg-","text-")}`)})(),l()}),null==i||i.addEventListener("input",l);const d=document.getElementById("register-form");null==d||d.addEventListener("submit",async e=>{var t,n;e.preventDefault();const s=document.getElementById("first_name").value,i=document.getElementById("last_name").value,a=document.getElementById("email").value,r=document.getElementById("phone").value,o=document.getElementById("password").value,l=document.getElementById("password_confirmation").value,d=document.getElementById("register-error"),c=document.getElementById("register-btn");if(o!==l)return void(d&&(d.textContent="Parolele nu coincid",d.classList.remove("hidden")));c.disabled=!0,c.textContent="Se creează contul...",null==d||d.classList.add("hidden");const m=(null==(t=document.getElementById("reg_notification_email"))?void 0:t.checked)??!0,u=(null==(n=document.getElementById("reg_notification_whatsapp"))?void 0:n.checked)??!1;try{const e=await this.postApi("/auth/register",{first_name:s,last_name:i,email:a,phone:r||null,password:o,notification_email:m,notification_whatsapp:u});if(!e.success||!e.data)throw new Error(e.message||"Invalid response from server");this.saveAuthState(e.data.token,e.data.user),f.show("✓ Cont creat cu succes!","success"),this.navigate("/account")}catch(p){d&&(d.textContent=p.message||"Eroare la înregistrare",d.classList.remove("hidden")),c.disabled=!1,c.textContent="Creează cont"}})}renderForgotPassword(){if(this.isAuthenticated())return void this.navigate("/account");const e=this.getContentElement();if(!e)return;e.innerHTML='\n            <div class="min-h-[60vh] flex items-center justify-center px-4">\n                <div class="max-w-md w-full space-y-8">\n                    <div class="text-center">\n                        <h1 class="text-3xl font-bold text-gray-900">Resetează parola</h1>\n                        <p class="mt-2 text-gray-600">Introdu adresa de email pentru a primi un link de resetare</p>\n                    </div>\n                    <div id="forgot-success" class="hidden bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg"></div>\n                    <div id="forgot-error" class="hidden bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"></div>\n                    <form id="forgot-form" class="space-y-6">\n                        <div>\n                            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>\n                            <input type="email" id="email" required\n                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">\n                        </div>\n                        <button type="submit" id="forgot-btn" class="w-full px-4 py-2 bg-primary text-white font-medium rounded-lg hover:bg-primary-dark transition">\n                            Trimite link de resetare\n                        </button>\n                    </form>\n                    <p class="text-center text-gray-600">\n                        <a href="/login" class="text-primary hover:text-blue-700 font-medium">← Înapoi la conectare</a>\n                    </p>\n                </div>\n            </div>\n        ';const t=document.getElementById("forgot-form");null==t||t.addEventListener("submit",async e=>{e.preventDefault();const t=document.getElementById("email").value,n=document.getElementById("forgot-error"),s=document.getElementById("forgot-success"),i=document.getElementById("forgot-btn");i.disabled=!0,i.textContent="Se trimite...",null==n||n.classList.add("hidden"),null==s||s.classList.add("hidden");try{const e=await this.postApi("/auth/forgot-password",{email:t});if(!e.success)throw new Error(e.message||"Eroare la trimitere");s&&(s.textContent="Dacă adresa de email există în sistem, vei primi un link de resetare.",s.classList.remove("hidden")),document.getElementById("email").value=""}catch(a){n&&(n.textContent=a.message||"Eroare la trimiterea emailului",n.classList.remove("hidden"))}finally{i.disabled=!1,i.textContent="Trimite link de resetare"}})}renderResetPassword(){if(this.isAuthenticated())return void this.navigate("/account");const e=this.getContentElement();if(!e)return;const t=new URLSearchParams(window.location.search),n=t.get("token"),s=t.get("email");if(!n||!s)return void(e.innerHTML='\n                <div class="min-h-[60vh] flex items-center justify-center px-4">\n                    <div class="text-center">\n                        <h1 class="text-2xl font-bold text-red-600 mb-4">Link invalid</h1>\n                        <p class="text-gray-600 mb-4">Linkul de resetare este invalid sau a expirat.</p>\n                        <a href="/forgot-password" class="text-primary hover:text-blue-700">Solicită un nou link</a>\n                    </div>\n                </div>\n            ');e.innerHTML='\n            <div class="min-h-[60vh] flex items-center justify-center px-4">\n                <div class="max-w-md w-full space-y-8">\n                    <div class="text-center">\n                        <h1 class="text-3xl font-bold text-gray-900">Setează parola nouă</h1>\n                        <p class="mt-2 text-gray-600">Introdu noua parolă pentru contul tău</p>\n                    </div>\n                    <div id="reset-error" class="hidden bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"></div>\n                    <form id="reset-form" class="space-y-6">\n                        <div>\n                            <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Parolă nouă</label>\n                            <input type="password" id="password" required minlength="8"\n                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary">\n                            <div id="password-strength" class="mt-2">\n                                <div class="flex gap-1 mb-1">\n                                    <div id="strength-bar-1" class="h-1 flex-1 rounded bg-gray-200"></div>\n                                    <div id="strength-bar-2" class="h-1 flex-1 rounded bg-gray-200"></div>\n                                    <div id="strength-bar-3" class="h-1 flex-1 rounded bg-gray-200"></div>\n                                    <div id="strength-bar-4" class="h-1 flex-1 rounded bg-gray-200"></div>\n                                </div>\n                                <p id="strength-text" class="text-xs text-gray-500"></p>\n                            </div>\n                        </div>\n                        <div>\n                            <label for="password_confirmation" class="block text-sm font-medium text-gray-700 mb-1">Confirmă parola</label>\n                            <input type="password" id="password_confirmation" required\n                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary">\n                            <p id="password-match" class="mt-1 text-xs hidden"></p>\n                        </div>\n                        <button type="submit" id="reset-btn" class="w-full px-4 py-2 bg-primary text-white font-medium rounded-lg hover:bg-primary-dark transition">\n                            Resetează parola\n                        </button>\n                    </form>\n                </div>\n            </div>\n        ';const i=document.getElementById("password"),a=document.getElementById("password_confirmation"),r=document.getElementById("strength-text"),o=document.getElementById("password-match"),l=[document.getElementById("strength-bar-1"),document.getElementById("strength-bar-2"),document.getElementById("strength-bar-3"),document.getElementById("strength-bar-4")],d=()=>{const e=(null==i?void 0:i.value)||"",t=(null==a?void 0:a.value)||"";if(!t)return null==o||o.classList.add("hidden"),void(null==a||a.classList.remove("border-red-300","border-green-300"));null==o||o.classList.remove("hidden"),e===t?(o&&(o.textContent="✓ Parolele coincid",o.className="mt-1 text-xs text-green-600"),null==a||a.classList.remove("border-red-300"),null==a||a.classList.add("border-green-300")):(o&&(o.textContent="✗ Parolele nu coincid",o.className="mt-1 text-xs text-red-600"),null==a||a.classList.remove("border-green-300"),null==a||a.classList.add("border-red-300"))};null==i||i.addEventListener("input",()=>{(()=>{const e=(null==i?void 0:i.value)||"";if(!e)return l.forEach(e=>{const t=Array.from((null==e?void 0:e.classList)||[]).find(e=>e.startsWith("bg-"));t&&e&&e.classList.replace(t,"bg-gray-200")}),void(r&&(r.textContent=""));const{score:t,text:n,color:s}=(e=>{let t=0;return e.length>=8&&t++,e.length>=12&&t++,/[A-Z]/.test(e)&&t++,/[a-z]/.test(e)&&t++,/[0-9]/.test(e)&&t++,/[^A-Za-z0-9]/.test(e)&&t++,t<=2?{score:1,text:"Foarte slabă",color:"bg-red-500"}:t<=3?{score:2,text:"Slabă",color:"bg-orange-500"}:t<=4?{score:3,text:"Medie",color:"bg-yellow-500"}:t<=5?{score:4,text:"Puternică",color:"bg-green-500"}:{score:4,text:"Foarte puternică",color:"bg-green-600"}})(e);l.forEach((e,n)=>{if(e){const i=Array.from(e.classList).find(e=>e.startsWith("bg-"));i&&e.classList.remove(i),e.classList.add(n<t?s:"bg-gray-200")}}),r&&(r.textContent=n,r.className=`text-xs ${s.replace("bg-","text-")}`)})(),d()}),null==a||a.addEventListener("input",d);const c=document.getElementById("reset-form");null==c||c.addEventListener("submit",async e=>{e.preventDefault();const t=i.value,r=a.value,o=document.getElementById("reset-error"),l=document.getElementById("reset-btn");if(t===r){l.disabled=!0,l.textContent="Se resetează...",null==o||o.classList.add("hidden");try{const e=await this.postApi("/auth/reset-password",{token:n,email:s,password:t,password_confirmation:r});if(!e.success)throw new Error(e.message||"Eroare la resetare");f.show("✓ Parola a fost resetată cu succes!","success"),this.navigate("/login")}catch(d){o&&(o.textContent=d.message||"Eroare la resetarea parolei",o.classList.remove("hidden")),l.disabled=!1,l.textContent="Resetează parola"}}else o&&(o.textContent="Parolele nu coincid",o.classList.remove("hidden"))})}renderAccount(){if(!this.isAuthenticated())return void this.navigate("/login");const e=this.getContentElement();if(!e)return;const t=this.getUser(),n=(null==t?void 0:t.full_name)||(null==t?void 0:t.first_name)||"Utilizator";e.innerHTML=`\n            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                <div class="flex justify-between items-center mb-8">\n                    <div>\n                        <h1 class="text-3xl font-bold text-gray-900">Contul meu</h1>\n                        <p class="text-gray-600">Bun venit, ${(null==n?void 0:n.split(" ")[0])||n}!</p>\n                    </div>\n                    <button id="logout-btn" class="px-4 py-2 text-red-600 hover:text-red-700 font-medium">\n                        Deconectare\n                    </button>\n                </div>\n                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">\n                    <a href="/account/orders" class="block p-6 bg-white rounded-lg shadow hover:shadow-md transition">\n                        <div class="text-primary mb-3">\n                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>\n                            </svg>\n                        </div>\n                        <h3 class="text-lg font-semibold text-gray-900">Comenzile mele</h3>\n                        <p class="text-gray-600 text-sm">Vezi istoricul comenzilor</p>\n                    </a>\n                    <a href="/account/tickets" class="block p-6 bg-white rounded-lg shadow hover:shadow-md transition">\n                        <div class="text-primary mb-3">\n                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"/>\n                            </svg>\n                        </div>\n                        <h3 class="text-lg font-semibold text-gray-900">Biletele mele</h3>\n                        <p class="text-gray-600 text-sm">Accesează biletele tale</p>\n                    </a>\n                    <a href="/account/watchlist" class="block p-6 bg-white rounded-lg shadow hover:shadow-md transition">\n                        <div class="text-primary mb-3">\n                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>\n                            </svg>\n                        </div>\n                        <h3 class="text-lg font-semibold text-gray-900">Evenimente favorite</h3>\n                        <p class="text-gray-600 text-sm">Vezi watchlist-ul tău</p>\n                    </a>\n                    <a href="/account/profile" class="block p-6 bg-white rounded-lg shadow hover:shadow-md transition">\n                        <div class="text-primary mb-3">\n                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>\n                            </svg>\n                        </div>\n                        <h3 class="text-lg font-semibold text-gray-900">Profil</h3>\n                        <p class="text-gray-600 text-sm">Editează datele tale</p>\n                    </a>\n                </div>\n            </div>\n        `;const s=document.getElementById("logout-btn");null==s||s.addEventListener("click",async()=>{try{await this.postApi("/auth/logout",{})}catch{}this.clearAuthState(),this.navigate("/")})}async renderOrders(){const e=this.getContentElement();if(e){e.innerHTML='\n            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                <a href="/account" class="inline-flex items-center text-gray-600 hover:text-gray-900 mb-6">\n                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>\n                    </svg>\n                    Înapoi la Cont\n                </a>\n                <h1 class="text-3xl font-bold text-gray-900 mb-8">Comenzile Mele</h1>\n                <div id="orders-list" class="space-y-4">\n                    <div class="animate-pulse bg-gray-200 rounded-lg h-24"></div>\n                    <div class="animate-pulse bg-gray-200 rounded-lg h-24"></div>\n                    <div class="animate-pulse bg-gray-200 rounded-lg h-24"></div>\n                </div>\n            </div>\n        ';try{const e=(await this.fetchApi("/account/orders")).data,t=document.getElementById("orders-list");t&&(e&&e.length>0?t.innerHTML=e.map(e=>`\n                        <a href="/account/orders/${e.id}" class="block bg-white rounded-lg shadow p-6 hover:shadow-lg transition">\n                            <div class="flex justify-between items-start mb-4">\n                                <div>\n                                    <h3 class="text-lg font-semibold text-gray-900">${e.order_number}</h3>\n                                    <p class="text-sm text-gray-600">${e.date}</p>\n                                </div>\n                                <div class="text-right">\n                                    <p class="text-lg font-bold text-gray-900">${e.total} ${e.currency}</p>\n                                    <span class="inline-block px-3 py-1 text-xs font-medium rounded-full ${"paid"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}">\n                                        ${e.status_label}\n                                    </span>\n                                </div>\n                            </div>\n                            <div class="border-t pt-4">\n                                <p class="text-sm text-gray-600 mb-2">${e.items_count} bilet${e.items_count>1?"e":""}</p>\n                                <div class="space-y-1">\n                                    ${e.tickets.map(e=>`\n                                        <p class="text-sm text-gray-700">• ${e.event_name} - ${e.ticket_type} ${e.quantity>1?`(×${e.quantity})`:""}</p>\n                                    `).join("")}\n                                </div>\n                            </div>\n                            <div class="mt-4 pt-4 border-t flex justify-end">\n                                <span class="text-sm text-primary hover:text-primary-dark font-medium inline-flex items-center">\n                                    Vezi detalii\n                                    <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>\n                                    </svg>\n                                </span>\n                            </div>\n                        </a>\n                    `).join(""):t.innerHTML='\n                        <div class="bg-white rounded-lg shadow p-8 text-center">\n                            <svg class="w-16 h-16 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>\n                            </svg>\n                            <p class="text-gray-600">Nu ai comenzi încă</p>\n                        </div>\n                    ')}catch(t){const e=document.getElementById("orders-list");e&&(e.innerHTML='\n                    <div class="bg-red-50 border border-red-200 rounded-lg p-6 text-center">\n                        <p class="text-red-700">Eroare la încărcarea comenzilor</p>\n                    </div>\n                ')}}}async renderTickets(){const e=this.getContentElement();if(e){e.innerHTML='\n            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                <a href="/account" class="inline-flex items-center text-gray-600 hover:text-gray-900 mb-6">\n                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>\n                    </svg>\n                    Înapoi la Cont\n                </a>\n                <h1 class="text-3xl font-bold text-gray-900 mb-8">Biletele Mele</h1>\n                <div id="tickets-list" class="grid grid-cols-1 md:grid-cols-2 gap-6">\n                    <div class="animate-pulse bg-gray-200 rounded-lg h-48"></div>\n                    <div class="animate-pulse bg-gray-200 rounded-lg h-48"></div>\n                </div>\n            </div>\n        ';try{const e=(await this.fetchApi("/account/tickets")).data,t=document.getElementById("tickets-list");t&&(e&&e.length>0?(t.innerHTML=`\n                        <div class="bg-white rounded-lg shadow overflow-hidden col-span-2">\n                            <div class="divide-y divide-gray-100">\n                                ${e.map(e=>{var t,n,s;return`\n                                    <div class="p-4 hover:bg-gray-50 transition flex items-center gap-4">\n                                        <img src="${e.qr_code}" alt="QR" class="w-16 h-16 border border-gray-200 rounded flex-shrink-0">\n                                        <div class="flex-1 min-w-0">\n                                            <div class="flex items-center gap-2 mb-1">\n                                                <h3 class="font-semibold text-gray-900 truncate">${e.event_name}</h3>\n                                                <span class="inline-block px-2 py-0.5 text-xs font-medium rounded-full whitespace-nowrap flex-shrink-0 ${"valid"===e.status||"pending"===e.status?"bg-green-100 text-green-700":"used"===e.status?"bg-blue-100 text-blue-700":"cancelled"===e.status?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}">${e.status_label}</span>\n                                            </div>\n                                            <div class="flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-gray-600">\n                                                <span>${e.ticket_type}</span>\n                                                ${e.date?`<span>${new Date(e.date).toLocaleDateString("ro-RO",{day:"numeric",month:"short",year:"numeric"})}</span>`:""}\n                                                ${e.venue?`<span>📍 ${e.venue}</span>`:""}\n                                                ${e.seat_label?`<span>💺 ${e.seat_label}</span>`:""}\n                                            </div>\n                                            ${(null==(t=e.beneficiary)?void 0:t.name)?`\n                                                <p class="text-sm text-gray-600 mt-1">👤 ${e.beneficiary.name}</p>\n                                            `:""}\n                                            <p class="text-xs text-gray-400 font-mono mt-1">${e.code}</p>\n                                        </div>\n                                        <button\n                                            class="view-ticket-btn flex-shrink-0 bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition text-sm font-medium"\n                                            data-ticket-id="${e.id}"\n                                            data-ticket-code="${e.code}"\n                                            data-ticket-qr="${e.qr_code}"\n                                            data-event-name="${e.event_name||""}"\n                                            data-ticket-type="${e.ticket_type||""}"\n                                            data-date="${e.date||""}"\n                                            data-venue="${e.venue||""}"\n                                            data-seat="${e.seat_label||""}"\n                                            data-status="${e.status||""}"\n                                            data-status-label="${e.status_label||""}"\n                                            data-beneficiary-name="${(null==(n=e.beneficiary)?void 0:n.name)||""}"\n                                            data-beneficiary-email="${(null==(s=e.beneficiary)?void 0:s.email)||""}">\n                                            Detalii\n                                        </button>\n                                    </div>\n                                `}).join("")}\n                            </div>\n                        </div>\n                    `,document.querySelectorAll(".view-ticket-btn").forEach(e=>{e.addEventListener("click",e=>{const t=e.currentTarget,n={id:t.dataset.ticketId||"",code:t.dataset.ticketCode||"",qr_code:t.dataset.ticketQr||"",event_name:t.dataset.eventName||"",ticket_type:t.dataset.ticketType||"",date:t.dataset.date||"",venue:t.dataset.venue||"",seat_label:t.dataset.seat||"",status:t.dataset.status||"",status_label:t.dataset.statusLabel||"",beneficiary:{name:t.dataset.beneficiaryName||"",email:t.dataset.beneficiaryEmail||""}};this.showTicketDetailModal(n)})})):t.innerHTML='\n                        <div class="col-span-2 bg-white rounded-lg shadow p-8 text-center">\n                            <svg class="w-16 h-16 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"/>\n                            </svg>\n                            <p class="text-gray-600">Nu ai bilete încă</p>\n                        </div>\n                    ')}catch(t){const e=document.getElementById("tickets-list");e&&(e.innerHTML='\n                    <div class="col-span-2 bg-red-50 border border-red-200 rounded-lg p-6 text-center">\n                        <p class="text-red-700">Eroare la încărcarea biletelor</p>\n                    </div>\n                ')}}}async renderOrderDetail(e){var t;const n=this.getContentElement();if(n){n.innerHTML='\n            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                <a href="/account/orders" class="inline-flex items-center text-gray-600 hover:text-gray-900 mb-6">\n                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>\n                    </svg>\n                    Înapoi la Comenzi\n                </a>\n                <div id="order-detail-container">\n                    <div class="animate-pulse space-y-4">\n                        <div class="bg-gray-200 h-8 w-1/3 rounded"></div>\n                        <div class="bg-gray-200 h-48 rounded-lg"></div>\n                    </div>\n                </div>\n            </div>\n        ';try{const n=(await this.fetchApi(`/account/orders/${e.id}`)).data,s=document.getElementById("order-detail-container");s&&(s.innerHTML=`\n                    <h1 class="text-3xl font-bold text-gray-900 mb-6">Comanda ${n.order_number}</h1>\n\n                    <div class="bg-white rounded-lg shadow p-6 mb-6">\n                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">\n                            <div>\n                                <p class="text-sm text-gray-500">Status</p>\n                                <span class="inline-block px-3 py-1 text-xs font-medium rounded-full ${"paid"===n.status?"bg-green-100 text-green-800":"pending"===n.status?"bg-yellow-100 text-yellow-800":"cancelled"===n.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}">\n                                    ${n.status_label||n.status}\n                                </span>\n                            </div>\n                            <div>\n                                <p class="text-sm text-gray-500">Data comenzii</p>\n                                <p class="font-medium text-gray-900">${n.date}</p>\n                            </div>\n                            <div>\n                                <p class="text-sm text-gray-500">Metodă plată</p>\n                                <p class="font-medium text-gray-900">${(null==(t=n.meta)?void 0:t.payment_method)||"Card"}</p>\n                            </div>\n                            <div>\n                                <p class="text-sm text-gray-500">Total</p>\n                                <p class="font-bold text-lg text-primary">${n.total} ${n.currency||"RON"}</p>\n                            </div>\n                        </div>\n                    </div>\n\n                    <h2 class="text-xl font-semibold text-gray-900 mb-4">Bilete (${n.items_count})</h2>\n                    <div class="space-y-6">\n                        ${(n.events||[]).map(e=>{var t,s;return`\n                            <div class="bg-white rounded-lg shadow overflow-hidden">\n                                <div class="bg-gray-50 p-4 border-b">\n                                    <h3 class="font-semibold text-gray-900">${(null==(t=e.event)?void 0:t.title)||"Eveniment"}</h3>\n                                    ${e.venue?`\n                                        <p class="text-sm text-gray-600">${e.venue.name}${e.venue.city?`, ${e.venue.city}`:""}</p>\n                                    `:""}\n                                    ${(null==(s=e.event)?void 0:s.date)?`\n                                        <p class="text-sm text-gray-500">${new Date(e.event.date).toLocaleDateString("ro-RO",{day:"numeric",month:"long",year:"numeric"})}${e.event.time?` • ${e.event.time}`:""}</p>\n                                    `:""}\n                                </div>\n                                <div class="divide-y">\n                                    ${(e.tickets||[]).map(e=>`\n                                        <div class="p-4 flex justify-between items-center">\n                                            <div class="flex-1">\n                                                <p class="font-medium text-gray-900">${e.ticket_type}</p>\n                                                ${e.seat_label?`<p class="text-sm text-gray-600">💺 Loc: ${e.seat_label}</p>`:""}\n                                                <p class="text-xs text-gray-500 font-mono mt-1">${e.code}</p>\n                                            </div>\n                                            <div class="text-right">\n                                                <span class="inline-block px-2 py-1 text-xs rounded-full ${"valid"===e.status?"bg-green-100 text-green-700":"used"===e.status?"bg-gray-100 text-gray-700":"bg-red-100 text-red-700"}">${e.status_label||e.status}</span>\n                                                ${e.price?`<p class="font-medium mt-1">${e.price} ${e.currency||n.currency||"RON"}</p>`:""}\n                                            </div>\n                                        </div>\n                                    `).join("")}\n                                </div>\n                            </div>\n                        `}).join("")}\n                    </div>\n\n                    ${n.meta?`\n                        <h2 class="text-xl font-semibold text-gray-900 mt-8 mb-4">Informații client</h2>\n                        <div class="bg-white rounded-lg shadow p-6">\n                            <div class="grid grid-cols-2 gap-4">\n                                <div>\n                                    <p class="text-sm text-gray-500">Nume</p>\n                                    <p class="font-medium">${n.meta.customer_name||"-"}</p>\n                                </div>\n                                <div>\n                                    <p class="text-sm text-gray-500">Email</p>\n                                    <p class="font-medium">${n.meta.customer_email||"-"}</p>\n                                </div>\n                            </div>\n                        </div>\n                    `:""}\n                `)}catch(s){const e=document.getElementById("order-detail-container");e&&(e.innerHTML='\n                    <div class="bg-red-50 border border-red-200 rounded-lg p-6 text-center">\n                        <p class="text-red-700">Eroare la încărcarea comenzii</p>\n                    </div>\n                ')}}}renderMyEvents(){const e=this.getContentElement();e&&(e.innerHTML='\n            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                <a href="/account" class="inline-flex items-center text-gray-600 hover:text-gray-900 mb-6">\n                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>\n                    </svg>\n                    Back to Account\n                </a>\n                <h1 class="text-3xl font-bold text-gray-900 mb-2">My Events</h1>\n                <p class="text-gray-600 mb-8">Upcoming events you have tickets for</p>\n                <div id="my-events-list" class="space-y-4">\n                    <div class="animate-pulse bg-gray-200 rounded-lg h-32"></div>\n                    <div class="animate-pulse bg-gray-200 rounded-lg h-32"></div>\n                </div>\n            </div>\n        ')}async renderWatchlist(){const e=this.getContentElement();if(e)try{const t=await this.fetchApi("/account/watchlist"),n=t.data.length>0?t.data.map(e=>`\n                <div class="bg-white rounded-lg shadow overflow-hidden">\n                    <div class="md:flex">\n                        <div class="md:w-48 h-48 md:h-auto">\n                            ${e.poster_url?`<img src="${e.poster_url}" alt="${e.title}" class="w-full h-full object-cover">`:'<div class="w-full h-full bg-gray-200 flex items-center justify-center">\n                                    <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>\n                                    </svg>\n                                </div>'}\n                        </div>\n                        <div class="p-6 flex-1">\n                            <div class="flex justify-between items-start">\n                                <div>\n                                    <h3 class="text-xl font-bold text-gray-900 mb-2">${e.title}</h3>\n                                    <div class="space-y-1 text-sm text-gray-600">\n                                        <p>\n                                            <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>\n                                            </svg>\n                                            ${new Date(e.start_date).toLocaleDateString("ro-RO",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}\n                                            ${e.start_time?` • ${e.start_time}`:""}\n                                        </p>\n                                        ${e.venue?`\n                                            <p>\n                                                <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>\n                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>\n                                                </svg>\n                                                ${e.venue.name}${e.venue.city?`, ${e.venue.city}`:""}\n                                            </p>\n                                        `:""}\n                                        <p class="text-primary font-semibold">\n                                            ${e.is_sold_out?"Sold Out":`De la ${e.price_from} ${e.currency}`}\n                                        </p>\n                                    </div>\n                                </div>\n                                <button class="remove-watchlist-btn text-red-600 hover:text-red-700 p-2" data-event-id="${e.id}">\n                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>\n                                    </svg>\n                                </button>\n                            </div>\n                            <div class="mt-4 flex gap-3">\n                                <a href="/event/${e.slug}" class="inline-block px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition">\n                                    Vezi detalii\n                                </a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            `).join(""):'\n                <div class="text-center py-16">\n                    <svg class="w-24 h-24 mx-auto text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>\n                    </svg>\n                    <h2 class="text-2xl font-bold text-gray-900 mb-2">Niciun eveniment în watchlist</h2>\n                    <p class="text-gray-600 mb-6">Adaugă evenimente favorite pentru a le urmări</p>\n                    <a href="/events" class="inline-block px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark transition">\n                        Explorează evenimente\n                    </a>\n                </div>\n            ';e.innerHTML=`\n                <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                    <div class="flex justify-between items-center mb-8">\n                        <div>\n                            <h1 class="text-3xl font-bold text-gray-900">Evenimente favorite</h1>\n                            <p class="text-gray-600">Evenimente pe care le urmărești</p>\n                        </div>\n                        <a href="/account" class="text-primary hover:text-primary-dark font-medium">← Înapoi la cont</a>\n                    </div>\n\n                    <div class="space-y-4">\n                        ${n}\n                    </div>\n                </div>\n            `,document.querySelectorAll(".remove-watchlist-btn").forEach(e=>{e.addEventListener("click",async e=>{const t=e.currentTarget.dataset.eventId;if(confirm("Sigur vrei să ștergi acest eveniment din watchlist?"))try{await this.deleteApi(`/account/watchlist/${t}`),f.show("✓ Eveniment șters din watchlist","success"),this.renderWatchlist()}catch(n){f.show("Eroare la ștergerea evenimentului","error")}})})}catch(t){e.innerHTML='\n                <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center">\n                    <p class="text-red-600">Eroare la încărcarea watchlist-ului</p>\n                </div>\n            '}}async renderProfile(){const e=this.getContentElement();if(e){e.innerHTML='\n            <div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                <a href="/account" class="inline-flex items-center text-gray-600 hover:text-gray-900 mb-6">\n                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>\n                    </svg>\n                    Înapoi la Cont\n                </a>\n                <h1 class="text-3xl font-bold text-gray-900 mb-8">Profilul Meu</h1>\n                <div id="profile-form" class="bg-white rounded-lg shadow p-6">\n                    <div class="animate-pulse space-y-4">\n                        <div class="bg-gray-200 h-10 rounded"></div>\n                        <div class="bg-gray-200 h-10 rounded"></div>\n                        <div class="bg-gray-200 h-10 rounded"></div>\n                        <div class="bg-gray-200 h-10 w-1/3 rounded"></div>\n                    </div>\n                </div>\n            </div>\n        ';try{const e=(await this.fetchApi("/account/profile")).data,t=document.getElementById("profile-form");if(t){t.innerHTML=`\n                    <form id="update-profile-form" class="space-y-6">\n                        <div id="profile-message"></div>\n\n                        <div>\n                            <label for="first_name" class="block text-sm font-medium text-gray-700 mb-2">Prenume</label>\n                            <input type="text" id="first_name" name="first_name" value="${e.first_name||""}"\n                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">\n                        </div>\n\n                        <div>\n                            <label for="last_name" class="block text-sm font-medium text-gray-700 mb-2">Nume</label>\n                            <input type="text" id="last_name" name="last_name" value="${e.last_name||""}"\n                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">\n                        </div>\n\n                        <div>\n                            <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email</label>\n                            <input type="email" id="email" value="${e.email||""}" disabled\n                                class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500">\n                        </div>\n\n                        <div>\n                            <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">Telefon</label>\n                            <input type="tel" id="phone" name="phone" value="${e.phone||""}"\n                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">\n                        </div>\n\n                        <div>\n                            <label for="city" class="block text-sm font-medium text-gray-700 mb-2">Oraș</label>\n                            <input type="text" id="city" name="city" value="${e.city||""}"\n                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">\n                        </div>\n\n                        <div>\n                            <label for="country" class="block text-sm font-medium text-gray-700 mb-2">Țară</label>\n                            <input type="text" id="country" name="country" value="${e.country||""}"\n                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">\n                        </div>\n\n                        <div>\n                            <label for="date_of_birth" class="block text-sm font-medium text-gray-700 mb-2">Data Nașterii</label>\n                            <input type="date" id="date_of_birth" name="date_of_birth" value="${e.date_of_birth||""}"\n                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">\n                        </div>\n\n                        <div class="border-t pt-6">\n                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Schimbă Parola</h3>\n\n                            <div class="space-y-4">\n                                <div>\n                                    <label for="current_password" class="block text-sm font-medium text-gray-700 mb-2">Parola Curentă</label>\n                                    <input type="password" id="current_password" name="current_password"\n                                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">\n                                </div>\n\n                                <div>\n                                    <label for="new_password" class="block text-sm font-medium text-gray-700 mb-2">Parola Nouă</label>\n                                    <input type="password" id="new_password" name="new_password"\n                                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">\n                                </div>\n\n                                <div>\n                                    <label for="new_password_confirmation" class="block text-sm font-medium text-gray-700 mb-2">Confirmă Parola Nouă</label>\n                                    <input type="password" id="new_password_confirmation" name="new_password_confirmation"\n                                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">\n                                </div>\n                            </div>\n                        </div>\n\n                        <button type="submit" class="w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition">\n                            Salvează Modificările\n                        </button>\n\n                        <div class="border-t pt-6 mt-6">\n                            <h3 class="text-lg font-semibold text-gray-900 mb-2">Zona Periculoasă</h3>\n                            <p class="text-sm text-gray-600 mb-4">Odată ce îți ștergi contul, nu mai există cale de întoarcere. Te rog fii sigur.</p>\n                            <button type="button" id="delete-account-btn" class="w-full bg-red-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-red-700 transition">\n                                Șterge Contul\n                            </button>\n                        </div>\n                    </form>\n                `;const n=document.getElementById("update-profile-form");n&&n.addEventListener("submit",async e=>{e.preventDefault();const t=document.getElementById("profile-message");try{const e=new FormData(n),s={};e.forEach((e,t)=>{e&&(s[t]=e)});const i=await this.fetchApi("/account/profile",{},{method:"PUT",body:JSON.stringify(s)});t&&(t.innerHTML=`\n                                    <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4">\n                                        <p class="text-green-700">${i.message||"Profil actualizat cu succes!"}</p>\n                                    </div>\n                                `),document.getElementById("current_password").value="",document.getElementById("new_password").value="",document.getElementById("new_password_confirmation").value=""}catch(s){t&&(t.innerHTML=`\n                                    <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-4">\n                                        <p class="text-red-700">${s.message||"Eroare la actualizarea profilului"}</p>\n                                    </div>\n                                `)}});const s=document.getElementById("delete-account-btn");s&&s.addEventListener("click",async()=>{if(!confirm("Ești absolut sigur că vrei să îți ștergi contul? Această acțiune NU poate fi anulată!"))return;if(confirm("Confirmă din nou: Toate datele tale, comenzile și biletele vor fi șterse permanent. Vrei să continui?"))try{await this.deleteApi("/account/delete"),alert("Contul tău a fost șters cu succes."),this.clearAuthState(),this.navigate("/")}catch(e){alert(e.message||"Eroare la ștergerea contului")}})}}catch(t){const e=document.getElementById("profile-form");e&&(e.innerHTML='\n                    <div class="bg-red-50 border border-red-200 rounded-lg p-6 text-center">\n                        <p class="text-red-700">Eroare la încărcarea profilului</p>\n                    </div>\n                ')}}}renderThankYou(e){const t=this.getContentElement();t&&(t.innerHTML=`\n            <div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center">\n                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">\n                    <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>\n                    </svg>\n                </div>\n                <h1 class="text-3xl font-bold text-gray-900 mb-4">Thank You!</h1>\n                <p class="text-gray-600 mb-8">Your order has been confirmed. Check your email for tickets.</p>\n                <div id="order-confirmation-${e.orderNumber}" class="bg-gray-50 rounded-lg p-6 text-left mb-8">\n                    <div class="animate-pulse space-y-3">\n                        <div class="bg-gray-200 h-4 w-1/2 rounded"></div>\n                        <div class="bg-gray-200 h-4 w-3/4 rounded"></div>\n                    </div>\n                </div>\n                <a href="/account/tickets" class="inline-flex items-center px-6 py-3 bg-primary text-white font-medium rounded-lg hover:bg-primary-dark transition">\n                    View My Tickets\n                </a>\n            </div>\n        `)}async renderTerms(){const e=this.getContentElement();if(e){e.innerHTML='\n            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                <div class="animate-pulse space-y-4">\n                    <div class="bg-gray-200 h-8 w-1/3 rounded"></div>\n                    <div class="bg-gray-200 h-4 w-full rounded"></div>\n                    <div class="bg-gray-200 h-4 w-full rounded"></div>\n                    <div class="bg-gray-200 h-4 w-2/3 rounded"></div>\n                </div>\n            </div>\n        ';try{const t=await this.fetchApi("/pages/terms");e.innerHTML=`\n                <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                    <h1 class="text-3xl font-bold text-gray-900 mb-8">${t.data.title}</h1>\n                    <div class="prose max-w-none">\n                        ${t.data.content}\n                    </div>\n                </div>\n            `}catch(t){e.innerHTML='\n                <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                    <h1 class="text-3xl font-bold text-gray-900 mb-8">Terms & Conditions</h1>\n                    <p class="text-gray-600">Terms page not available.</p>\n                </div>\n            '}}}async renderPrivacy(){const e=this.getContentElement();if(e){e.innerHTML='\n            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                <div class="animate-pulse space-y-4">\n                    <div class="bg-gray-200 h-8 w-1/3 rounded"></div>\n                    <div class="bg-gray-200 h-4 w-full rounded"></div>\n                    <div class="bg-gray-200 h-4 w-full rounded"></div>\n                    <div class="bg-gray-200 h-4 w-2/3 rounded"></div>\n                </div>\n            </div>\n        ';try{const t=await this.fetchApi("/pages/privacy");e.innerHTML=`\n                <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                    <h1 class="text-3xl font-bold text-gray-900 mb-8">${t.data.title}</h1>\n                    <div class="prose max-w-none">\n                        ${t.data.content}\n                    </div>\n                </div>\n            `}catch(t){e.innerHTML='\n                <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                    <h1 class="text-3xl font-bold text-gray-900 mb-8">Privacy Policy</h1>\n                    <p class="text-gray-600">Privacy page not available.</p>\n                </div>\n            '}}}async renderPastEvents(){var e;const t=this.getContentElement();if(t){t.innerHTML='\n            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                <div id="past-events-container">\n                    <div class="animate-pulse space-y-6">\n                        <div class="bg-gray-200 h-10 w-1/4 rounded"></div>\n                        <div class="flex gap-4 mb-8">\n                            <div class="bg-gray-200 h-10 w-32 rounded"></div>\n                            <div class="bg-gray-200 h-10 w-40 rounded"></div>\n                        </div>\n                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">\n                            <div class="bg-gray-200 h-64 rounded-lg"></div>\n                            <div class="bg-gray-200 h-64 rounded-lg"></div>\n                            <div class="bg-gray-200 h-64 rounded-lg"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ';try{const t=await this.fetchApi("/events/past"),n=(null==(e=t.data)?void 0:e.events)||t.data||[],s=document.getElementById("past-events-container");if(!s)return;if(0===n.length)return void(s.innerHTML='\n                    <h1 class="text-3xl font-bold text-gray-900 mb-8">Evenimente trecute</h1>\n                    <p class="text-gray-500">Nu există evenimente trecute.</p>\n                ');const i=this.groupEventsByMonth(n);s.innerHTML=`\n                <h1 class="text-3xl font-bold text-gray-900 mb-8">Evenimente trecute</h1>\n                ${this.renderPastEventsByMonth(i)}\n            `}catch(n){const e=document.getElementById("past-events-container");e&&(e.innerHTML='\n                    <h1 class="text-3xl font-bold text-gray-900 mb-8">Evenimente trecute</h1>\n                    <p class="text-red-500">Nu s-au putut încărca evenimentele trecute.</p>\n                ')}}}groupEventsByMonth(e){const t=new Map;return e.forEach(e=>{const n=new Date(e.start_date||e.event_date),s=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;t.has(s)||t.set(s,[]),t.get(s).push(e)}),new Map([...t.entries()].sort((e,t)=>t[0].localeCompare(e[0])))}renderPastEventsByMonth(e){const t=["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"];let n="";return e.forEach((e,s)=>{const[i,a]=s.split("-"),r=t[parseInt(a)-1];n+=`\n                <div class="mb-10">\n                    <h2 class="text-xl font-semibold text-gray-700 mb-4 pb-2 border-b-2 border-gray-200">\n                        ${r} ${i}\n                    </h2>\n                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">\n                        ${e.map(e=>this.renderPastEventCard(e)).join("")}\n                    </div>\n                </div>\n            `}),n}renderPastEventCard(e){var t;const n=new Date(e.start_date||e.event_date).toLocaleDateString("ro-RO",{weekday:"short",day:"numeric",month:"short",year:"numeric"}),s=e.poster_url||e.hero_image_url||e.image;return`\n            <a href="${`/event/${e.slug}`}" class="block bg-white rounded-lg shadow-sm border overflow-hidden opacity-90 hover:opacity-100 hover:shadow-md transition cursor-pointer">\n                ${s?`<div class="relative">\n                        <img src="${s}" alt="${e.title}" class="w-full h-40 object-cover" style="filter: grayscale(30%);">\n                        <span class="absolute top-2 right-2 bg-gray-700 text-white text-xs px-2 py-1 rounded">Încheiat</span>\n                       </div>`:'<div class="relative h-40 bg-gray-200 flex items-center justify-center">\n                        <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>\n                        </svg>\n                        <span class="absolute top-2 right-2 bg-gray-700 text-white text-xs px-2 py-1 rounded">Încheiat</span>\n                       </div>'}\n                <div class="p-4">\n                    <h3 class="font-semibold text-gray-900 mb-1 truncate">${e.title}</h3>\n                    <p class="text-sm text-gray-500">${n}</p>\n                    ${(null==(t=e.venue)?void 0:t.name)?`<p class="text-sm text-gray-400">${e.venue.name}</p>`:""}\n                </div>\n            </a>\n        `}async renderPage(e){var t;const n=this.getContentElement();if(n){n.innerHTML='\n            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                <div class="animate-pulse space-y-4">\n                    <div class="bg-gray-200 h-8 w-1/3 rounded"></div>\n                    <div class="bg-gray-200 h-4 w-full rounded"></div>\n                    <div class="bg-gray-200 h-4 w-full rounded"></div>\n                    <div class="bg-gray-200 h-4 w-2/3 rounded"></div>\n                </div>\n            </div>\n        ';try{const s=await this.fetchApi(`/pages/${e.slug}`);if("builder"===s.data.page_type&&(null==(t=s.data.layout)?void 0:t.blocks))return n.innerHTML='<div id="page-content"></div>',d.updateLayout(s.data.layout,"page-content"),void(c.isActive()&&c.onLayoutUpdate(e=>{d.updateLayout(e,"page-content")}));n.innerHTML=`\n                <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                    <h1 class="text-3xl font-bold text-gray-900 mb-8">${s.data.title}</h1>\n                    <div class="prose max-w-none">\n                        ${s.data.content}\n                    </div>\n                </div>\n            `}catch(s){this.render404()}}}async renderBlog(){var e,t,n,s;const i=this.getContentElement();if(i){i.innerHTML=`\n            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-8">Blog</h1>\n                <div id="blog-list">\n                    <div class="animate-pulse space-y-6">\n                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">\n                            ${[1,2,3].map(()=>'\n                                <div class="bg-white dark:bg-gray-800 rounded-xl overflow-hidden">\n                                    <div class="bg-gray-200 dark:bg-gray-700 h-48"></div>\n                                    <div class="p-5 space-y-3">\n                                        <div class="bg-gray-200 dark:bg-gray-700 h-4 w-1/4 rounded"></div>\n                                        <div class="bg-gray-200 dark:bg-gray-700 h-6 w-3/4 rounded"></div>\n                                        <div class="bg-gray-200 dark:bg-gray-700 h-4 w-full rounded"></div>\n                                    </div>\n                                </div>\n                            ').join("")}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `;try{const s=await this.fetchApi("/blog"),i=(null==(e=s.data)?void 0:e.articles)||[];null==(t=s.data)||t.pagination;let r=[];try{r=(null==(n=(await this.fetchApi("/blog/categories")).data)?void 0:n.categories)||[]}catch(a){}const o=document.getElementById("blog-list");if(!o)return;if(0===i.length)return void(o.innerHTML='\n                    <div class="text-center py-12">\n                        <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"/>\n                        </svg>\n                        <p class="mt-4 text-gray-500 dark:text-gray-400">No articles yet.</p>\n                    </div>\n                ');o.innerHTML=`\n                ${r.length>0?`\n                    <div class="mb-8 flex flex-wrap gap-2">\n                        <a href="/blog" class="px-4 py-2 rounded-full text-sm font-medium bg-primary-600 text-white">All</a>\n                        ${r.map(e=>`\n                            <a href="/blog?category=${e.slug}" class="px-4 py-2 rounded-full text-sm font-medium bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700">\n                                ${e.name} (${e.articles_count})\n                            </a>\n                        `).join("")}\n                    </div>\n                `:""}\n                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">\n                    ${i.map(e=>this.renderBlogCard(e)).join("")}\n                </div>\n            `}catch(r){const e=document.getElementById("blog-list");e&&(403===(null==(s=r.response)?void 0:s.status)?e.innerHTML='\n                        <div class="text-center py-12">\n                            <p class="text-gray-500 dark:text-gray-400">Blog is not available.</p>\n                        </div>\n                    ':e.innerHTML='\n                        <div class="text-center py-12">\n                            <p class="text-red-500">Failed to load blog. Please try again.</p>\n                        </div>\n                    ')}}}renderBlogCard(e){const t=e.published_at?new Date(e.published_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"";return`\n            <article class="bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition-shadow border border-gray-100 dark:border-gray-700">\n                <a href="/blog/${e.slug}" class="block">\n                    ${e.featured_image?`<div class="aspect-[16/9] overflow-hidden">\n                            <img src="${e.featured_image}"\n                                 alt="${e.featured_image_alt||e.title}"\n                                 class="w-full h-full object-cover hover:scale-105 transition-transform duration-300">\n                           </div>`:'<div class="aspect-[16/9] bg-gradient-to-br from-primary-500 to-primary-700 flex items-center justify-center">\n                            <svg class="w-16 h-16 text-white/50" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"/>\n                            </svg>\n                           </div>'}\n                </a>\n                <div class="p-5">\n                    ${e.category?`<span class="inline-block px-3 py-1 text-xs font-medium bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 rounded-full mb-3">${e.category}</span>`:""}\n                    <a href="/blog/${e.slug}" class="block group">\n                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors line-clamp-2 mb-2">\n                            ${e.title}\n                        </h3>\n                    </a>\n                    ${e.excerpt?`<p class="text-gray-600 dark:text-gray-400 text-sm line-clamp-2 mb-4">${e.excerpt}</p>`:""}\n                    <div class="flex items-center justify-between text-sm text-gray-500 dark:text-gray-400">\n                        <span>${t}</span>\n                        <span>${e.reading_time||1} min read</span>\n                    </div>\n                </div>\n            </article>\n        `}async renderBlogArticle(e){var t,n;const s=this.getContentElement();if(!s)return;const i=e.slug;s.innerHTML='\n            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                <div class="animate-pulse space-y-6">\n                    <div class="bg-gray-200 dark:bg-gray-700 h-8 w-3/4 rounded"></div>\n                    <div class="bg-gray-200 dark:bg-gray-700 h-4 w-1/2 rounded"></div>\n                    <div class="bg-gray-200 dark:bg-gray-700 h-64 rounded-xl"></div>\n                    <div class="space-y-3">\n                        <div class="bg-gray-200 dark:bg-gray-700 h-4 w-full rounded"></div>\n                        <div class="bg-gray-200 dark:bg-gray-700 h-4 w-full rounded"></div>\n                        <div class="bg-gray-200 dark:bg-gray-700 h-4 w-2/3 rounded"></div>\n                    </div>\n                </div>\n            </div>\n        ';try{const e=await this.fetchApi(`/blog/${i}`),a=null==(t=e.data)?void 0:t.article,r=(null==(n=e.data)?void 0:n.related)||[];if(!a)return void this.render404();const o=a.published_at?new Date(a.published_at).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"";s.innerHTML=`\n                <article class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">\n                    <header class="mb-8">\n                        ${a.category?`<a href="/blog?category=${a.category_slug}" class="inline-block px-3 py-1 text-sm font-medium bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 rounded-full mb-4 hover:bg-primary-200 dark:hover:bg-primary-900/50 transition-colors">${a.category}</a>`:""}\n                        <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4">${a.title}</h1>\n                        ${a.subtitle?`<p class="text-xl text-gray-600 dark:text-gray-400 mb-6">${a.subtitle}</p>`:""}\n                        <div class="flex flex-wrap items-center gap-4 text-sm text-gray-500 dark:text-gray-400">\n                            ${a.author?`<span>By ${a.author}</span>`:""}\n                            <span>${o}</span>\n                            <span>${a.reading_time||1} min read</span>\n                            <span>${a.view_count||0} views</span>\n                        </div>\n                    </header>\n\n                    ${a.featured_image?`<figure class="mb-8">\n                            <img src="${a.featured_image}"\n                                 alt="${a.featured_image_alt||a.title}"\n                                 class="w-full rounded-xl">\n                           </figure>`:""}\n\n                    <div class="prose prose-lg dark:prose-invert max-w-none">\n                        ${a.content_html||a.content||""}\n                    </div>\n\n                    ${a.tags&&a.tags.length>0?`<div class="mt-8 pt-6 border-t border-gray-200 dark:border-gray-700">\n                            <div class="flex flex-wrap gap-2">\n                                ${a.tags.map(e=>`\n                                    <span class="px-3 py-1 text-sm bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 rounded-full">#${e}</span>\n                                `).join("")}\n                            </div>\n                           </div>`:""}\n\n                    ${r.length>0?`\n                        <section class="mt-12 pt-8 border-t border-gray-200 dark:border-gray-700">\n                            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">Related Articles</h2>\n                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">\n                                ${r.map(e=>`\n                                    <a href="/blog/${e.slug}" class="block group">\n                                        <div class="bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden">\n                                            ${e.featured_image?`<img src="${e.featured_image}" alt="${e.title}" class="w-full h-32 object-cover group-hover:scale-105 transition-transform duration-300">`:'<div class="w-full h-32 bg-gradient-to-br from-primary-500 to-primary-700"></div>'}\n                                        </div>\n                                        <h3 class="mt-3 font-medium text-gray-900 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors line-clamp-2">${e.title}</h3>\n                                    </a>\n                                `).join("")}\n                            </div>\n                        </section>\n                    `:""}\n\n                    <div class="mt-8 pt-6 border-t border-gray-200 dark:border-gray-700">\n                        <a href="/blog" class="inline-flex items-center gap-2 text-primary-600 dark:text-primary-400 hover:underline">\n                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>\n                            </svg>\n                            Back to Blog\n                        </a>\n                    </div>\n                </article>\n            `,this.updateArticleMetaTags(a)}catch(a){this.render404()}}updateArticleMetaTags(e){document.title=e.meta_title||e.title;const t=(e,t,n="name",s)=>{if(!t)return;let i=document.querySelector(e);i||(i=document.createElement("meta"),i.setAttribute(n,s||""),document.head.appendChild(i)),i.setAttribute("content",t)};t('meta[name="description"]',e.meta_description||e.excerpt||"","name","description"),t('meta[property="og:title"]',e.og_title||e.title,"property","og:title"),t('meta[property="og:description"]',e.og_description||e.excerpt||"","property","og:description"),t('meta[property="og:type"]',"article","property","og:type"),t('meta[property="og:url"]',window.location.href,"property","og:url"),(e.og_image||e.featured_image)&&t('meta[property="og:image"]',e.og_image||e.featured_image||"","property","og:image"),t('meta[name="twitter:card"]',"summary_large_image","name","twitter:card"),t('meta[name="twitter:title"]',e.og_title||e.title,"name","twitter:title"),t('meta[name="twitter:description"]',e.og_description||e.excerpt||"","name","twitter:description"),(e.og_image||e.featured_image)&&t('meta[name="twitter:image"]',e.og_image||e.featured_image||"","name","twitter:image")}render404(){const e=this.getContentElement();e&&(e.innerHTML='\n            <div class="min-h-[60vh] flex items-center justify-center px-4">\n                <div class="text-center">\n                    <h1 class="text-6xl font-bold text-gray-300 mb-4">404</h1>\n                    <h2 class="text-2xl font-semibold text-gray-900 mb-2">Page Not Found</h2>\n                    <p class="text-gray-600 mb-8">The page you\'re looking for doesn\'t exist.</p>\n                    <a href="/" class="inline-flex items-center px-6 py-3 bg-primary text-white font-medium rounded-lg hover:bg-primary-dark transition">\n                        Go Home\n                    </a>\n                </div>\n            </div>\n        ')}showTicketDetailModal(e){var t,n;const s=`\n            <div id="ticket-modal" class="fixed inset-0 z-50 overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true">\n                <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">\n                    \x3c!-- Backdrop --\x3e\n                    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>\n\n                    \x3c!-- Modal Panel --\x3e\n                    <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">\n                        <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">\n                            \x3c!-- Close button --\x3e\n                            <button id="close-modal" class="absolute top-4 right-4 text-gray-400 hover:text-gray-500">\n                                <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />\n                                </svg>\n                            </button>\n\n                            \x3c!-- Modal content --\x3e\n                            <div class="sm:flex sm:items-start">\n                                <div class="mt-3 text-center sm:mt-0 sm:text-left w-full">\n                                    <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4" id="modal-title">\n                                        Detalii Bilet\n                                    </h3>\n\n                                    \x3c!-- Event Info --\x3e\n                                    <div class="mb-4">\n                                        <h4 class="text-xl font-semibold text-gray-900 mb-1">${e.event_name}</h4>\n                                        <p class="text-sm text-gray-600">${e.ticket_type}</p>\n                                    </div>\n\n                                    \x3c!-- Status Badge --\x3e\n                                    <div class="mb-4">\n                                        <span class="inline-block px-3 py-1 text-sm font-medium rounded-full ${"valid"===e.status||"pending"===e.status?"bg-green-100 text-green-800":"used"===e.status?"bg-blue-100 text-blue-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}">\n                                            ${e.status_label}\n                                        </span>\n                                    </div>\n\n                                    \x3c!-- Event Details --\x3e\n                                    <div class="space-y-2 mb-4">\n                                        ${e.date?`<p class="text-sm text-gray-700"><strong>Dată:</strong> ${new Date(e.date).toLocaleDateString("ro-RO",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}</p>`:""}\n                                        ${e.venue?`<p class="text-sm text-gray-700"><strong>Locație:</strong> ${e.venue}</p>`:""}\n                                        ${e.seat_label?`<p class="text-sm text-gray-700"><strong>Loc:</strong> ${e.seat_label}</p>`:""}\n                                    </div>\n\n                                    \x3c!-- Beneficiary Info --\x3e\n                                    ${e.beneficiary&&e.beneficiary.name?`\n                                        <div class="border-t pt-3 mb-4">\n                                            <p class="text-xs text-gray-500 mb-1">Beneficiar:</p>\n                                            <p class="text-sm font-medium text-gray-900">${e.beneficiary.name}</p>\n                                            ${e.beneficiary.email?`<p class="text-xs text-gray-600">${e.beneficiary.email}</p>`:""}\n                                        </div>\n                                    `:""}\n\n                                    \x3c!-- QR Code --\x3e\n                                    <div class="border-t pt-4">\n                                        <div class="flex flex-col items-center">\n                                            <img src="${e.qr_code}" alt="QR Code" class="w-48 h-48 border-2 border-gray-300 rounded-lg mb-3">\n                                            <div class="text-center">\n                                                <p class="text-xs text-gray-500 mb-1">Cod bilet:</p>\n                                                <p class="text-lg font-mono font-bold text-gray-900">${e.code}</p>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    \x3c!-- Download/Print Buttons --\x3e\n                                    <div class="flex space-x-2 mt-6">\n                                        <button id="download-ticket" class="flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition font-medium">\n                                            Descarcă Bilet\n                                        </button>\n                                        <button id="print-ticket" class="flex-1 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition font-medium">\n                                            Printează\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `;document.body.insertAdjacentHTML("beforeend",s);const i=document.getElementById("ticket-modal"),a=document.getElementById("close-modal"),r=null==i?void 0:i.querySelector(".bg-gray-500"),o=()=>{null==i||i.remove()};null==a||a.addEventListener("click",o),null==r||r.addEventListener("click",o),null==(t=document.getElementById("download-ticket"))||t.addEventListener("click",()=>{const t=document.createElement("a");t.href=e.qr_code,t.download=`bilet-${e.code}.png`,t.click()}),null==(n=document.getElementById("print-ticket"))||n.addEventListener("click",()=>{const t=window.open("","_blank");t&&(t.document.write(`\n                    <html>\n                        <head>\n                            <title>Bilet ${e.code}</title>\n                            <style>\n                                body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }\n                                img { max-width: 300px; margin: 20px 0; }\n                                .code { font-size: 18px; font-weight: bold; margin: 10px 0; }\n                            </style>\n                        </head>\n                        <body>\n                            <h1>${e.event_name}</h1>\n                            <p>${e.ticket_type}</p>\n                            ${e.date?`<p>${new Date(e.date).toLocaleDateString("ro-RO",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}</p>`:""}\n                            ${e.venue?`<p>${e.venue}</p>`:""}\n                            ${e.seat_label?`<p>Loc: ${e.seat_label}</p>`:""}\n                            <img src="${e.qr_code}" alt="QR Code">\n                            <p class="code">Cod: ${e.code}</p>\n                            ${e.beneficiary&&e.beneficiary.name?`<p>Beneficiar: ${e.beneficiary.name}</p>`:""}\n                        </body>\n                    </html>\n                `),t.document.close(),t.print())})}initCountdown(){const e=document.getElementById("countdown-container");if(!e)return;const t=e.dataset.eventDate,n=e.dataset.eventTime,s="true"===e.dataset.isCancelled,i="true"===e.dataset.isPostponed;if(s||!t)return void(e.style.display="none");let a;try{a=new Date(t);if(!(t.includes("T")||t.includes(" "))&&n&&n.match(/^\d{2}:\d{2}/)){const e=t.split("T")[0];a=new Date(`${e}T${n}`)}if(isNaN(a.getTime()))return void(e.style.display="none")}catch(c){return void(e.style.display="none")}const r=document.createElement("div");r.className="p-6 mb-6 text-white rounded-lg shadow-lg bg-gradient-to-r from-blue-500 to-purple-600";const o=document.createElement("h3");o.className="mb-3 text-lg font-semibold text-center",o.textContent=i?"Noua dată - Începe în:":"Începe în:";const l=document.createElement("div");l.className="flex justify-center gap-4 text-center",l.id="countdown-display",r.appendChild(o),r.appendChild(l),e.appendChild(r);const d=()=>{const e=(new Date).getTime(),t=a.getTime()-e;if(t<0)return o.textContent="Evenimentul a început!",void(l.innerHTML="");const n=Math.floor(t/864e5),s=Math.floor(t%864e5/36e5),i=Math.floor(t%36e5/6e4),r=Math.floor(t%6e4/1e3);l.innerHTML=`\n                <div class="flex flex-col">\n                    <span class="text-3xl font-bold">${n}</span>\n                    <span class="text-sm">zile</span>\n                </div>\n                <div class="flex flex-col">\n                    <span class="text-3xl font-bold">${s}</span>\n                    <span class="text-sm">ore</span>\n                </div>\n                <div class="flex flex-col">\n                    <span class="text-3xl font-bold">${i}</span>\n                    <span class="text-sm">minute</span>\n                </div>\n                <div class="flex flex-col">\n                    <span class="text-3xl font-bold">${r}</span>\n                    <span class="text-sm">secunde</span>\n                </div>\n            `};d(),setInterval(d,1e3)}}class k{constructor(e){__publicField(this,"apiClient"),__publicField(this,"user",null),__publicField(this,"tokenKey","tixello_token"),this.apiClient=e,this.loadToken()}loadToken(){const e=localStorage.getItem(this.tokenKey);e&&this.apiClient.setAccessToken(e)}async checkAuth(){if(!localStorage.getItem(this.tokenKey))return!1;const e=await this.apiClient.get("/auth/me");return e.success&&e.data?(this.user=e.data,!0):(this.logout(),!1)}async login(e,t){const n=await this.apiClient.post("/auth/login",{email:e,password:t},{withAuth:!1});if(n.success&&n.data){const{token:e,user:t}=n.data;return localStorage.setItem(this.tokenKey,e),this.apiClient.setAccessToken(e),this.user=t,{success:!0}}return{success:!1,message:n.message}}async register(e){const t=await this.apiClient.post("/auth/register",e,{withAuth:!1});if(t.success&&t.data){const{token:e,user:n}=t.data;return localStorage.setItem(this.tokenKey,e),this.apiClient.setAccessToken(e),this.user=n,{success:!0}}return{success:!1,message:t.message}}logout(){localStorage.removeItem(this.tokenKey),this.apiClient.setAccessToken(null),this.user=null,window.location.hash="/"}isAuthenticated(){return null!==this.user}isAdmin(){var e,t;return"admin"===(null==(e=this.user)?void 0:e.role)||"super_admin"===(null==(t=this.user)?void 0:t.role)}isSuperAdmin(){var e;return"super_admin"===(null==(e=this.user)?void 0:e.role)}getUser(){return this.user}}class ${static init(){this.initialized||(this.initialized=!0,this.detectDevTools(),this.antiDebug(),this.tamperDetection())}static verifyDomain(e){const t=window.location.hostname;return"localhost"===t||"127.0.0.1"===t||(!0===window.__TIXELLO_PREVIEW__||(!!window.location.search.includes("preview_mode=1")||(t===e||t.endsWith("."+e))))}static detectDevTools(){setInterval(()=>{},1e3)}static antiDebug(){setInterval(()=>{performance.now(),performance.now()},5e3)}static tamperDetection(){new MutationObserver(e=>{e.forEach(e=>{"childList"===e.type&&e.addedNodes.forEach(e=>{if("SCRIPT"===e.nodeName){e.src.includes("tixello")}})})}).observe(document.documentElement,{childList:!0,subtree:!0})}static disableContextMenu(){document.addEventListener("contextmenu",e=>(e.preventDefault(),!1))}static async verifyIntegrity(e){try{const t=document.getElementsByTagName("script");for(const n of Array.from(t))if(n.src.includes("tixello-loader")){const t=await fetch(n.src),s=await t.text(),i=(new TextEncoder).encode(s),a=await crypto.subtle.digest("SHA-384",i),r=Array.from(new Uint8Array(a));return`sha384-${btoa(String.fromCharCode(...r))}`===e}return!1}catch{return!1}}}__publicField($,"initialized",!1);const _={inter:{name:"Inter",category:"sans-serif",weights:[400,500,600,700,800]},poppins:{name:"Poppins",category:"sans-serif",weights:[400,500,600,700]},"open-sans":{name:"Open Sans",category:"sans-serif",weights:[400,600,700]},roboto:{name:"Roboto",category:"sans-serif",weights:[400,500,700]},montserrat:{name:"Montserrat",category:"sans-serif",weights:[400,500,600,700]},lato:{name:"Lato",category:"sans-serif",weights:[400,700]},"playfair-display":{name:"Playfair Display",category:"serif",weights:[400,700]},merriweather:{name:"Merriweather",category:"serif",weights:[400,700]},lora:{name:"Lora",category:"serif",weights:[400,600,700]},oswald:{name:"Oswald",category:"sans-serif",weights:[400,500,600,700]},raleway:{name:"Raleway",category:"sans-serif",weights:[400,500,600,700]},"bebas-neue":{name:"Bebas Neue",category:"sans-serif",weights:[400]}};class C{static async load(e){if(this.loadedFonts.has(e))return;if(this.loadingPromises.has(e))return this.loadingPromises.get(e);const t=_[e];if(!t)return;const n=this.loadFromBunny(e,t);this.loadingPromises.set(e,n);try{await n,this.loadedFonts.add(e)}finally{this.loadingPromises.delete(e)}}static async loadFromBunny(e,t){const n=t.name.replace(/ /g,"+"),s=t.weights.join(";"),i=`https://fonts.bunny.net/css?family=${n}:wght@${s}&display=swap`;return new Promise((e,s)=>{if(document.querySelector(`link[href*="${n}"]`))return void e();const a=document.createElement("link");a.rel="stylesheet",a.href=i,a.onload=()=>{e()},a.onerror=()=>{s(new Error(`Failed to load font: ${t.name}`))},document.head.appendChild(a)})}static async loadMultiple(e){const t=[...new Set(e)];await Promise.all(t.map(e=>this.load(e)))}static getFontStack(e){const t=_[e];if(!t)return"system-ui, sans-serif";const n="serif"===t.category?"Georgia, serif":"system-ui, -apple-system, sans-serif";return`"${t.name}", ${n}`}static isLoaded(e){return this.loadedFonts.has(e)}static getAvailable(){return _}static preloadCommon(){this.load("inter").catch(()=>{})}}__publicField(C,"loadedFonts",new Set),__publicField(C,"loadingPromises",new Map),$.init(),async function(){var t,n,s,i;try{const a=document.currentScript,m=null==a?void 0:a.getAttribute("data-api"),u=(null==a?void 0:a.getAttribute("data-config"))||window.__TIXELLO_CONFIG__;if(!m&&!u)throw new Error("Tixello configuration not found");let p;if(p=u?await o.init(u):await o.initFromHostname({apiEndpoint:m,hostname:window.location.hostname}),!$.verifyDomain(p.domain))throw new Error("Domain verification failed");c.init();d.init(p),y.init(p),C.preloadCommon(),(null==(n=null==(t=p.theme)?void 0:t.typography)?void 0:n.fontFamily)&&C.load(p.theme.typography.fontFamily.toLowerCase().replace(/ /g,"-")).catch(()=>{}),(null==(i=null==(s=p.theme)?void 0:s.typography)?void 0:i.headingFont)&&C.load(p.theme.typography.headingFont.toLowerCase().replace(/ /g,"-")).catch(()=>{});const g=new l(p),h=new k(g),v=new w(p),b=new r({config:p,apiClient:g,authManager:h,router:v}),f=document.getElementById("tixello-app");if(!f)throw new Error("Mount point #tixello-app not found");await b.mount(f);const _=new e,E=x.getInstance();await E.init(g,_,p),window.Tixello=b,window.TixelloTracking=y}catch(a){const e=document.getElementById("tixello-app");e&&(e.innerHTML='\n                <div style="padding: 20px; text-align: center; color: #dc2626;">\n                    <h2>Unable to load Tixello</h2>\n                    <p>Please refresh the page or contact support.</p>\n                </div>\n            ')}}();const E=Object.freeze(Object.defineProperty({__proto__:null,EventsModule:class{constructor(){__publicField(this,"name","events"),__publicField(this,"apiClient",null),__publicField(this,"eventBus",null),__publicField(this,"events",[]),__publicField(this,"pastEvents",[]),__publicField(this,"pastEventsFilters",{})}async init(e,t){this.apiClient=e,this.eventBus=t,this.eventBus.on("route:events",()=>this.loadEvents()),this.eventBus.on("route:event-detail",e=>this.loadEventDetail(e)),this.eventBus.on("route:past-events",()=>this.loadPastEvents())}async loadEvents(){if(!this.apiClient)return;const e=document.getElementById("events-list");if(e)try{const t=await this.apiClient.get("/events");if(this.events=t.data.events||[],0===this.events.length)return void(e.innerHTML='<p class="text-gray-500">No upcoming events.</p>');e.innerHTML=this.renderEventsList(this.events),this.bindEventListeners()}catch(t){e.innerHTML='<p class="text-red-500">Failed to load events. Please try again.</p>'}}renderEventsList(e){return`\n            <div class="events-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem;">\n                ${e.map(e=>this.renderEventCard(e)).join("")}\n            </div>\n        `}renderEventCard(e){var t;const n=e.start_date||e.event_date,s=n?new Date(n).toLocaleDateString("ro-RO",{weekday:"short",month:"short",day:"numeric"}):"",i=e.poster_url||e.hero_image_url||e.image_url,a="string"==typeof e.venue?e.venue:(null==(t=e.venue)?void 0:t.name)||"";let r=0;return e.ticket_types&&e.ticket_types.length>0&&(r=e.ticket_types.reduce((e,t)=>{const n=t.sale_price??t.price??0;return n>0&&(0===e||n<e)?n:e},0)),0===r&&(r=e.price_from??e.min_price??0),`\n            <div class="tixello-card event-card" data-event-slug="${e.slug}">\n                ${i?`<img src="${i}" alt="${e.title}" style="width: 100%; height: 200px; object-fit: cover; border-radius: 0.5rem 0.5rem 0 0;">`:""}\n                <div style="padding: 1rem;">\n                    <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem;">${e.title}</h3>\n                    <p style="color: #6b7280; font-size: 0.875rem; margin-bottom: 0.5rem;">\n                        <span>${s}</span>${a?` • <span>${a}</span>`:""}\n                    </p>\n                    <p style="font-weight: 600; color: #059669; margin-bottom: 1rem;">\n                        De la ${r} ${e.currency||"RON"}\n                    </p>\n                    <a href="#/events/${e.slug}" class="tixello-btn" style="display: inline-block; text-decoration: none;">\n                        Detalii\n                    </a>\n                </div>\n            </div>\n        `}async loadEventDetail(e){if(!this.apiClient)return;const t=document.getElementById(`event-${e}`);if(t)try{const n=(await this.apiClient.get(`/events/${e}`)).data.event;t.innerHTML=this.renderEventDetail(n),this.bindTicketSelectors(n)}catch(n){t.innerHTML='<p class="text-red-500">Failed to load event. Please try again.</p>'}}renderEventDetail(e){var t;const n=e.start_date||e.event_date,s=n?new Date(n).toLocaleDateString("ro-RO",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"",i=e.hero_image_url||e.poster_url||e.image_url,a="string"==typeof e.venue?e.venue:(null==(t=e.venue)?void 0:t.name)||"",r=e.start_time||e.event_time||"",o=(e.ticket_types||[]).reduce((e,t)=>{const n=t.sale_price??t.price??0;return n>0&&(0===e||n<e)?n:e},0),l=e.currency||"RON",d="object"==typeof e.venue?e.venue:null,c=d&&(d.address||d.city),m=e.artists&&e.artists.length>0;return`\n            <style>\n                .event-detail-grid {\n                    display: grid;\n                    grid-template-columns: 1fr;\n                    gap: 2rem;\n                }\n                @media (min-width: 768px) {\n                    .event-detail-grid {\n                        grid-template-columns: 1fr 1fr;\n                    }\n                }\n                .tickets-sidebar {\n                    display: none;\n                }\n                @media (min-width: 768px) {\n                    .tickets-sidebar {\n                        display: block;\n                    }\n                }\n                .mobile-tickets-btn {\n                    display: flex;\n                    position: fixed;\n                    bottom: 0;\n                    left: 0;\n                    right: 0;\n                    z-index: 40;\n                    background: linear-gradient(135deg, var(--tixello-primary, #6366f1) 0%, var(--tixello-primary-dark, #4f46e5) 100%);\n                    color: white;\n                    padding: 1rem 1.5rem;\n                    justify-content: space-between;\n                    align-items: center;\n                    cursor: pointer;\n                    box-shadow: 0 -4px 20px rgba(0,0,0,0.15);\n                }\n                @media (min-width: 768px) {\n                    .mobile-tickets-btn {\n                        display: none;\n                    }\n                }\n                .mobile-tickets-panel {\n                    position: fixed;\n                    bottom: 0;\n                    left: 0;\n                    right: 0;\n                    z-index: 50;\n                    background: white;\n                    border-radius: 1.5rem 1.5rem 0 0;\n                    box-shadow: 0 -8px 30px rgba(0,0,0,0.2);\n                    transform: translateY(100%);\n                    transition: transform 0.3s ease-out;\n                    max-height: 85vh;\n                    overflow-y: auto;\n                }\n                .mobile-tickets-panel.open {\n                    transform: translateY(0);\n                }\n                .mobile-tickets-overlay {\n                    position: fixed;\n                    inset: 0;\n                    background: rgba(0,0,0,0.5);\n                    z-index: 45;\n                    opacity: 0;\n                    pointer-events: none;\n                    transition: opacity 0.3s ease;\n                }\n                .mobile-tickets-overlay.open {\n                    opacity: 1;\n                    pointer-events: auto;\n                }\n                @media (min-width: 768px) {\n                    .mobile-tickets-panel, .mobile-tickets-overlay {\n                        display: none !important;\n                    }\n                }\n                /* Add bottom padding on mobile for the sticky button */\n                @media (max-width: 767px) {\n                    .event-detail {\n                        padding-bottom: 80px;\n                    }\n                }\n                /* Collapsible sections for mobile */\n                .collapsible-section {\n                    margin-top: 1.5rem;\n                    border: 1px solid #e5e7eb;\n                    border-radius: 0.75rem;\n                    overflow: hidden;\n                }\n                .collapsible-header {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    padding: 1rem;\n                    background: #f9fafb;\n                    cursor: pointer;\n                    user-select: none;\n                }\n                .collapsible-header h3 {\n                    margin: 0;\n                    font-size: 1rem;\n                    font-weight: 600;\n                    display: flex;\n                    align-items: center;\n                    gap: 0.5rem;\n                }\n                .collapsible-icon {\n                    width: 20px;\n                    height: 20px;\n                    transition: transform 0.2s ease;\n                }\n                .collapsible-section.open .collapsible-icon {\n                    transform: rotate(180deg);\n                }\n                .collapsible-content {\n                    max-height: 0;\n                    overflow: hidden;\n                    transition: max-height 0.3s ease;\n                }\n                .collapsible-section.open .collapsible-content {\n                    max-height: 500px;\n                }\n                .collapsible-content-inner {\n                    padding: 1rem;\n                }\n                /* On desktop, sections are always expanded */\n                @media (min-width: 768px) {\n                    .collapsible-section {\n                        border: none;\n                        margin-top: 2rem;\n                    }\n                    .collapsible-header {\n                        background: transparent;\n                        cursor: default;\n                        padding: 0 0 0.75rem 0;\n                        border-bottom: 2px solid #e5e7eb;\n                    }\n                    .collapsible-icon {\n                        display: none;\n                    }\n                    .collapsible-content {\n                        max-height: none !important;\n                    }\n                    .collapsible-content-inner {\n                        padding: 1rem 0;\n                    }\n                }\n                .artist-card {\n                    display: flex;\n                    align-items: center;\n                    gap: 1rem;\n                    padding: 0.75rem 0;\n                    border-bottom: 1px solid #f3f4f6;\n                }\n                .artist-card:last-child {\n                    border-bottom: none;\n                }\n                .artist-image {\n                    width: 60px;\n                    height: 60px;\n                    border-radius: 50%;\n                    object-fit: cover;\n                    background: #e5e7eb;\n                }\n                .artist-name {\n                    font-weight: 600;\n                    font-size: 0.95rem;\n                }\n            </style>\n\n            <div class="event-detail">\n                <div class="event-detail-grid">\n                    <div>\n                        ${i?`<img src="${i}" alt="${e.title}" style="width: 100%; border-radius: 0.5rem;">`:""}\n                        <h1 style="font-size: 2rem; font-weight: 700; margin: 1rem 0;">${e.title}</h1>\n                        <p style="color: #6b7280; margin-bottom: 1rem;">\n                            ${s}${r?` la ${r}`:""}<br>\n                            ${a}\n                        </p>\n                        <div style="margin-top: 1rem;">\n                            ${e.description||""}\n                        </div>\n\n                        ${m?`\n                        \x3c!-- Artists Section - Collapsible on mobile --\x3e\n                        <div class="collapsible-section" id="artists-section">\n                            <div class="collapsible-header" onclick="this.parentElement.classList.toggle('open')">\n                                <h3>\n                                    <svg style="width: 20px; height: 20px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>\n                                    </svg>\n                                    Artiști\n                                </h3>\n                                <svg class="collapsible-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>\n                                </svg>\n                            </div>\n                            <div class="collapsible-content">\n                                <div class="collapsible-content-inner">\n                                    ${e.artists.map(e=>`\n                                        <div class="artist-card">\n                                            ${e.image?`<img src="${e.image}" alt="${e.name}" class="artist-image">`:'<div class="artist-image" style="display: flex; align-items: center; justify-content: center;">\n                                                    <svg style="width: 24px; height: 24px; color: #9ca3af;" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>\n                                                    </svg>\n                                                   </div>'}\n                                            <span class="artist-name">${e.name}</span>\n                                        </div>\n                                    `).join("")}\n                                </div>\n                            </div>\n                        </div>\n                        `:""}\n\n                        ${c?`\n                        \x3c!-- Location Section - Collapsible on mobile --\x3e\n                        <div class="collapsible-section" id="location-section">\n                            <div class="collapsible-header" onclick="this.parentElement.classList.toggle('open')">\n                                <h3>\n                                    <svg style="width: 20px; height: 20px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>\n                                    </svg>\n                                    Locație\n                                </h3>\n                                <svg class="collapsible-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>\n                                </svg>\n                            </div>\n                            <div class="collapsible-content">\n                                <div class="collapsible-content-inner">\n                                    <p style="font-weight: 600; margin: 0 0 0.5rem 0;">${d.name}</p>\n                                    ${d.address?`<p style="color: #6b7280; margin: 0 0 0.25rem 0;">${d.address}</p>`:""}\n                                    ${d.city?`<p style="color: #6b7280; margin: 0;">${d.city}</p>`:""}\n                                    ${d.latitude&&d.longitude?`\n                                        <a href="https://www.google.com/maps?q=${d.latitude},${d.longitude}"\n                                           target="_blank"\n                                           rel="noopener noreferrer"\n                                           style="display: inline-flex; align-items: center; gap: 0.5rem; margin-top: 1rem; color: var(--tixello-primary, #6366f1); text-decoration: none; font-weight: 500;">\n                                            <svg style="width: 16px; height: 16px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>\n                                            </svg>\n                                            Deschide în Google Maps\n                                        </a>\n                                    `:""}\n                                </div>\n                            </div>\n                        </div>\n                        `:""}\n                    </div>\n                    \x3c!-- Desktop: Tickets sidebar (no title) --\x3e\n                    <div class="tixello-card tickets-sidebar">\n                        <div id="ticket-types">\n                            ${(e.ticket_types||[]).map(e=>this.renderTicketType(e)).join("")}\n                        </div>\n                        <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid #e5e7eb;">\n                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">\n                                <span style="font-weight: 600;">Total:</span>\n                                <span id="total-price" style="font-size: 1.5rem; font-weight: 700;">0 ${l}</span>\n                            </div>\n                            <button id="add-to-cart-btn" class="tixello-btn" style="width: 100%;" disabled>\n                                Adaugă în coș\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            \x3c!-- Mobile: Sticky bottom button --\x3e\n            <div class="mobile-tickets-btn" id="mobile-tickets-btn">\n                <div>\n                    <div style="font-weight: 700; font-size: 1.1rem;">Bilete</div>\n                    <div style="font-size: 0.875rem; opacity: 0.9;">Începând de la ${o} ${l}</div>\n                </div>\n                <svg style="width: 24px; height: 24px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/>\n                </svg>\n            </div>\n\n            \x3c!-- Mobile: Tickets panel overlay --\x3e\n            <div class="mobile-tickets-overlay" id="mobile-tickets-overlay"></div>\n\n            \x3c!-- Mobile: Tickets panel --\x3e\n            <div class="mobile-tickets-panel" id="mobile-tickets-panel">\n                <div style="padding: 1rem 1.5rem; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; background: white; z-index: 10; border-radius: 1.5rem 1.5rem 0 0;">\n                    <h2 style="font-size: 1.25rem; font-weight: 600; margin: 0;">Selectează bilete</h2>\n                    <button id="mobile-tickets-close" style="padding: 0.5rem; border-radius: 0.5rem; border: none; background: #f3f4f6; cursor: pointer; display: flex; align-items: center; justify-content: center;">\n                        <svg style="width: 24px; height: 24px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>\n                        </svg>\n                    </button>\n                </div>\n                <div style="padding: 1rem 1.5rem;">\n                    <div id="ticket-types-mobile">\n                        ${(e.ticket_types||[]).map(e=>this.renderTicketType(e,!0)).join("")}\n                    </div>\n                    <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid #e5e7eb;">\n                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">\n                            <span style="font-weight: 600;">Total:</span>\n                            <span id="total-price-mobile" style="font-size: 1.5rem; font-weight: 700;">0 ${l}</span>\n                        </div>\n                        <button id="add-to-cart-btn-mobile" class="tixello-btn" style="width: 100%;" disabled>\n                            Adaugă în coș\n                        </button>\n                    </div>\n                </div>\n            </div>\n        `}renderTicketType(e,t=!1){const n=t?" qty-mobile":"",s=e.sale_price??e.price??0;return`\n            <div class="ticket-type" style="display: flex; justify-content: space-between; align-items: center; padding: 1rem 0; border-bottom: 1px solid #e5e7eb;">\n                <div style="flex: 1; min-width: 0;">\n                    <h4 style="font-weight: 600; font-size: 0.95rem; margin: 0 0 0.25rem 0;">${e.name}</h4>\n                    ${e.description?`<p style="font-size: 0.8rem; color: #6b7280; margin: 0 0 0.25rem 0;">${e.description}</p>`:""}\n                    <p style="font-weight: 600; color: #059669; margin: 0; font-size: 0.95rem;">${s} RON</p>\n                </div>\n                <div style="display: flex; align-items: center; gap: 0.5rem; flex-shrink: 0;">\n                    <button class="qty-btn qty-minus${n}" data-ticket-id="${e.id}" style="width: 32px; height: 32px; border: 1px solid #d1d5db; border-radius: 0.375rem; cursor: pointer; background: white; font-size: 1.1rem; display: flex; align-items: center; justify-content: center;">−</button>\n                    <input type="number" class="qty-input${n}" data-ticket-id="${e.id}" data-price="${s}" value="0" min="0" max="${e.available_quantity??10}" style="width: 44px; text-align: center; border: 1px solid #d1d5db; border-radius: 0.375rem; padding: 0.375rem; font-size: 0.95rem;">\n                    <button class="qty-btn qty-plus${n}" data-ticket-id="${e.id}" style="width: 32px; height: 32px; border: 1px solid #d1d5db; border-radius: 0.375rem; cursor: pointer; background: white; font-size: 1.1rem; display: flex; align-items: center; justify-content: center;">+</button>\n                </div>\n            </div>\n        `}bindEventListeners(){document.querySelectorAll(".event-card").forEach(e=>{e.addEventListener("click",t=>{if("A"!==t.target.tagName){const t=e.getAttribute("data-event-slug");t&&(window.location.hash=`/events/${t}`)}})})}bindTicketSelectors(e){const t=e.currency||"RON",n=document.getElementById("mobile-tickets-btn"),s=document.getElementById("mobile-tickets-close"),i=document.getElementById("mobile-tickets-overlay"),a=document.getElementById("mobile-tickets-panel"),r=()=>{a&&i&&(i.classList.remove("open"),a.classList.remove("open"),document.body.style.overflow="")};n&&n.addEventListener("click",()=>{a&&i&&(i.classList.add("open"),a.classList.add("open"),document.body.style.overflow="hidden")}),s&&s.addEventListener("click",r),i&&i.addEventListener("click",r);const o=()=>{let e=0,n=!1;document.querySelectorAll(".qty-input:not(.qty-mobile)").forEach(t=>{const s=t,i=parseInt(s.value)||0,a=parseFloat(s.getAttribute("data-price")||"0");e+=i*a,i>0&&(n=!0)});const s=document.getElementById("total-price");s&&(s.textContent=`${e.toFixed(2)} ${t}`);const i=document.getElementById("total-price-mobile");i&&(i.textContent=`${e.toFixed(2)} ${t}`);const a=document.getElementById("add-to-cart-btn");a&&(a.disabled=!n);const r=document.getElementById("add-to-cart-btn-mobile");r&&(r.disabled=!n)},l=(e,t)=>{const n=document.querySelector(`.qty-input:not(.qty-mobile)[data-ticket-id="${e}"]`);n&&(n.value=t)},d=(e,t)=>{const n=document.querySelector(`.qty-input.qty-mobile[data-ticket-id="${e}"]`);n&&(n.value=t)};document.querySelectorAll(".qty-minus:not(.qty-mobile)").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-ticket-id"),n=document.querySelector(`.qty-input:not(.qty-mobile)[data-ticket-id="${t}"]`);n&&parseInt(n.value)>0&&(n.value=String(parseInt(n.value)-1),t&&d(t,n.value),o())})}),document.querySelectorAll(".qty-plus:not(.qty-mobile)").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-ticket-id"),n=document.querySelector(`.qty-input:not(.qty-mobile)[data-ticket-id="${t}"]`);if(n){const e=parseInt(n.getAttribute("max")||"10");parseInt(n.value)<e&&(n.value=String(parseInt(n.value)+1),t&&d(t,n.value),o())}})}),document.querySelectorAll(".qty-minus.qty-mobile").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-ticket-id"),n=document.querySelector(`.qty-input.qty-mobile[data-ticket-id="${t}"]`);n&&parseInt(n.value)>0&&(n.value=String(parseInt(n.value)-1),t&&l(t,n.value),o())})}),document.querySelectorAll(".qty-plus.qty-mobile").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-ticket-id"),n=document.querySelector(`.qty-input.qty-mobile[data-ticket-id="${t}"]`);if(n){const e=parseInt(n.getAttribute("max")||"10");parseInt(n.value)<e&&(n.value=String(parseInt(n.value)+1),t&&l(t,n.value),o())}})}),document.querySelectorAll(".qty-input:not(.qty-mobile)").forEach(e=>{e.addEventListener("change",()=>{const t=e.getAttribute("data-ticket-id");t&&d(t,e.value),o()})}),document.querySelectorAll(".qty-input.qty-mobile").forEach(e=>{e.addEventListener("change",()=>{const t=e.getAttribute("data-ticket-id");t&&l(t,e.value),o()})});const c=()=>{const t=[];document.querySelectorAll(".qty-input:not(.qty-mobile)").forEach(e=>{const n=e,s=parseInt(n.value)||0;s>0&&t.push({ticket_type_id:n.getAttribute("data-ticket-id"),quantity:s,price:parseFloat(n.getAttribute("data-price")||"0")})}),t.length>0&&this.eventBus&&(this.eventBus.emit("cart:add",{event:e,items:t}),r(),window.location.hash="/cart")},m=document.getElementById("add-to-cart-btn");m&&m.addEventListener("click",c);const u=document.getElementById("add-to-cart-btn-mobile");u&&u.addEventListener("click",c)}async loadPastEvents(){if(!this.apiClient)return;const e=document.getElementById("past-events-container");if(e)try{const t={};this.pastEventsFilters.year&&(t.year=String(this.pastEventsFilters.year)),this.pastEventsFilters.month&&(t.month=String(this.pastEventsFilters.month));const n=new URLSearchParams(t).toString(),s="/events/past"+(n?`?${n}`:""),i=await this.apiClient.get(s);this.pastEvents=i.data.events||[],e.innerHTML=this.renderPastEventsPage(),this.bindPastEventsFilters()}catch(t){e.innerHTML='<p class="text-red-500">Nu s-au putut încărca evenimentele trecute.</p>'}}renderPastEventsPage(){const e=(new Date).getFullYear(),t=[];for(let s=e;s>=e-10;s--)t.push(s);const n=this.groupEventsByMonth(this.pastEvents);return`\n            <div class="past-events-page">\n                <h1 style="font-size: 2rem; font-weight: 700; margin-bottom: 1.5rem;">Evenimente trecute</h1>\n\n                \x3c!-- Filters --\x3e\n                <div class="past-events-filters" style="display: flex; gap: 1rem; margin-bottom: 2rem; flex-wrap: wrap;">\n                    <select id="filter-year" style="padding: 0.5rem 1rem; border: 1px solid #d1d5db; border-radius: 0.5rem; background: white; min-width: 120px;">\n                        <option value="">Toți anii</option>\n                        ${t.map(e=>`<option value="${e}" ${this.pastEventsFilters.year===e?"selected":""}>${e}</option>`).join("")}\n                    </select>\n                    <select id="filter-month" style="padding: 0.5rem 1rem; border: 1px solid #d1d5db; border-radius: 0.5rem; background: white; min-width: 150px;">\n                        <option value="">Toate lunile</option>\n                        ${[{value:1,name:"Ianuarie"},{value:2,name:"Februarie"},{value:3,name:"Martie"},{value:4,name:"Aprilie"},{value:5,name:"Mai"},{value:6,name:"Iunie"},{value:7,name:"Iulie"},{value:8,name:"August"},{value:9,name:"Septembrie"},{value:10,name:"Octombrie"},{value:11,name:"Noiembrie"},{value:12,name:"Decembrie"}].map(e=>`<option value="${e.value}" ${this.pastEventsFilters.month===e.value?"selected":""}>${e.name}</option>`).join("")}\n                    </select>\n                    <button id="clear-filters" style="padding: 0.5rem 1rem; border: 1px solid #d1d5db; border-radius: 0.5rem; background: #f3f4f6; cursor: pointer;">\n                        Resetează filtrele\n                    </button>\n                </div>\n\n                \x3c!-- Events grouped by month --\x3e\n                <div class="past-events-list">\n                    ${0===this.pastEvents.length?'<p style="color: #6b7280;">Nu există evenimente pentru perioada selectată.</p>':this.renderEventsByMonth(n)}\n                </div>\n            </div>\n        `}groupEventsByMonth(e){const t=new Map;return e.forEach(e=>{const n=new Date(e.event_date),s=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;t.has(s)||t.set(s,[]),t.get(s).push(e)}),new Map([...t.entries()].sort((e,t)=>t[0].localeCompare(e[0])))}renderEventsByMonth(e){const t=["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"];let n="";return e.forEach((e,s)=>{const[i,a]=s.split("-"),r=t[parseInt(a)-1];n+=`\n                <div class="month-section" style="margin-bottom: 2.5rem;">\n                    <h2 style="font-size: 1.25rem; font-weight: 600; color: #374151; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid #e5e7eb;">\n                        ${r} ${i}\n                    </h2>\n                    <div class="events-grid grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">\n                        ${e.map(e=>this.renderPastEventCard(e)).join("")}\n                    </div>\n                </div>\n            `}),n}renderPastEventCard(e){const t=new Date(e.event_date).toLocaleDateString("ro-RO",{weekday:"short",day:"numeric",month:"short",year:"numeric"}),n=e.poster_url||e.hero_image_url||e.image_url;return`\n            <div class="tixello-card past-event-card" style="opacity: 0.9;">\n                ${n?`<div style="position: relative;">\n                        <img src="${n}" alt="${e.title}" style="width: 100%; height: 160px; object-fit: cover; border-radius: 0.5rem 0.5rem 0 0; filter: grayscale(30%);">\n                        <span style="position: absolute; top: 0.5rem; right: 0.5rem; background: #374151; color: white; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.75rem;">Încheiat</span>\n                       </div>`:""}\n                <div style="padding: 1rem;">\n                    <h3 style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem; color: #1f2937;">${e.title}</h3>\n                    <p style="color: #6b7280; font-size: 0.875rem;">\n                        ${t}\n                    </p>\n                    ${e.venue?`<p style="color: #9ca3af; font-size: 0.875rem;">${e.venue}</p>`:""}\n                </div>\n            </div>\n        `}bindPastEventsFilters(){const e=document.getElementById("filter-year"),t=document.getElementById("filter-month"),n=document.getElementById("clear-filters");e&&e.addEventListener("change",()=>{this.pastEventsFilters.year=e.value?parseInt(e.value):void 0,this.loadPastEvents()}),t&&t.addEventListener("change",()=>{this.pastEventsFilters.month=t.value?parseInt(t.value):void 0,this.loadPastEvents()}),n&&n.addEventListener("click",()=>{this.pastEventsFilters={},this.loadPastEvents()})}}},Symbol.toStringTag,{value:"Module"}));const M=Object.freeze(Object.defineProperty({__proto__:null,CartModule:class{constructor(){__publicField(this,"name","cart")}async init(){}}},Symbol.toStringTag,{value:"Module"}));const L=Object.freeze(Object.defineProperty({__proto__:null,CheckoutModule:class{constructor(){__publicField(this,"name","checkout")}async init(){}}},Symbol.toStringTag,{value:"Module"}));const S=Object.freeze(Object.defineProperty({__proto__:null,SeatingModule:class{constructor(){__publicField(this,"name","seating")}async init(){}}},Symbol.toStringTag,{value:"Module"}))}();
