const AmbiletDataTransformer={MONTHS_SHORT:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"],WEEKDAYS:["Duminica","Luni","Marti","Miercuri","Joi","Vineri","Sambata"],normalizeEvent(e){if(!e)return null;const t=e.starts_at||e.event_date||e.start_date||e.date,a=t?new Date(t):null,r=e.name||e.title||"Eveniment";let n=e.poster_url||e.image_url||e.featured_image||e.image||e.cover_image_url||null;!n||n.startsWith("http")||n.startsWith("/")||(n="/storage/"+n);let i=e.poster_url||e.image_url||e.image||null;!i||i.startsWith("http")||i.startsWith("/")||(i="/storage/"+i);let s=e.hero_image_url||e.cover_image_url||e.image_url||e.image||null;!s||s.startsWith("http")||s.startsWith("/")||(s="/storage/"+s);let l="",o="",u="";"string"==typeof e.venue?l=e.venue:e.venue&&"object"==typeof e.venue&&(l=e.venue.name||"",o=e.venue.city||"",u=e.venue.slug||""),!l&&e.venue_name&&(l=e.venue_name),!o&&e.venue_city&&(o=e.venue_city),!o&&e.city&&(o=e.city);let g=0,c=!1;if(e.ticket_types&&Array.isArray(e.ticket_types)){const t=e.ticket_types.filter(e=>(e.price||0)>0);g=t.length>0?Math.min(...t.map(e=>e.price||0)):0,c=e.ticket_types.length>1}else{g=e.price_from||e.min_price||e.price||0;const t=e.ticket_types_count;c=null!=t&&t>1}const m=e.duration_mode||"single_day";let _=null,d=null;"range"!==m&&"date_range"!==m||(_=e.range_start_date?new Date(e.range_start_date):null,d=e.range_end_date?new Date(e.range_end_date):null);let p="",h="";"string"==typeof e.category?(p=e.category,h=this.slugify(e.category)):e.category&&"object"==typeof e.category&&(p=e.category.name||"",h=e.category.slug||""),e.category_slug&&(h=e.category_slug);const y=e.is_sold_out||!1,f=e.is_low_stock||!1,v=e.is_featured||e.is_homepage_featured||e.is_general_featured||!1;return{id:e.id,slug:e.slug||"",title:r,description:e.description||e.short_description||"",image:n,posterImage:i,heroImage:s,date:a,dateFormatted:a?this.formatDateShort(a):"",day:a?a.getDate():"",month:a?this.MONTHS_SHORT[a.getMonth()]:"",weekday:a?this.WEEKDAYS[a.getDay()]:"",time:e.start_time||this.extractTimeFromIso(t)||(a?this.formatTime(a):""),durationMode:m,rangeStartDate:_,rangeEndDate:d,isDateRange:"range"===m||"date_range"===m,dateRangeFormatted:this.formatDateRange(_,d),venueName:l,venueCity:o,venueSlug:u,venueAddress:e.venue?.address||"",location:o?l+", "+o:l,minPrice:g,priceFormatted:g>0?(c?'<span class="font-semibold text-slate-700 text-xs">De la </span>':'<span class="font-semibold text-slate-800 text-xs">Bilete: </span>')+AmbiletUtils.formatCurrency(g):"Gratuit",categoryName:p,categorySlug:h,isSoldOut:y,isLowStock:f,isFeatured:v,hasAvailability:!1!==e.has_availability&&!y,artists:e.artists||[],_raw:e}},normalizeEvents(e){return Array.isArray(e)?e.map(e=>this.normalizeEvent(e)).filter(e=>null!==e):[]},normalizeArtist(e){if(!e)return null;let t=e.image_url||e.portrait_url||e.logo_url||e.image||null;return!t||t.startsWith("http")||t.startsWith("/")||(t="/storage/"+t),{id:e.id,slug:e.slug||"",name:e.name||"",image:t,description:e.description||e.bio||"",genre:e.genre||e.genres?.[0]?.name||"",eventsCount:e.events_count||e.upcoming_events_count||0,followersCount:e.total_followers||0,_raw:e}},normalizeVenue(e){if(!e)return null;let t=e.image_url||e.image||null;return!t||t.startsWith("http")||t.startsWith("/")||(t="/storage/"+t),{id:e.id,slug:e.slug||"",name:e.name||"",image:t,description:e.description||"",address:e.address||"",city:e.city||"",state:e.state||"",country:e.country||"",latitude:e.latitude||e.lat||null,longitude:e.longitude||e.lng||null,googleMapsUrl:e.google_maps_url||null,capacity:e.capacity||null,eventsCount:e.events_count||0,_raw:e}},normalizePagination(e){if(!e)return{currentPage:1,lastPage:1,perPage:12,total:0,hasMore:!1};const t=e.current_page||e.currentPage||1,a=e.last_page||e.lastPage||1;return{currentPage:t,lastPage:a,perPage:e.per_page||e.perPage||12,total:e.total||0,hasMore:t<a}},formatDateShort(e){if(!e)return"";const t=new Date(e);return t.getDate()+" "+this.MONTHS_SHORT[t.getMonth()]+" "+t.getFullYear()},formatDateRange(e,t){if(!e||!t)return"";const a=new Date(e),r=new Date(t),n=a.getDate(),i=this.MONTHS_SHORT[a.getMonth()],s=a.getFullYear(),l=r.getDate(),o=this.MONTHS_SHORT[r.getMonth()],u=r.getFullYear();return s===u?a.getMonth()===r.getMonth()?n+" - "+l+" "+o+" "+u:n+" "+i+" - "+l+" "+o+" "+u:n+" "+i+" "+s+" - "+l+" "+o+" "+u},extractTimeFromIso(e){if(!e||"string"!=typeof e||!e.includes("T"))return"";const t=e.split("T")[1];return t?t.substring(0,5):""},formatTime(e){if(!e)return"";const t=new Date(e);return String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")},slugify:e=>e?e.toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/--+/g,"-").trim():"",formatCount:e=>e&&0!==e?e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"k":String(e):"0"};window.AmbiletDataTransformer=AmbiletDataTransformer;