const UserTickets={tickets:{upcoming:[],past:[]},qrCodes:{},async init(){AmbiletAuth.isAuthenticated()?(this.loadUserInfo(),await this.loadTickets()):window.location.href="/autentificare?redirect=/cont/bilete"},loadUserInfo(){const e=AmbiletAuth.getUser();if(e){const t=e.name?.split(" ").map(e=>e[0]).join("").substring(0,2).toUpperCase()||"U",n=document.getElementById("header-user-avatar");n&&(n.innerHTML=`<span class="text-sm font-bold text-white">${t}</span>`);const a=document.getElementById("header-user-points");a&&(a.textContent=(e.points||0).toLocaleString())}},async loadTickets(){try{const e=await AmbiletAPI.customer.getAllTickets("all");if(e.success&&e.data){const t=e.data.tickets||e.data||[];this.tickets.upcoming=t.filter(e=>!0===e.event?.is_upcoming),this.tickets.past=t.filter(e=>!1===e.event?.is_upcoming),this.tickets.upcoming.sort((e,t)=>new Date(e.event?.date)-new Date(t.event?.date)),this.tickets.past.sort((e,t)=>new Date(t.event?.date)-new Date(e.event?.date))}else console.warn("No ticket data in API response"),this.tickets.upcoming=[],this.tickets.past=[]}catch(e){console.error("Error loading tickets:",e),this.tickets.upcoming=[],this.tickets.past=[]}document.getElementById("upcoming-count").textContent=this.tickets.upcoming.length,document.getElementById("past-count").textContent=this.tickets.past.length,this.renderUpcoming(),this.renderPast(),0===this.tickets.upcoming.length&&0===this.tickets.past.length&&(document.getElementById("tab-upcoming").classList.add("hidden"),document.getElementById("empty-state").classList.remove("hidden"))},async generateQRCode(e,t){const n=document.getElementById(t);if(!n)return;if(this.qrCodes[e])return n.innerHTML="",void n.appendChild(this.qrCodes[e].cloneNode(!0));if("undefined"!=typeof QRCode&&QRCode.toCanvas)try{const t=document.createElement("canvas");return await QRCode.toCanvas(t,e,{width:120,margin:0,color:{dark:"#181622",light:"#ffffff"}}),this.qrCodes[e]=t,n.innerHTML="",void n.appendChild(t)}catch(e){console.warn("QR canvas generation failed, using API fallback:",e.message)}const a=document.createElement("img");a.src=`https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=${encodeURIComponent(e)}&color=181622&margin=0`,a.alt="QR",a.className="w-full h-full",a.style.maxWidth="120px",this.qrCodes[e]=a,n.innerHTML="",n.appendChild(a)},formatTimeDisplay(e){let t="";return e.time?(t=e.time,e.doors_time&&(t+=` (Porti: ${e.doors_time})`),e.end_time&&(t+=` - ${e.end_time}`)):e.doors_time&&(t=`Porti: ${e.doors_time}`),t},renderUpcoming(){const e=document.getElementById("tab-upcoming");if(0===this.tickets.upcoming.length)return void(e.innerHTML='<p class="py-8 text-center text-muted">Nu ai bilete pentru evenimente viitoare.</p>');const t={};this.tickets.upcoming.forEach(e=>{const n=e.event?.id||"unknown";t[n]||(t[n]={event:e.event,tickets:[]}),t[n].tickets.push(e)});const n=Object.values(t),a=this;e.innerHTML=n.map((e,t)=>{const n=e.event||{},s=e.tickets||[],i=n.date?Math.ceil((new Date(n.date)-new Date)/864e5):0,o=a.formatTimeDisplay(n);return`\n            <div class="overflow-hidden bg-white border ticket-card rounded-2xl border-border">\n                \x3c!-- Event Header --\x3e\n                <div class="p-5 border-b lg:p-6 border-border">\n                    <div class="flex gap-4">\n                        ${n.image?`\n                        <div class="flex-shrink-0 w-20 h-20 overflow-hidden lg:w-24 lg:h-24 rounded-xl">\n                            <img src="${getStorageUrl(n.image)}" class="object-cover w-full h-full" alt="" loading="lazy">\n                        </div>`:""}\n                        <div class="flex-1 min-w-0">\n                            <div class="flex flex-wrap items-center gap-2 mb-2">\n                                <span class="px-2 py-0.5 ${i<=7?"bg-success/10 text-success":"bg-warning/10 text-warning"} text-xs font-bold rounded">IN ${i} ZILE</span>\n                                <span class="px-2 py-0.5 bg-surface text-secondary text-xs font-semibold rounded">${s.length}x ${s[0]?.type||"Bilet"}</span>\n                            </div>\n                            <h2 class="text-lg font-bold truncate lg:text-xl text-secondary">${n.name||"Eveniment"}</h2>\n                            <div class="flex flex-wrap mt-3 text-sm gap-x-4 gap-y-1">\n                                <span class="flex items-center gap-1.5 text-secondary">\n                                    <svg class="w-4 h-4 text-muted" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>\n                                    ${n.date_formatted||a.formatDateShort(n.date)}\n                                </span>\n                                ${o?`\n                                <span class="flex items-center gap-1.5 text-secondary">\n                                    <svg class="w-4 h-4 text-muted" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>\n                                    ${o}\n                                </span>`:""}\n                                ${n.venue?`\n                                <span class="flex items-center gap-1.5 text-secondary">\n                                    <svg class="w-4 h-4 text-muted" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/></svg>\n                                    ${n.venue}${n.city?", "+n.city:""}\n                                </span>`:""}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                \x3c!-- Tickets Grid --\x3e\n                <div class="p-5 lg:p-6 bg-surface/50">\n                    <div class="flex items-center justify-between mb-4">\n                        <p class="text-sm font-semibold text-secondary">${s.length>1?"Biletele tale":"Biletul tƒÉu"}</p>\n                        <div class="flex gap-2 no-print">\n                            <button onclick="UserTickets.printEventTickets(${t})" class="flex items-center gap-1.5 px-3 py-1.5 bg-white text-secondary text-xs font-medium rounded-lg border border-border hover:border-primary hover:text-primary transition-colors">\n                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"/></svg>\n                                PrinteazƒÉ\n                            </button>\n                            <button onclick="UserTickets.showCalendarOptions(${t})" class="flex items-center gap-1.5 px-3 py-1.5 bg-white text-secondary text-xs font-medium rounded-lg border border-border hover:border-primary hover:text-primary transition-colors">\n                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>\n                                Calendar\n                            </button>\n                        </div>\n                    </div>\n                    <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-${Math.min(s.length,4)} gap-3">\n                        ${s.map((e,t)=>`\n                        <div class="p-3 text-center bg-white border ticket-qr rounded-xl border-border" onclick="UserTickets.showQRModal('${e.code}', '${(e.type||"Bilet").replace(/'/g,"\\'")}', '${(e.attendee_name||"").replace(/'/g,"\\'")}', '${(n.name||"Eveniment").replace(/'/g,"\\'")}')">\n                            <div class="flex items-center justify-between mb-2">\n                                <span class="text-xs text-muted">#${t+1}</span>\n                                <span class="px-1.5 py-0.5 ${"valid"===e.status?"bg-success/10 text-success":"used"===e.status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"} text-[10px] font-bold rounded uppercase">${"valid"===e.status?"VALID":"used"===e.status?"FOLOSIT":e.status?.toUpperCase()}</span>\n                            </div>\n                            <div id="qr-${e.code.replace(/[^a-zA-Z0-9]/g,"")}" class="w-full aspect-square bg-white flex items-center justify-center mb-2 mx-auto max-w-[120px]">\n                                <div class="w-6 h-6 border-2 rounded-full animate-spin border-primary border-t-transparent"></div>\n                            </div>\n                            ${e.attendee_name?`<p class="text-[10px] text-secondary font-medium truncate">${e.attendee_name}</p>`:""}\n                            <p class="text-[10px] text-muted font-mono truncate">${e.code}</p>\n                            <p class="mt-1 text-xs font-medium text-secondary">${e.type}</p>\n                            ${e.seat?`<p class="mt-0.5 text-[10px] text-muted">${[e.seat.section_name,e.seat.row_label?"R"+e.seat.row_label:"",e.seat.seat_number?"Loc "+e.seat.seat_number:""].filter(Boolean).join(", ")}</p>`:""}\n                        </div>\n                        `).join("")}\n                    </div>\n                </div>\n            </div>\n        `}).join(""),this.eventGroups=n,setTimeout(()=>{n.forEach(e=>{e.tickets.forEach(e=>{const t="qr-"+e.code.replace(/[^a-zA-Z0-9]/g,"");this.generateQRCode(e.code,t)})})},100)},renderPast(){const e=document.getElementById("tab-past");if(0===this.tickets.past.length)return void(e.innerHTML='<p class="py-8 text-center text-muted">Nu ai bilete pentru evenimente trecute.</p>');const t={};this.tickets.past.forEach(e=>{const n=e.event?.id||"unknown";t[n]||(t[n]={event:e.event,tickets:[]}),t[n].tickets.push(e)});const n=Object.values(t);e.innerHTML=n.map(e=>{const t=e.event||{},n=e.tickets||[],a=n.some(e=>e.checked_in);return`\n            <div class="p-4 bg-white border opacity-75 rounded-xl border-border lg:p-5">\n                <div class="flex gap-4">\n                    ${t.image?`\n                    <div class="flex-shrink-0 w-16 h-16 overflow-hidden rounded-lg lg:w-20 lg:h-20 grayscale">\n                        <img src="${getStorageUrl(t.image)}" class="object-cover w-full h-full" alt="" loading="lazy">\n                    </div>`:""}\n                    <div class="flex-1 min-w-0">\n                        <div class="flex items-center gap-2 mb-1">\n                            <span class="px-2 py-0.5 bg-muted/20 text-muted text-xs font-bold rounded">INCHEIAT</span>\n                            ${a?'<span class="px-2 py-0.5 bg-success/10 text-success text-xs font-bold rounded">CHECK-IN OK</span>':""}\n                        </div>\n                        <h3 class="font-semibold text-secondary">${t.name||"Eveniment"}</h3>\n                        <p class="text-sm text-muted">${t.date_formatted||this.formatDateShort(t.date)}${t.venue?" - "+t.venue:""}</p>\n                        <p class="mt-1 text-xs text-muted">${n.length}x ${n[0]?.type||"Bilet"}</p>\n                    </div>\n                </div>\n            </div>\n        `}).join("")},showTab(e){document.getElementById("tab-upcoming").classList.add("hidden"),document.getElementById("tab-past").classList.add("hidden"),document.querySelectorAll(".tab-btn").forEach(e=>{e.classList.remove("active"),e.classList.add("text-muted","bg-surface")}),document.getElementById("tab-"+e).classList.remove("hidden"),document.querySelector(`[data-tab="${e}"]`).classList.add("active"),document.querySelector(`[data-tab="${e}"]`).classList.remove("text-muted","bg-surface")},async showQRModal(e,t,n,a){const s=document.getElementById("qr-modal-backdrop");document.getElementById("qr-modal-title").textContent=a,document.getElementById("qr-modal-attendee").textContent=n||"",document.getElementById("qr-modal-code").textContent=e,document.getElementById("qr-modal-type").textContent=t;const i=document.getElementById("qr-modal-qr");if(i.innerHTML='<div class="flex items-center justify-center h-full"><div class="w-8 h-8 border-4 rounded-full animate-spin border-primary border-t-transparent"></div></div>',s.classList.add("active"),document.body.style.overflow="hidden","undefined"!=typeof QRCode&&QRCode.toCanvas)try{const t=document.createElement("canvas");return await QRCode.toCanvas(t,e,{width:280,margin:1,color:{dark:"#181622",light:"#ffffff"}}),i.innerHTML="",void i.appendChild(t)}catch(e){}i.innerHTML=`<img src="https://api.qrserver.com/v1/create-qr-code/?size=280x280&data=${encodeURIComponent(e)}&color=181622&margin=0" alt="QR" style="width:100%;height:100%">`},hideQRModal(e){e&&e.target!==e.currentTarget||(document.getElementById("qr-modal-backdrop").classList.remove("active"),document.body.style.overflow="")},formatDate(e){const t=new Date(e);return`${["DuminicƒÉ","Luni","Mar»õi","Miercuri","Joi","Vineri","S√¢mbƒÉtƒÉ"][t.getDay()]}, ${t.getDate()} ${["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"][t.getMonth()]} ${t.getFullYear()}`},formatDateShort(e){const t=new Date(e);return`${t.getDate()} ${["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]} ${t.getFullYear()}`},showCalendarOptions(e){const t=this.eventGroups?.[e];if(!t)return;t.event,t.tickets;const n=document.getElementById("calendar-dropdown");n&&n.remove();const a=document.createElement("div");a.id="calendar-dropdown",a.className="fixed inset-0 z-50 flex items-center justify-center bg-black/50",a.onclick=e=>{e.target===a&&a.remove()},a.innerHTML=`\n            <div class="bg-white rounded-2xl p-4 w-72 shadow-xl">\n                <h3 class="text-lg font-bold text-secondary mb-4">AdaugƒÉ √Æn calendar</h3>\n                <div class="space-y-2">\n                    <button onclick="UserTickets.addToGoogleCalendar(${e}); document.getElementById('calendar-dropdown').remove();" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-surface transition-colors">\n                        <svg class="w-6 h-6" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>\n                        <span class="font-medium text-secondary">Google Calendar</span>\n                    </button>\n                    <button onclick="UserTickets.addToCalendar(${e}); document.getElementById('calendar-dropdown').remove();" class="w-full flex items-center gap-3 p-3 rounded-xl hover:bg-surface transition-colors">\n                        <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>\n                        <span class="font-medium text-secondary">DescarcƒÉ .ics</span>\n                    </button>\n                </div>\n                <button onclick="document.getElementById('calendar-dropdown').remove();" class="mt-4 w-full py-2 text-sm text-muted hover:text-secondary transition-colors">AnuleazƒÉ</button>\n            </div>\n        `,document.body.appendChild(a)},addToGoogleCalendar(e){const t=this.eventGroups?.[e];if(!t)return;const n=t.event,a=t.tickets;let s,i;if(n.date){if(s=new Date(n.date),n.time&&!n.date.includes("T")){const[e,t]=n.time.split(":");s.setHours(parseInt(e)||19,parseInt(t)||0)}}else s=new Date;if(n.end_time){i=new Date(s);const[e,t]=n.end_time.split(":");i.setHours(parseInt(e),parseInt(t)||0),i<s&&i.setDate(i.getDate()+1)}else i=new Date(s.getTime()+108e5);const o=e=>e.toISOString().replace(/[-:]/g,"").replace(/\.\d{3}/,""),r=new URL("https://calendar.google.com/calendar/render");r.searchParams.set("action","TEMPLATE"),r.searchParams.set("text",n.name||"Eveniment"),r.searchParams.set("dates",`${o(s)}/${o(i)}`),r.searchParams.set("details",`${a.length}x ${a[0]?.type||"Bilet"}\n\nBilete achizitionate de pe AmBilet.ro`),r.searchParams.set("location",`${n.venue||""}${n.city?", "+n.city:""}`),window.open(r.toString(),"_blank"),"undefined"!=typeof AmbiletNotifications&&AmbiletNotifications.success("Se deschide Google Calendar...")},addToCalendar(e){const t=this.eventGroups?.[e];if(!t)return;const n=t.event,a=t.tickets,s=a[0]?.code||"ticket";let i,o;if(n.date){if(i=new Date(n.date),n.time&&!n.date.includes("T")){const[e,t]=n.time.split(":");i.setHours(parseInt(e)||19,parseInt(t)||0)}}else i=new Date;if(n.end_time){o=new Date(i);const[e,t]=n.end_time.split(":");o.setHours(parseInt(e),parseInt(t)||0),o<i&&o.setDate(o.getDate()+1)}else o=new Date(i.getTime()+108e5);const r=e=>e.toISOString().replace(/[-:]/g,"").replace(/\.\d{3}/,""),d=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//AmBilet//Event Calendar//RO","BEGIN:VEVENT",`DTSTART:${r(i)}`,`DTEND:${r(o)}`,`SUMMARY:${n.name||"Eveniment"}`,`DESCRIPTION:${a.length}x ${a[0]?.type||"Bilet"}`,`LOCATION:${n.venue||""}${n.city?", "+n.city:""}`,"STATUS:CONFIRMED",`UID:${s}@ambilet.ro`,"END:VEVENT","END:VCALENDAR"].join("\r\n"),c=new Blob([d],{type:"text/calendar;charset=utf-8"}),l=document.createElement("a");l.href=URL.createObjectURL(c),l.download=`${(n.name||"event").replace(/[^a-zA-Z0-9]/g,"_")}.ics`,document.body.appendChild(l),l.click(),document.body.removeChild(l),"undefined"!=typeof AmbiletNotifications&&AmbiletNotifications.success("Eveniment descƒÉrcat! Deschide fi»ôierul .ics pentru a-l adƒÉuga √Æn calendar.")},async printEventTickets(e){const t=this.eventGroups?.[e];if(!t)return;const n=t.event||{},a=t.tickets||[],s=this.formatTimeDisplay(n),i={};for(const e of a){if("undefined"!=typeof QRCode&&QRCode.toCanvas)try{const t=document.createElement("canvas");await QRCode.toCanvas(t,e.code,{width:200,margin:1,color:{dark:"#181622",light:"#ffffff"}}),i[e.code]=t.toDataURL("image/png");continue}catch(e){}i[e.code]=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(e.code)}&color=181622&margin=0`}const o=`<!DOCTYPE html>\n<html><head>\n<meta charset="UTF-8">\n<title>Bilete - ${n.name||"Eveniment"}</title>\n<style>\n    * { margin: 0; padding: 0; box-sizing: border-box; }\n    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; color: #1a1a2e; }\n    @page { size: A4; margin: 15mm; }\n    .ticket-page { page-break-after: always; height: 100vh; display: flex; flex-direction: column; justify-content: space-between; padding: 20px 0; }\n    .ticket-page:last-child { page-break-after: avoid; }\n    .ticket-header { text-align: center; border-bottom: 2px solid #e5e7eb; padding-bottom: 20px; }\n    .event-name { font-size: 24px; font-weight: 700; margin-bottom: 8px; }\n    .event-details { display: flex; justify-content: center; gap: 24px; flex-wrap: wrap; color: #4b5563; font-size: 14px; margin-top: 12px; }\n    .event-details span { display: flex; align-items: center; gap: 6px; }\n    .ticket-body { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 16px; }\n    .qr-section { text-align: center; }\n    .qr-section img { width: 200px; height: 200px; }\n    .ticket-code { font-family: monospace; font-size: 18px; font-weight: 700; margin-top: 8px; letter-spacing: 1px; }\n    .ticket-info { text-align: center; }\n    .ticket-type { font-size: 18px; font-weight: 600; color: #1a1a2e; }\n    .ticket-seat { font-size: 14px; color: #4b5563; margin-top: 4px; }\n    .ticket-attendee { font-size: 14px; color: #6b7280; margin-top: 4px; }\n    .ticket-number { font-size: 12px; color: #9ca3af; }\n    .ticket-footer { text-align: center; border-top: 1px solid #e5e7eb; padding-top: 16px; font-size: 11px; color: #9ca3af; }\n</style>\n</head><body>\n${a.map((e,t)=>{const o=e.seat?[e.seat.section_name,e.seat.row_label?"R√¢nd "+e.seat.row_label:"",e.seat.seat_number?"Loc "+e.seat.seat_number:""].filter(Boolean).join(", "):"";return`\n    <div class="ticket-page">\n        <div class="ticket-header">\n            <div class="event-name">${n.name||"Eveniment"}</div>\n            <div class="event-details">\n                <span>üìÖ ${n.date_formatted||this.formatDateShort(n.date)}</span>\n                ${s?`<span>üïê ${s}</span>`:""}\n                ${n.venue?`<span>üìç ${n.venue}${n.city?", "+n.city:""}</span>`:""}\n            </div>\n        </div>\n        <div class="ticket-body">\n            <div class="ticket-number">Bilet ${t+1} din ${a.length}</div>\n            <div class="qr-section">\n                <img src="${i[e.code]||""}" alt="QR Code">\n                <div class="ticket-code">${e.code}</div>\n            </div>\n            <div class="ticket-info">\n                <div class="ticket-type">${e.type||"Bilet Standard"}</div>\n                ${o?`<div class="ticket-seat">${o}</div>`:""}\n                ${e.attendee_name?`<div class="ticket-attendee">${e.attendee_name}</div>`:""}\n            </div>\n        </div>\n        <div class="ticket-footer">\n            PrezintƒÉ acest cod QR la intrare ‚Ä¢ ${n.venue?n.venue:""}${n.city?", "+n.city:""}\n        </div>\n    </div>`}).join("")}\n</body></html>`,r=window.open("","_blank");r.document.write(o),r.document.close(),r.onload=function(){r.print()}},downloadPDF(e){this.tickets.upcoming[e]&&("undefined"!=typeof AmbiletNotifications&&AmbiletNotifications.info('Func»õie PDF √Æn dezvoltare. Folose»ôte "PrinteazƒÉ" pentru a salva ca PDF.'),window.print())}};document.addEventListener("keydown",e=>{"Escape"===e.key&&UserTickets.hideQRModal()}),document.addEventListener("DOMContentLoaded",()=>UserTickets.init());